(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("mAIw"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService(i);if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService(s)}catch(l){}try{for(var i=Object(r.h)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var A=this.getOrInitializeService(c);u.resolve(A)}catch(l){}}}catch(h){e={error:h}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,function(t){return t===s?void 0:t}(t)),this.instances.set(t,e)),e||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r=void 0;try{this.work(t)}catch(i){n=!0,r=!!i&&i||new Error(i)}if(n)return this.unsubscribe(),r}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e,r=n("zIRd"),i=n("mAIw"),o=n("qOnz"),s=n("q/0M"),a=n("/6Yf"),u=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(o.G)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(o.A)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),c=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(o.i)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),A=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new u(e)}}catch(n){}return new c},l=A("localStorage"),h=A("sessionStorage"),f=new s.b("@firebase/database"),d=(e=1,function(){return e++}),p=function(t){var e=Object(o.F)(t),n=new o.d;n.update(e);var r=n.digest();return o.g.encodeByteArray(r)},g=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=g.apply(null,i):n+="object"==typeof i?Object(o.G)(i):i,n+=" "}return n},y=null,v=!0,m=function(t,e){Object(o.e)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(f.logLevel=s.a.VERBOSE,y=f.log.bind(f),e&&h.set("logging_enabled",!0)):"function"==typeof t?y=t:(y=null,h.remove("logging_enabled"))},b=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===v&&(v=!1,null===y&&!0===h.get("logging_enabled")&&m(!0)),y){var n=g.apply(null,t);y(n)}},w=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];b.apply(void 0,Object(i.f)([t],e))}},_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+g.apply(void 0,Object(i.f)(t));f.error(n)},B=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+g.apply(void 0,Object(i.f)(t));throw f.error(n),new Error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+g.apply(void 0,Object(i.f)(t));f.warn(n)},E=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Q="[MIN_NAME]",U="[MAX_NAME]",O=function(t,e){if(t===e)return 0;if(t===Q||e===U)return-1;if(e===Q||t===U)return 1;var n=G(t),r=G(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},I=function(t,e){return t===e?0:t<e?-1:1},T=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(o.G)(e))},F=function(t){if("object"!=typeof t||null===t)return Object(o.G)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Object(o.G)(e[i]),r+=":",r+=F(t[e[i]]);return r+"}"},N=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function S(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var H,R,x,D,P,k,L,M,j,K,V=function(t){var e,n,r,i,s;Object(o.e)(!E(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var A=parseInt(u.substr(s,8),2).toString(16);1===A.length&&(A="0"+A),c+=A}return c.toLowerCase()},z=new RegExp("^-?(0*)\\d{1,10}$"),G=function(t){if(z.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},q=function(t){try{t()}catch(e){setTimeout(function(){throw C("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},W=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},X=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return Object.defineProperty(t,"Empty",{get:function(){return new t("")},enumerable:!1,configurable:!0}),t.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},t.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},t.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new t(this.pieces_,e)},t.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},t.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},t.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)e.push(this.pieces_[n]);return new t(e,0)},t.prototype.child=function(e){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(e instanceof t)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new t(n,0)},t.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},t.relativePath=function(e,n){var r=e.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return t.relativePath(e.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+e+")")},t.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=O(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},t.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},t.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},t}(),J=function(){function t(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(o.E)(this.parts_[n]);this.checkValid_()}return Object.defineProperty(t,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(t,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),t.prototype.push=function(t){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=Object(o.E)(t),this.checkValid_()},t.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=Object(o.E)(t),this.parts_.length>0&&(this.byteLength_-=1)},t.prototype.checkValid_=function(){if(this.byteLength_>t.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+t.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>t.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+t.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},t.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},t}(),Y="firebaseio.com",$="websocket",Z="long_polling",tt=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=l.get("host:"+t)||this.host}return t.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},t.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&l.set("host:"+this.host,this.internalHost))},t.prototype.connectionURL=function(t,e){var n;if(Object(o.e)("string"==typeof t,"typeof type must == string"),Object(o.e)("object"==typeof e,"typeof params must == object"),t===$)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==Z)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return S(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},t}(),et=function(t,e){var n=nt(t),r=n.namespace;return"firebase.com"===n.domain&&B(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||B("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&C("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tt(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new X(n.pathString)}},nt=function(t){var e="",n="",r="",o="",s="",a=!0,u="https",c=443;if("string"==typeof t){var A=t.indexOf("//");A>=0&&(u=t.substring(0,A-1),t=t.substring(A+2));var l=t.indexOf("/");-1===l&&(l=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(l,h)),l<h&&(o=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(l,h)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var o=Object(i.h)(t.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):C("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,h)));(A=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(A+1),10)):A=e.length;var d=e.slice(0,A);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=e.indexOf(".");r=e.substring(0,p).toLowerCase(),n=e.substring(p+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:o,namespace:s}},rt=/[\[\].#$\/\u0000-\u001F\u007F]/,it=/[\[\].#$\u0000-\u001F\u007F]/,ot=10485760,st=function(t){return"string"==typeof t&&0!==t.length&&!rt.test(t)},at=function(t){return"string"==typeof t&&0!==t.length&&!it.test(t)},ut=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!E(t)||t&&"object"==typeof t&&Object(o.i)(t,".sv")},ct=function(t,e,n,r,i){i&&void 0===n||At(Object(o.m)(t,e,i),n,r)},At=function(t,e,n){var r=n instanceof X?new J(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(t+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(E(e))throw new Error(t+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>ot/3&&Object(o.E)(e)>ot)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,s=!1;if(S(e,function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!st(e)))throw new Error(t+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),At(t,n,r),r.pop()}),i&&s)throw new Error(t+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},lt=function(t,e,n,r,i){if(!i||void 0!==n){var s=Object(o.m)(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];S(n,function(t,e){var n=new X(t);if(At(s,e,r.child(n)),".priority"===n.getBack()&&!ut(e))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!st(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(X.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(s,a)}},ht=function(t,e,n,r){if(!r||void 0!==n){if(E(n))throw new Error(Object(o.m)(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ut(n))throw new Error(Object(o.m)(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ft=function(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(o.m)(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},dt=function(t,e,n,r){if(!(r&&void 0===n||st(n)))throw new Error(Object(o.m)(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},pt=function(t,e,n,r){if(!(r&&void 0===n||at(n)))throw new Error(Object(o.m)(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},gt=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),pt(t,e,n,r)},yt=function(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")},vt=function(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!st(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),at(t)}(r))throw new Error(Object(o.m)(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},mt=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(o.m)(t,e,r)+"must be a boolean.")},bt=function(){function t(t,e){this.repo_=t,this.path_=e}return t.prototype.cancel=function(t){Object(o.H)("OnDisconnect.cancel",0,1,arguments.length),Object(o.I)("OnDisconnect.cancel",1,t,!0);var e=new o.a;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},t.prototype.remove=function(t){Object(o.H)("OnDisconnect.remove",0,1,arguments.length),yt("OnDisconnect.remove",this.path_),Object(o.I)("OnDisconnect.remove",1,t,!0);var e=new o.a;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},t.prototype.set=function(t,e){Object(o.H)("OnDisconnect.set",1,2,arguments.length),yt("OnDisconnect.set",this.path_),ct("OnDisconnect.set",1,t,this.path_,!1),Object(o.I)("OnDisconnect.set",2,e,!0);var n=new o.a;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},t.prototype.setWithPriority=function(t,e,n){Object(o.H)("OnDisconnect.setWithPriority",2,3,arguments.length),yt("OnDisconnect.setWithPriority",this.path_),ct("OnDisconnect.setWithPriority",1,t,this.path_,!1),ht("OnDisconnect.setWithPriority",2,e,!1),Object(o.I)("OnDisconnect.setWithPriority",3,n,!0);var r=new o.a;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},t.prototype.update=function(t,e){if(Object(o.H)("OnDisconnect.update",1,2,arguments.length),yt("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lt("OnDisconnect.update",1,t,this.path_,!1),Object(o.I)("OnDisconnect.update",2,e,!0);var i=new o.a;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},t}(),wt=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(o.H)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),_t=(H="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",R=0,x=[],function(t){var e,n=t===R;R=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=H.charAt(t%64),t=Math.floor(t/64);Object(o.e)(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===x[e];e--)x[e]=0;x[e]++}else for(e=0;e<12;e++)x[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=H.charAt(x[e]);return Object(o.e)(20===i.length,"nextPushId: Length should be 20."),i}),Bt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Ct=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new Bt(Q,t),r=new Bt(Q,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return Bt.MIN},t}(),Et=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return D},set:function(t){D=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return O(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(o.f)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return Bt.MIN},e.prototype.maxPost=function(){return new Bt(U,D)},e.prototype.makePost=function(t,e){return Object(o.e)("string"==typeof t,"KeyIndex indexValue must always be a string."),new Bt(t,D)},e.prototype.toString=function(){return".key"},e}(Ct),Qt=new Et,Ut=function(t){return"number"==typeof t?"number:"+V(t):"string:"+t},Ot=function(t){if(t.isLeafNode()){var e=t.val();Object(o.e)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(o.i)(e,".sv"),"Priority must be a string or number.")}else Object(o.e)(t===P||t.isEmpty(),"priority of unexpected type.");Object(o.e)(t===P||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},It=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(o.e)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Ot(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return k},set:function(t){k=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=e.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(o.e)(".priority"!==r||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Ut(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?V(this.value_):this.value_,this.lazyHash_=p(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(o.e)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(o.e)(i>=0,"Unknown leaf type: "+n),Object(o.e)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Tt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?O(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return Bt.MIN},e.prototype.maxPost=function(){return new Bt(U,new It("[PRIORITY-POST]",M))},e.prototype.makePost=function(t,e){var n=L(t);return new Bt(e,new It("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Ct)),Ft=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Nt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Ht.EMPTY_NODE,this.right=null!=o?o:Ht.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Ht.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Ht.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),St=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Nt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Ht=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Nt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Nt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ft(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ft(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ft(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ft(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new St,t}(),Rt=Math.log(2),xt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Rt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Dt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Nt(s,o.node,Nt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),A=i(u+1,r);return o=t[u],s=n?n(o):o,new Nt(s,o.node,Nt.BLACK,c,A)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),A=t[o],l=n?n(A):A;u(new Nt(l,A.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var A=e.nextBitIsOne(),l=Math.pow(2,e.count-(c+1));A?a(l,Nt.BLACK):(a(l,Nt.BLACK),a(l,Nt.RED))}return o}(new xt(t.length));return new Ht(r||e,o)},Pt={},kt=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(o.e)(Pt&&Tt,"ChildrenNode.ts has not been loaded"),j=j||new t({".priority":Pt},{".priority":Tt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(o.D)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ht?e:null},t.prototype.hasIndex=function(t){return Object(o.i)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(o.e)(e!==Qt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(Bt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?Dt(s,e.getCompare()):Pt;var A=e.toString(),l=Object(i.a)({},this.indexSet_);l[A]=e;var h=Object(i.a)({},this.indexes_);return h[A]=r,new t(h,l)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(o.B)(this.indexes_,function(t,i){var s=Object(o.D)(r.indexSet_,i);if(Object(o.e)(s,"Missing index implementation for "+i),t===Pt){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(Bt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),Dt(a,s.getCompare())}return Pt}var A=n.get(e.name),l=t;return A&&(l=l.remove(new Bt(e.name,A))),l.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(o.B)(this.indexes_,function(t){if(t===Pt)return t;var r=n.get(e.name);return r?t.remove(new Bt(e.name,r)):t}),this.indexSet_)},t}();function Lt(t,e){return O(t.name,e.name)}function Mt(t,e){return O(t,e)}var jt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Ot(this.priorityNode_),this.children_.isEmpty()&&Object(o.e)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return K||(K=new t(new Ht(Mt),null,kt.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||K},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?K:e},t.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(o.e)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new Bt(e,n),i=void 0,s=void 0;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?K:this.priorityNode_;return new t(i,a,s)},t.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Object(o.e)(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Tt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Ut(this.getPriority().val())+":"),this.forEachChild(Tt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":p(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Bt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new Bt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new Bt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,Bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,Bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Kt?-1:0},t.prototype.withIndex=function(e){if(e===Qt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Qt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Tt),r=e.getIterator(Tt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Qt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Kt=new(function(t){function e(){return t.call(this,new Ht(Mt),jt.EMPTY_NODE,kt.Default)||this}return Object(i.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return jt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(jt));function Vt(t,e){if(void 0===e&&(e=null),null===t)return jt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(o.e)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new It(t,Vt(e));if(t instanceof Array){var n=jt.EMPTY_NODE;return S(t,function(e,r){if(Object(o.i)(t,e)&&"."!==e.substring(0,1)){var i=Vt(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}}),n.updatePriority(Vt(e))}var r=[],i=!1;if(S(t,function(t,e){if("."!==t.substring(0,1)){var n=Vt(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new Bt(t,n)))}}),0===r.length)return jt.EMPTY_NODE;var s=Dt(r,Lt,function(t){return t.name},Mt);if(i){var a=Dt(r,Tt.getCompare());return new jt(s,Vt(e),new kt({".priority":a},{".priority":Tt}))}return new jt(s,Vt(e),kt.Default)}Object.defineProperties(Bt,{MIN:{value:new Bt(Q,jt.EMPTY_NODE)},MAX:{value:new Bt(U,Kt)}}),Et.__EMPTY_NODE=jt.EMPTY_NODE,It.__childrenNodeConstructor=jt,P=Kt,M=Kt,L=Vt;var zt,Gt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(i.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?O(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return Bt.MIN},e.prototype.maxPost=function(){return Bt.MAX},e.prototype.makePost=function(t,e){var n=Vt(t);return new Bt(e,n)},e.prototype.toString=function(){return".value"},e}(Ct)),qt=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(o.e)(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return Object(i.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?O(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Vt(t),r=jt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Bt(e,r)},e.prototype.maxPost=function(){var t=jt.EMPTY_NODE.updateChild(this.indexPath_,Kt);return new Bt(U,t)},e.prototype.toString=function(){return this.indexPath_.slice().join("/")},e}(Ct),Wt=function(){function t(t,e,n){this.node_=t,this.ref_=e,this.index_=n}return t.prototype.val=function(){return Object(o.H)("DataSnapshot.val",0,0,arguments.length),this.node_.val()},t.prototype.exportVal=function(){return Object(o.H)("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},t.prototype.toJSON=function(){return Object(o.H)("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},t.prototype.exists=function(){return Object(o.H)("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},t.prototype.child=function(e){Object(o.H)("DataSnapshot.child",0,1,arguments.length),e=String(e),pt("DataSnapshot.child",1,e,!1);var n=new X(e),r=this.ref_.child(n);return new t(this.node_.getChild(n),r,Tt)},t.prototype.hasChild=function(t){Object(o.H)("DataSnapshot.hasChild",1,1,arguments.length),pt("DataSnapshot.hasChild",1,t,!1);var e=new X(t);return!this.node_.getChild(e).isEmpty()},t.prototype.getPriority=function(){return Object(o.H)("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},t.prototype.forEach=function(e){var n=this;if(Object(o.H)("DataSnapshot.forEach",1,1,arguments.length),Object(o.I)("DataSnapshot.forEach",1,e,!1),this.node_.isLeafNode())return!1;var r=this.node_;return!!r.forEachChild(this.index_,function(r,i){return e(new t(i,n.ref_.child(r),Tt))})},t.prototype.hasChildren=function(){return Object(o.H)("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(t.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(o.H)("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},t.prototype.getRef=function(){return Object(o.H)("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Xt=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(o.G)(this.snapshot.exportVal())},t}(),Jt=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Yt=function(){function t(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new Xt("value",this,new Wt(t.snapshotNode,e.getRef(),n))},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Jt(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},t.prototype.hasAnyCallback=function(){return null!==this.callback_},t}(),$t=function(){function t(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,Object(o.i)(this.callbacks_,e)},t.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Jt(this,t,e):null},t.prototype.createEvent=function(t,e){Object(o.e)(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new Xt(t.type,this,new Wt(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Object(o.e)(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},t.prototype.matches=function(e){var n=this;if(e instanceof t){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var r=Object.keys(e.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||e.callbacks_[s]&&this.callbacks_[a]&&e.callbacks_[s]!==this.callbacks_[a])}return i.every(function(t){return e.callbacks_[t]===n.callbacks_[t]})}}}return!1},t.prototype.hasAnyCallback=function(){return null!==this.callbacks_},t}(),Zt=function(){function t(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.e)(zt,"Reference.ts has not been loaded"),zt},set:function(t){zt=t},enumerable:!1,configurable:!0}),t.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Qt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==Q)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==U)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Tt){if(null!=e&&!ut(e)||null!=n&&!ut(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(o.e)(t.getIndex()instanceof qt||t.getIndex()===Gt,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},t.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},t.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},t.prototype.getQueryParams=function(){return this.queryParams_},t.prototype.getRef=function(){return Object(o.H)("Query.ref",0,0,arguments.length),new t.__referenceConstructor(this.repo,this.path)},t.prototype.on=function(e,n,r,i){Object(o.H)("Query.on",2,4,arguments.length),ft("Query.on",1,e,!1),Object(o.I)("Query.on",2,n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i);if("value"===e)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[e]=n,this.onChildEvent(a,s.cancel,s.context)}return n},t.prototype.onValueEvent=function(t,e,n){var r=new Yt(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},t.prototype.onChildEvent=function(t,e,n){var r=new $t(t,e,n);this.repo.addEventCallbackForQuery(this,r)},t.prototype.off=function(t,e,n){Object(o.H)("Query.off",0,3,arguments.length),ft("Query.off",1,t,!0),Object(o.I)("Query.off",2,e,!0),Object(o.J)("Query.off",3,n,!0);var r=null,i=null;if("value"===t){var s=e||null;r=new Yt(s,null,n||null)}else t&&(e&&((i={})[t]=e),r=new $t(i,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},t.prototype.get=function(){return this.repo.getValue(this)},t.prototype.once=function(e,n,r,i){var s=this;Object(o.H)("Query.once",1,4,arguments.length),ft("Query.once",1,e,!1),Object(o.I)("Query.once",2,n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),u=!0,c=new o.a;c.promise.catch(function(){});var A=function(t){u&&(u=!1,s.off(e,A),n&&n.bind(a.context)(t),c.resolve(t))};return this.on(e,A,function(t){s.off(e,A),a.cancel&&a.cancel.bind(a.context)(t),c.reject(t)}),c.promise},t.prototype.limitToFirst=function(e){if(Object(o.H)("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},t.prototype.limitToLast=function(e){if(Object(o.H)("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new t(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},t.prototype.orderByChild=function(e){if(Object(o.H)("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');pt("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new X(e);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new qt(n),i=this.queryParams_.orderBy(r);return t.validateQueryEndpoints_(i),new t(this.repo,this.path,i,!0)},t.prototype.orderByKey=function(){Object(o.H)("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Qt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByPriority=function(){Object(o.H)("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(Tt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.orderByValue=function(){Object(o.H)("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(Gt);return t.validateQueryEndpoints_(e),new t(this.repo,this.path,e,!0)},t.prototype.startAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.startAt",0,2,arguments.length),ct("Query.startAt",1,e,this.path,!0),dt("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(e=null,n=null),new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.endAt=function(e,n){void 0===e&&(e=null),Object(o.H)("Query.endAt",0,2,arguments.length),ct("Query.endAt",1,e,this.path,!0),dt("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(e,n);if(t.validateLimit_(r),t.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new t(this.repo,this.path,r,this.orderByCalled_)},t.prototype.equalTo=function(t,e){if(Object(o.H)("Query.equalTo",1,2,arguments.length),ct("Query.equalTo",1,t,this.path,!1),dt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},t.prototype.toString=function(){return Object(o.H)("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},t.prototype.toJSON=function(){return Object(o.H)("Query.toJSON",0,1,arguments.length),this.toString()},t.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},t.prototype.queryIdentifier=function(){var t=this.queryObject(),e=F(t);return"{}"===e?"default":e},t.prototype.isEqual=function(e){if(Object(o.H)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}var r=this.repo===e.repo,i=this.path.equals(e.path),s=this.queryIdentifier()===e.queryIdentifier();return r&&i&&s},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,Object(o.I)(t,3,r.cancel,!0),r.context=n,Object(o.J)(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(o.m)(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),te=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),ee=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=this.path_.child(e);return new t(this.syncTree_,n)},t.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},t}(),ne=function(t,e,n){return t&&"object"==typeof t?(Object(o.e)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?re(t[".sv"],e,n):"object"==typeof t[".sv"]?ie(t[".sv"],e):void Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},re=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(o.e)(!1,"Unexpected server value: "+t)}},ie=function(t,e,n){t.hasOwnProperty("increment")||Object(o.e)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(o.e)(!1,"Unexpected increment value: "+r);var i=e.node();if(Object(o.e)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var s=i.getValue();return"number"!=typeof s?r:s+r},oe=function(t,e,n,r){return ae(e,new ee(n,t),r)},se=function(t,e,n){return ae(t,new te(e),n)};function ae(t,e,n){var r,i=t.getPriority().val(),o=ne(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=ne(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new It(a,Vt(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new It(o))),u.forEachChild(Tt,function(t,i){var o=ae(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var ue,ce,Ae=function(){function t(){this.value=null,this.children=new Map}return t.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&this.children.size>0){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},t.prototype.remember=function(e,n){if(e.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,n);else{var r=e.getFront();this.children.has(r)||this.children.set(r,new t);var i=this.children.get(r);e=e.popFront(),i.remember(e,n)}},t.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Tt,function(t,e){n.remember(new X(t),e)}),this.forget(t)}if(this.children.size>0){var r=t.getFront();return t=t.popFront(),this.children.has(r)&&this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},t.prototype.forEachTree=function(t,e){null!==this.value?e(t,this.value):this.forEachChild(function(n,r){var i=new X(t.toString()+"/"+n);r.forEachTree(i,e)})},t.prototype.forEachChild=function(t){this.children.forEach(function(e,n){t(n,e)})},t}(),le=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({}),he=function(){function t(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Object(o.e)(!r||e,"Tagged queries must be from server.")}return t.User=new t(!0,!1,null,!1),t.Server=new t(!1,!0,null,!1),t.forServerTaggedQuery=function(e){return new t(!1,!0,e,!0)},t}(),fe=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=le.ACK_USER_WRITE,this.source=he.User}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Object(o.e)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new X(e));return new t(X.Empty,n,this.revert)}return Object(o.e)(this.path.getFront()===e,"operationForChild called for unrelated child."),new t(this.path.popFront(),this.affectedTree,this.revert)},t}(),de=function(){function t(t,e){void 0===e&&(ue||(ue=new Ht(I)),e=ue),this.value=t,this.children=e}return t.fromObject=function(e){var n=t.Empty;return S(e,function(t,e){n=n.set(new X(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:X.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null!=i?{path:new X(n).child(i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(e.isEmpty())return this;var n=e.getFront(),r=this.children.get(n);return null!==r?r.subtree(e.popFront()):t.Empty},t.prototype.set=function(e,n){if(e.isEmpty())return new t(n,this.children);var r=e.getFront(),i=(this.children.get(r)||t.Empty).set(e.popFront(),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?t.Empty:new t(null,this.children);var n=e.getFront(),r=this.children.get(n);if(r){var i=r.remove(e.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?t.Empty:new t(this.value,o)}return this},t.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},t.prototype.setTree=function(e,n){if(e.isEmpty())return n;var r,i=e.getFront(),o=(this.children.get(i)||t.Empty).setTree(e.popFront(),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(X.Empty,t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(t.child(r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,X.Empty,e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,X.Empty,e)},t.prototype.foreachOnPath_=function(e,n,r){if(e.isEmpty())return this;this.value&&r(n,this.value);var i=e.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(e.popFront(),n.child(i),r):t.Empty},t.prototype.foreach=function(t){this.foreach_(X.Empty,t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(t.child(n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t.Empty=new t(null),t}(),pe=function(){function t(t,e){this.source=t,this.path=e,this.type=le.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,X.Empty):new t(this.source,this.path.popFront())},t}(),ge=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=le.OVERWRITE}return t.prototype.operationForChild=function(e){return this.path.isEmpty()?new t(this.source,X.Empty,this.snap.getImmediateChild(e)):new t(this.source,this.path.popFront(),this.snap)},t}(),ye=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=le.MERGE}return t.prototype.operationForChild=function(e){if(this.path.isEmpty()){var n=this.children.subtree(new X(e));return n.isEmpty()?null:n.value?new ge(this.source,X.Empty,n.value):new t(this.source,X.Empty,n)}return Object(o.e)(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,this.path.popFront(),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),ve=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),me=function(){function t(t,e){this.eventCache_=t,this.serverCache_=e}return t.prototype.updateEventSnap=function(e,n,r){return new t(new ve(e,n,r),this.serverCache_)},t.prototype.updateServerSnap=function(e,n,r){return new t(this.eventCache_,new ve(e,n,r))},t.prototype.getEventCache=function(){return this.eventCache_},t.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},t.prototype.getServerCache=function(){return this.serverCache_},t.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},t.Empty=new t(new ve(jt.EMPTY_NODE,!1,!1),new ve(jt.EMPTY_NODE,!1,!1)),t}(),be=function(){function t(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}return t.valueChange=function(e){return new t(t.VALUE,e)},t.childAddedChange=function(e,n){return new t(t.CHILD_ADDED,n,e)},t.childRemovedChange=function(e,n){return new t(t.CHILD_REMOVED,n,e)},t.childChangedChange=function(e,n,r){return new t(t.CHILD_CHANGED,n,e,r)},t.childMovedChange=function(e,n){return new t(t.CHILD_MOVED,n,e)},t.CHILD_ADDED="child_added",t.CHILD_REMOVED="child_removed",t.CHILD_CHANGED="child_changed",t.CHILD_MOVED="child_moved",t.VALUE="value",t}(),we=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,s){Object(o.e)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(be.childRemovedChange(e,a)):Object(o.e)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(be.childAddedChange(e,n)):s.trackChildChange(be.childChangedChange(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Tt,function(t,r){e.hasChild(t)||n.trackChildChange(be.childRemovedChange(t,r))}),e.isLeafNode()||e.forEachChild(Tt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(be.childChangedChange(e,r,i))}else n.trackChildChange(be.childAddedChange(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?jt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),_e=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(o.e)(e===be.CHILD_ADDED||e===be.CHILD_CHANGED||e===be.CHILD_REMOVED,"Only child changes supported for tracking"),Object(o.e)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===be.CHILD_ADDED&&i===be.CHILD_REMOVED)this.changeMap.set(n,be.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===be.CHILD_REMOVED&&i===be.CHILD_ADDED)this.changeMap.delete(n);else if(e===be.CHILD_REMOVED&&i===be.CHILD_CHANGED)this.changeMap.set(n,be.childRemovedChange(n,r.oldSnap));else if(e===be.CHILD_CHANGED&&i===be.CHILD_ADDED)this.changeMap.set(n,be.childAddedChange(n,t.snapshotNode));else{if(e!==be.CHILD_CHANGED||i!==be.CHILD_CHANGED)throw Object(o.f)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,be.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Be=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),Ce=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new ve(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},t}(),Ee=function(){return function(t,e){this.viewCache=t,this.changes=e}}(),Qe=function(){function t(t){this.filter_=t}return t.prototype.assertIndexed=function(t){Object(o.e)(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Object(o.e)(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},t.prototype.applyOperation=function(e,n,r,i){var s,a,u=new _e;if(n.type===le.OVERWRITE){var c=n;c.source.fromUser?s=this.applyUserOverwrite_(e,c.path,c.snap,r,i,u):(Object(o.e)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.getServerCache().isFiltered()&&!c.path.isEmpty(),s=this.applyServerOverwrite_(e,c.path,c.snap,r,i,a,u))}else if(n.type===le.MERGE){var A=n;A.source.fromUser?s=this.applyUserMerge_(e,A.path,A.children,r,i,u):(Object(o.e)(A.source.fromServer,"Unknown source."),a=A.source.tagged||e.getServerCache().isFiltered(),s=this.applyServerMerge_(e,A.path,A.children,r,i,a,u))}else if(n.type===le.ACK_USER_WRITE){var l=n;s=l.revert?this.revertUserWrite_(e,l.path,r,i,u):this.ackUserWrite_(e,l.path,l.affectedTree,r,i,u)}else{if(n.type!==le.LISTEN_COMPLETE)throw Object(o.f)("Unknown operation type: "+n.type);s=this.listenComplete_(e,n.path,r,u)}var h=u.getChanges();return t.maybeAddValueEvent_(e,s,h),new Ee(s,h)},t.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(n.length>0||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(be.valueChange(e.getCompleteEventSnap()))}},t.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var s=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var a=void 0,u=void 0;if(e.isEmpty())if(Object(o.e)(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var c=t.getCompleteServerSnap(),A=n.calcCompleteEventChildren(c instanceof jt?c:jt.EMPTY_NODE);a=this.filter_.updateFullNode(t.getEventCache().getNode(),A,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());a=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var h=e.getFront();if(".priority"===h){Object(o.e)(1===e.getLength(),"Can't have a priority with additional path components");var f=s.getNode();u=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,f,u);a=null!=d?this.filter_.updatePriority(f,d):s.getNode()}else{var p=e.popFront(),g=void 0;if(s.isCompleteForChild(h)){u=t.getServerCache().getNode();var y=n.calcEventCacheAfterServerOverwrite(e,s.getNode(),u);g=null!=y?s.getNode().getImmediateChild(h).updateChild(p,y):s.getNode().getImmediateChild(h)}else g=n.calcCompleteChild(h,t.getServerCache());a=null!=g?this.filter_.updateChild(s.getNode(),h,g,p,r,i):s.getNode()}}return t.updateEventSnap(a,s.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},t.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var A=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),A,null)}else{var l=e.getFront();if(!u.isCompleteForPath(e)&&e.getLength()>1)return t;var h=e.popFront(),f=u.getNode().getImmediateChild(l).updateChild(h,n);a=".priority"===l?c.updatePriority(u.getNode(),f):c.updateChild(u.getNode(),l,f,h,Be,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),p=new Ce(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,p,s)},t.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new Ce(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var A=e.getFront();if(".priority"===A)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var l=e.popFront(),h=u.getNode().getImmediateChild(A),f=void 0;if(l.isEmpty())f=n;else{var d=c.getCompleteChild(A);f=null!=d?".priority"===l.getBack()&&d.getChild(l.parent()).isEmpty()?d:d.updateChild(l,n):jt.EMPTY_NODE}if(h.equals(f))s=t;else{var p=this.filter_.updateChild(u.getNode(),A,f,l,c,o);s=t.updateEventSnap(p,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},t.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},t.prototype.applyUserMerge_=function(e,n,r,i,o,s){var a=this,u=e;return r.foreach(function(r,c){var A=n.child(r);t.cacheHasChild_(e,A.getFront())&&(u=a.applyUserOverwrite_(u,A,c,i,o,s))}),r.foreach(function(r,c){var A=n.child(r);t.cacheHasChild_(e,A.getFront())||(u=a.applyUserOverwrite_(u,A,c,i,o,s))}),u},t.prototype.applyMerge_=function(t,e){return e.foreach(function(e,n){t=t.updateChild(e,n)}),t},t.prototype.applyServerMerge_=function(t,e,n,r,i,o,s){var a=this;if(t.getServerCache().getNode().isEmpty()&&!t.getServerCache().isFullyInitialized())return t;var u,c=t;u=e.isEmpty()?n:de.Empty.setTree(e,n);var A=t.getServerCache().getNode();return u.children.inorderTraversal(function(e,n){if(A.hasChild(e)){var u=t.getServerCache().getNode().getImmediateChild(e),l=a.applyMerge_(u,n);c=a.applyServerOverwrite_(c,new X(e),l,r,i,o,s)}}),u.children.inorderTraversal(function(e,n){var u=!t.getServerCache().isCompleteForChild(e)&&null==n.value;if(!A.hasChild(e)&&!u){var l=t.getServerCache().getNode().getImmediateChild(e),h=a.applyMerge_(l,n);c=a.applyServerOverwrite_(c,new X(e),h,r,i,o,s)}}),c},t.prototype.ackUserWrite_=function(t,e,n,r,i,o){if(null!=r.shadowingWrite(e))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=n.value){if(e.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(e))return this.applyServerOverwrite_(t,e,a.getNode().getChild(e),r,i,s,o);if(e.isEmpty()){var u=de.Empty;return a.getNode().forEachChild(Qt,function(t,e){u=u.set(new X(t),e)}),this.applyServerMerge_(t,e,u,r,i,s,o)}return t}var c=de.Empty;return n.foreach(function(t,n){var r=e.child(t);a.isCompleteForPath(r)&&(c=c.set(t,a.getNode().getChild(r)))}),this.applyServerMerge_(t,e,c,r,i,s,o)},t.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,Be,r)},t.prototype.revertUserWrite_=function(t,e,n,r,i){var s;if(null!=n.shadowingWrite(e))return t;var a=new Ce(n,t,r),u=t.getEventCache().getNode(),c=void 0;if(e.isEmpty()||".priority"===e.getFront()){var A=void 0;if(t.getServerCache().isFullyInitialized())A=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var l=t.getServerCache().getNode();Object(o.e)(l instanceof jt,"serverChildren would be complete if leaf node"),A=n.calcCompleteEventChildren(l)}c=this.filter_.updateFullNode(u,A=A,i)}else{var h=e.getFront(),f=n.calcCompleteChild(h,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(h)&&(f=u.getImmediateChild(h)),(c=null!=f?this.filter_.updateChild(u,h,f,e.popFront(),a,i):t.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(u,h,jt.EMPTY_NODE,e.popFront(),a,i):u).isEmpty()&&t.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(c=this.filter_.updateFullNode(c,s,i))}return s=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(X.Empty),t.updateEventSnap(c,s,this.filter_.filtersNodes())},t}(),Ue=function(){function t(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}return t.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===be.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(be.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,be.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,be.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,be.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,be.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,be.VALUE,t,n,e),i},t.prototype.generateEventsForType_=function(t,e,n,r,i){var o=this,s=n.filter(function(t){return t.type===e});s.sort(this.compareChanges_.bind(this)),s.forEach(function(e){var n=o.materializeSingleChange_(e,i);r.forEach(function(r){r.respondsTo(e.type)&&t.push(r.createEvent(n,o.query_))})})},t.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},t.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw Object(o.f)("Should only compare child_ events.");var n=new Bt(t.childName,t.snapshotNode),r=new Bt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},t}(),Oe=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new we(n.getIndex()),i=n.getNodeFilter();this.processor_=new Qe(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(jt.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(jt.EMPTY_NODE,s.getNode(),null),c=new ve(a,o.isFullyInitialized(),r.filtersNodes()),A=new ve(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new me(A,c),this.eventGenerator_=new Ue(this.query_)}return t.prototype.getQuery=function(){return this.query_},t.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},t.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},t.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},t.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},t.prototype.removeEventRegistration=function(t,e){var n=[];if(e){Object(o.e)(null==t,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(t){var i=t.createCancelEvent(e=e,r);i&&n.push(i)})}if(t){for(var i=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(s+1));break}}else i.push(a)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return n},t.prototype.applyOperation=function(t,e,n){t.type===le.MERGE&&null!==t.source.queryId&&(Object(o.e)(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Object(o.e)(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),Object(o.e)(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},t.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Tt,function(t,e){n.push(be.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(be.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},t.prototype.generateEventsForChanges_=function(t,e,n){return this.eventGenerator_.generateEventsForChanges(t,e,n?[n]:this.eventRegistrations_)},t}(),Ie=function(){function t(){this.views=new Map}return Object.defineProperty(t,"__referenceConstructor",{get:function(){return Object(o.e)(ce,"Reference.ts has not been loaded"),ce},set:function(t){Object(o.e)(!ce,"__referenceConstructor has already been defined"),ce=t},enumerable:!1,configurable:!0}),t.prototype.isEmpty=function(){return 0===this.views.size},t.prototype.applyOperation=function(t,e,n){var r,s,a=t.source.queryId;if(null!==a){var u=this.views.get(a);return Object(o.e)(null!=u,"SyncTree gave us an op for an invalid query."),u.applyOperation(t,e,n)}var c=[];try{for(var A=Object(i.h)(this.views.values()),l=A.next();!l.done;l=A.next())c=c.concat((u=l.value).applyOperation(t,e,n))}catch(h){r={error:h}}finally{try{l&&!l.done&&(s=A.return)&&s.call(A)}finally{if(r)throw r.error}}return c},t.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;a?u=!0:r instanceof jt?(a=n.calcCompleteEventChildren(r),u=!1):(a=jt.EMPTY_NODE,u=!1);var c=new me(new ve(a,u,!1),new ve(r,i,!1));s=new Oe(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},t.prototype.removeEventRegistration=function(e,n,r){var o,s,a=e.queryIdentifier(),u=[],c=[],A=this.hasCompleteView();if("default"===a)try{for(var l=Object(i.h)(this.views.entries()),h=l.next();!h.done;h=l.next()){var f,d=Object(i.e)(h.value,2),p=d[0];c=c.concat((f=d[1]).removeEventRegistration(n,r)),f.isEmpty()&&(this.views.delete(p),f.getQuery().getQueryParams().loadsAllData()||u.push(f.getQuery()))}}catch(g){o={error:g}}finally{try{h&&!h.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}else(f=this.views.get(a))&&(c=c.concat(f.removeEventRegistration(n,r)),f.isEmpty()&&(this.views.delete(a),f.getQuery().getQueryParams().loadsAllData()||u.push(f.getQuery())));return A&&!this.hasCompleteView()&&u.push(new t.__referenceConstructor(e.repo,e.path)),{removed:u,events:c}},t.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=Object(i.h)(this.views.values()),o=r.next();!o.done;o=r.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var o=Object(i.h)(this.views.values()),s=o.next();!s.done;s=o.next())r=r||s.value.getCompleteServerCache(t)}catch(a){e={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}return r},t.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},t.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},t.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},t.prototype.getCompleteView=function(){var t,e;try{for(var n=Object(i.h)(this.views.values()),r=n.next();!r.done;r=n.next()){var o=r.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){t={error:s}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},t}(),Te=function(){function t(t){this.writeTree_=t}return t.prototype.addWrite=function(e,n){if(e.isEmpty())return new t(new de(n));var r=this.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=X.relativePath(i,e);return o=o.updateChild(s,n),new t(this.writeTree_.set(i,o))}var a=new de(n);return new t(this.writeTree_.setTree(e,a))},t.prototype.addWrites=function(t,e){var n=this;return S(e,function(e,r){n=n.addWrite(t.child(e),r)}),n},t.prototype.removeWrite=function(e){return e.isEmpty()?t.Empty:new t(this.writeTree_.setTree(e,de.Empty))},t.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},t.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(X.relativePath(e.path,t)):null},t.prototype.getCompleteChildren=function(){var t=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(Tt,function(e,n){t.push(new Bt(e,n))}):this.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new Bt(e,n.value))}),t},t.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var n=this.getCompleteNode(e);return new t(null!=n?new de(n):this.writeTree_.subtree(e))},t.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},t.prototype.apply=function(t){return Fe(X.Empty,this.writeTree_,t)},t.Empty=new t(new de(null)),t}();function Fe(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,i){".priority"===e?(Object(o.e)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Fe(t.child(e),i,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(t.child(".priority"),r)),n}var Ne=function(){function t(){this.visibleWrites_=Te.Empty,this.allWrites_=[],this.lastWriteId_=-1}return t.prototype.childWrites=function(t){return new Se(t,this)},t.prototype.addOverwrite=function(t,e,n,r){Object(o.e)(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},t.prototype.addMerge=function(t,e,n){Object(o.e)(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},t.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},t.prototype.removeWrite=function(t){var e=this,n=this.allWrites_.findIndex(function(e){return e.writeId===t});Object(o.e)(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var i=r.visible,s=!1,a=this.allWrites_.length-1;i&&a>=0;){var u=this.allWrites_[a];u.visible&&(a>=n&&this.recordContainsPath_(u,r.path)?i=!1:r.path.contains(u.path)&&(s=!0)),a--}return!!i&&(s?(this.resetTree_(),!0):(r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):S(r.children,function(t){e.visibleWrites_=e.visibleWrites_.removeWrite(r.path.child(t))}),!0))},t.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcCompleteEventCache=function(e,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(e);return!i&&o.isEmpty()?n:i||null!=n||o.hasCompleteWrite(X.Empty)?t.layerTree_(this.allWrites_,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e).apply(n||jt.EMPTY_NODE):null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);return a.isEmpty()?n:null!=n||a.hasCompleteWrite(X.Empty)?a.apply(n||jt.EMPTY_NODE):null},t.prototype.calcCompleteEventChildren=function(t,e){var n=jt.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Tt,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Tt,function(t,e){var r=i.childCompoundWrite(new X(t)).apply(e);n=n.updateImmediateChild(t,r)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Object(o.e)(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var s=this.visibleWrites_.childCompoundWrite(i);return s.isEmpty()?r.getChild(e):s.apply(r.getChild(e))},t.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},t.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},t.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(X.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],A=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),h=l.getNext();h&&c.length<r;)0!==A(h,n)&&c.push(h),h=l.getNext();return c},t.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},t.prototype.resetTree_=function(){this.visibleWrites_=t.layerTree_(this.allWrites_,t.DefaultFilter_,X.Empty),this.lastWriteId_=this.allWrites_.length>0?this.allWrites_[this.allWrites_.length-1].writeId:-1},t.DefaultFilter_=function(t){return t.visible},t.layerTree_=function(t,e,n){for(var r=Te.Empty,i=0;i<t.length;++i){var s=t[i];if(e(s)){var a=s.path,u=void 0;if(s.snap)n.contains(a)?(u=X.relativePath(n,a),r=r.addWrite(u,s.snap)):a.contains(n)&&(u=X.relativePath(a,n),r=r.addWrite(X.Empty,s.snap.getChild(u)));else{if(!s.children)throw Object(o.f)("WriteRecord should have .snap or .children");if(n.contains(a))u=X.relativePath(n,a),r=r.addWrites(u,s.children);else if(a.contains(n))if((u=X.relativePath(a,n)).isEmpty())r=r.addWrites(X.Empty,s.children);else{var c=Object(o.D)(s.children,u.getFront());if(c){var A=c.getChild(u.popFront());r=r.addWrite(X.Empty,A)}}}}}return r},t}(),Se=function(){function t(t,e){this.treePath_=t,this.writeTree_=e}return t.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},t.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},t.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},t.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},t.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},t.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},t.prototype.child=function(e){return new t(this.treePath_.child(e),this.writeTree_)},t}(),He=function(){function t(t){this.listenProvider_=t,this.syncPointTree_=de.Empty,this.pendingWriteTree_=new Ne,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return t.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ge(he.User,t,e)):[]},t.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=de.fromObject(e);return this.applyOperationToSyncPoints_(new ye(he.User,t,r))},t.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=de.Empty;return null!=n.snap?r=r.set(X.Empty,!0):S(n.children,function(t,e){r=r.set(new X(t),e)}),this.applyOperationToSyncPoints_(new fe(n.path,r,e))}return[]},t.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ge(he.Server,t,e))},t.prototype.applyServerMerge=function(t,e){var n=de.fromObject(e);return this.applyOperationToSyncPoints_(new ye(he.Server,t,n))},t.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new pe(he.Server,t))},t.prototype.applyTaggedQueryOverwrite=function(e,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=X.relativePath(s,e),c=new ge(he.forServerTaggedQuery(a),u,n);return this.applyTaggedOperation_(s,c)}return[]},t.prototype.applyTaggedQueryMerge=function(e,n,r){var i=this.queryKeyForTag_(r);if(i){var o=t.parseQueryKey_(i),s=o.path,a=o.queryId,u=X.relativePath(s,e),c=de.fromObject(n),A=new ye(he.forServerTaggedQuery(a),u,c);return this.applyTaggedOperation_(s,A)}return[]},t.prototype.applyTaggedListenComplete=function(e,n){var r=this.queryKeyForTag_(n);if(r){var i=t.parseQueryKey_(r),o=i.path,s=i.queryId,a=X.relativePath(o,e),u=new pe(he.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,u)}return[]},t.prototype.addEventRegistration=function(e,n){var r=e.path,i=null,s=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=X.relativePath(t,r);i=i||e.getCompleteServerCache(n),s=s||e.hasCompleteView()});var a,u=this.syncPointTree_.get(r);u?(s=s||u.hasCompleteView(),i=i||u.getCompleteServerCache(X.Empty)):(u=new Ie,this.syncPointTree_=this.syncPointTree_.set(r,u)),null!=i?a=!0:(a=!1,i=jt.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(X.Empty);n&&(i=i.updateImmediateChild(t,n))}));var c=u.viewExistsForQuery(e);if(!c&&!e.getQueryParams().loadsAllData()){var A=t.makeQueryKey_(e);Object(o.e)(!this.queryToTagMap.has(A),"View does not exist, but we have a tag");var l=t.getNextQueryTag_();this.queryToTagMap.set(A,l),this.tagToQueryMap.set(l,A)}var h=this.pendingWriteTree_.childWrites(r),f=u.addEventRegistration(e,n,h,i,a);if(!c&&!s){var d=u.viewForQuery(e);f=f.concat(this.setupListener_(e,d))}return f},t.prototype.removeEventRegistration=function(e,n,r){var i=this,o=e.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===e.queryIdentifier()||s.viewExistsForQuery(e))){var u=s.removeEventRegistration(e,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var c=u.removed;a=u.events;var A=-1!==c.findIndex(function(t){return t.getQueryParams().loadsAllData()}),l=this.syncPointTree_.findOnPath(o,function(t,e){return e.hasCompleteView()});if(A&&!l){var h=this.syncPointTree_.subtree(o);if(!h.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(h),d=0;d<f.length;++d){var p=f[d],g=p.getQuery(),y=this.createListenerForView_(p);this.listenProvider_.startListening(t.queryForListening_(g),this.tagForQuery_(g),y.hashFn,y.onComplete)}}!l&&c.length>0&&!r&&(A?this.listenProvider_.stopListening(t.queryForListening_(e),null):c.forEach(function(e){var n=i.queryToTagMap.get(t.makeQueryKey_(e));i.listenProvider_.stopListening(t.queryForListening_(e),n)})),this.removeTags_(c)}return a},t.prototype.calcCompleteEventCache=function(t,e){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(t,function(e,n){var r=X.relativePath(e,t),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(t,r,e,!0)},t.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),S(n,function(t,e){r=r.concat(e)}),r})},t.prototype.removeTags_=function(e){for(var n=0;n<e.length;++n){var r=e[n];if(!r.getQueryParams().loadsAllData()){var i=t.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},t.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},t.prototype.setupListener_=function(e,n){var r=e.path,i=this.tagForQuery_(e),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(t.queryForListening_(e),i,s.hashFn,s.onComplete),u=this.syncPointTree_.subtree(r);if(i)Object(o.e)(!u.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),S(n,function(t,e){r=r.concat(e)}),r}),A=0;A<c.length;++A){var l=c[A];this.listenProvider_.stopListening(t.queryForListening_(l),this.tagForQuery_(l))}return a},t.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||jt.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,n);return e.removeEventRegistration(n,null,i)}}},t.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},t.parseQueryKey_=function(t){var e=t.indexOf("$");return Object(o.e)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new X(t.substr(0,e))}},t.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},t.prototype.tagForQuery_=function(e){var n=t.makeQueryKey_(e);return this.queryToTagMap.get(n)},t.getNextQueryTag_=function(){return t.nextQueryTag_++},t.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Object(o.e)(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},t.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(X.Empty))},t.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(X.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(X.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,A=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,A))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},t.prototype.applyOperationDescendantsHelper_=function(t,e,n,r){var i=this,o=e.get(X.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(X.Empty));var s=[];return e.children.inorderTraversal(function(e,o){var a=n?n.getImmediateChild(e):null,u=r.child(e),c=t.operationForChild(e);c&&(s=s.concat(i.applyOperationDescendantsHelper_(c,o,a,u)))}),o&&(s=s.concat(o.applyOperation(t,r,n))),s},t.nextQueryTag_=1,t}(),Re=function(){function t(){this.rootNode_=jt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}(),xe=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(o.i)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(o.k)(this.counters_)},t}(),De=function(){function t(){}return t.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new xe),this.collections_[e]},t.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},t.collections_={},t.reporters_={},t}(),Pe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(i.a)({},t);return this.last_&&S(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),ke=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Pe(t);var n=1e4+2e4*Math.random();W(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.includeStat=function(t){this.statsToReport_[t]=!0},t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;S(e,function(e,i){i>0&&Object(o.i)(t.statsToReport_,e)&&(n[e]=i,r=!0)}),r&&this.server_.reportStats(n),W(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Le=function(){function t(){this.eventLists_=[],this.recursionDepth_=0}return t.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Me(i)),e.add(r)}e&&this.eventLists_.push(e)},t.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},t.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},t.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},t}(),Me=function(){function t(t){this.path_=t,this.events_=[]}return t.prototype.add=function(t){this.events_.push(t)},t.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();y&&b("event: "+e.toString()),q(n)}}},t.prototype.getPath=function(){return this.path_},t}(),je=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(o.e)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(i.f)(this.listeners_[t]),o=0;o<r.length;o++)r[o].callback.apply(r[o].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(o.e)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),Ke=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(je),Ve=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(o.u)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(i.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(o.e)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(je),ze=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&q(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),Ge="start",qe="close",We=function(){function t(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=w(t),this.stats_=De.getCollection(e),this.urlFn=function(t){return e.connectionURL(Z,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new ze(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(o.w)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new Xe(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,5),o=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===Ge)n.id=s,n.password=a;else{if(o!==qe)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(i.e)(t,2),o=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Y)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(o.w)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(o.h)(e),r=N(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(o.w)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(o.G)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Xe=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(o.w)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=d(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){b("frame writing exception"),u.stack&&b(u.stack),b(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||b("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(o.w)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){b("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),Je="";function Ye(t){Je=t}var $e=null;"undefined"!=typeof MozWebSocket?$e=MozWebSocket:"undefined"!=typeof WebSocket&&($e=WebSocket);var Ze=function(){function t(e,n,r,i,o){this.connId=e,this.applicationId=r,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=w(this.connId),this.stats_=De.getCollection(n),this.connURL=t.connectionURL_(n,i,o),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n){var r={v:"5"};return!Object(o.w)()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Y)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL($,r)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,l.set("previous_websocket_failure",!0);try{if(Object(o.w)()){var r={headers:{"User-Agent":"Firebase/5/"+Je+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}},i=process.env,s=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new $e(this.connURL,[],r)}else this.mySock=new $e(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==$e&&!t.forceDisallow_},t.previouslyFailed=function(){return l.isInMemoryStorage||!0===l.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){l.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(o.A)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(o.e)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(o.G)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=N(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),tn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[We,Ze]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,o=Ze&&Ze.isAvailable(),s=o&&!Ze.previouslyFailed();if(e.webSocketOnly&&(o||C("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Ze];else{var a=this.transports_=[];try{for(var u=Object(i.h)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var A=c.value;A&&A.isAvailable()&&a.push(A)}}catch(l){n={error:l}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),en=function(){function t(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=w("c:"+this.id+":"),this.transportManager_=new tn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=W(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=T("t",t),n=T("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=T("t",t),n=T("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=T("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?_("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):_("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&C("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),W(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):W(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(l.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),nn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),rn=1e3,on=function(t){function e(n,r,i,s,a,u,c){var A=t.call(this)||this;if(A.repoInfo_=n,A.applicationId_=r,A.onDataUpdate_=i,A.onConnectStatus_=s,A.onServerInfoUpdate_=a,A.authTokenProvider_=u,A.authOverride_=c,A.id=e.nextPersistentConnectionId_++,A.log_=w("p:"+A.id+":"),A.interruptReasons_={},A.listens=new Map,A.outstandingPuts_=[],A.outstandingGets_=[],A.outstandingPutCount_=0,A.outstandingGetCount_=0,A.onDisconnectRequestQueue_=[],A.connected_=!1,A.reconnectDelay_=rn,A.maxReconnectDelay_=3e5,A.securityDebugCallback_=null,A.lastSessionId=null,A.establishConnectionTimer_=null,A.visible_=!1,A.requestCBHash_={},A.requestNumber_=0,A.realtime_=null,A.authToken_=null,A.forceTokenRefresh_=!1,A.invalidAuthTokenCount_=0,A.firstConnection_=!0,A.lastConnectionAttemptTime_=null,A.lastConnectionEstablishedTime_=null,c&&!Object(o.w)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return A.scheduleConnect_(0),Ke.getInstance().on("visible",A.onVisible_,A),-1===n.host.indexOf("fblocal")&&Ve.getInstance().on("online",A.onOnline_,A),A}return Object(i.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Object(o.G)(i)),Object(o.e)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new o.a,r={p:t.path.toString(),q:t.queryObject()},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&i===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),s=t.path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),Object(o.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Object(o.e)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r.queryObject(),s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(o.i)(t,"w")){var n=Object(o.D)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();C("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(o.o)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(o.z)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Object(o.e)(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(o.G)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):_("Unrecognized action received from server: "+Object(o.G)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(o.e)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=rn),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){var t=this;if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this,u=this.lastSessionId,c=!1,A=null,l=function(){A?A.close():(c=!0,i())};this.realtime_={close:l,sendRequest:function(t){Object(o.e)(A,"sendRequest call when we're not connected not allowed."),A.sendRequest(t)}};var h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(h).then(function(t){c?b("getToken() completed but was canceled"):(b("getToken() completed. Creating connection."),a.authToken_=t&&t.accessToken,A=new en(s,a.repoInfo_,a.applicationId_,n,r,i,function(t){C(t+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},u))}).then(null,function(e){a.log_("Failed to get token: "+e),c||(t.repoInfo_.nodeAdmin&&C(e),l())})}},e.prototype.interrupt=function(t){b("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){b("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(o.s)(this.interruptReasons_)&&(this.reconnectDelay_=rn,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return F(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new X(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){b("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var o=Object(i.h)(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}for(var A=0;A<this.outstandingPuts_.length;A++)this.outstandingPuts_[A]&&this.sendPut_(A);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}for(A=0;A<this.outstandingGets_.length;A++)this.outstandingGets_[A]&&this.sendGet_(A)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(o.w)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Je.replace(/\./g,"-")]=1,Object(o.u)()?t["framework.cordova"]=1:Object(o.x)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Ve.getInstance().currentlyOnline();return Object(o.s)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(nn),sn=function(t){function e(e,n,r){var i=t.call(this)||this;return i.repoInfo_=e,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=w("p:rest:"),i.listens_={},i}return Object(i.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(o.e)(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},e.prototype.listen=function(t,n,r,i){var s=this,a=t.path.toString();this.log_("Listen called for "+a+" "+t.queryIdentifier());var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var A=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",A,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(o.D)(s.listens_,u)===c&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=t.getQueryParams().toRestQueryStringParameters(),r=t.path.toString(),i=new o.a;return this.restRequest_(r+".json",n,function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;void 0===e&&(e={}),e.format="export",this.authTokenProvider_.getToken(!1).then(function(i){var s=i&&i.accessToken;s&&(e.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(o.C)(e);r.log_("Sending REST request for "+a);var u=new XMLHttpRequest;u.onreadystatechange=function(){if(n&&4===u.readyState){r.log_("REST Response for "+a+" received. status:",u.status,"response:",u.responseText);var t=null;if(u.status>=200&&u.status<300){try{t=Object(o.A)(u.responseText)}catch(e){C("Failed to parse JSON response for "+a+": "+u.responseText)}n(null,t)}else 401!==u.status&&404!==u.status&&C("Got unsuccessful REST response for "+a+" Status: "+u.status),n(u.status);n=null}},u.open("GET",a,!0),u.send()})},e}(nn),an="repo_interrupt",un=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Le,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Ae,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.start=function(){var t=this;if(this.stats_=De.getCollection(this.repoInfo_),this.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)this.server_=new sn(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var e=this.app.options.databaseAuthVariableOverride;if(null!=e){if("object"!=typeof e)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(o.G)(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}this.persistentConnection_=new on(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,e),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),this.statsReporter_=De.getOrCreateReporter(this.repoInfo_,function(){return new ke(t.stats_,t.server_)}),this.transactionsInit_(),this.infoData_=new Re,this.infoSyncTree_=new He({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e.path);return s.isEmpty()||(o=t.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new He({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);t.eventQueue_.raiseEventsForChangedPath(e.path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})},t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t.prototype.name=function(){return this.repoInfo_.namespace},t.prototype.serverTime=function(){var t=this.infoData_.getNode(new X(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},t.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},t.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new X(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var s=[];if(r)if(n){var a=Object(o.B)(e,function(t){return Vt(t)});s=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var u=Vt(e);s=this.serverSyncTree_.applyTaggedQueryOverwrite(i,u,r)}else if(n){var c=Object(o.B)(e,function(t){return Vt(t)});s=this.serverSyncTree_.applyServerMerge(i,c)}else{var A=Vt(e);s=this.serverSyncTree_.applyServerOverwrite(i,A)}var l=i;s.length>0&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,s)},t.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},t.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},t.prototype.onServerInfoUpdate_=function(t){var e=this;S(t,function(t,n){e.updateInfo_(t,n)})},t.prototype.updateInfo_=function(t,e){var n=new X("/.info/"+t),r=Vt(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},t.prototype.getNextWriteId_=function(){return this.nextWriteId_++},t.prototype.getValue=function(t){var e=this;return this.server_.get(t).then(function(n){var r=Vt(n),i=e.serverSyncTree_.applyServerOverwrite(t.path,r);return e.eventQueue_.raiseEventsAtPath(t.path,i),Promise.resolve(new Wt(r,t.getRef(),t.getQueryParams().getIndex()))},function(n){e.log_("get for query "+Object(o.G)(t)+" falling back to cache after error: "+n);var r=e.serverSyncTree_.calcCompleteEventCache(t.path);return r.isEmpty()?Promise.reject(new Error(n)):Promise.resolve(new Wt(r,t.getRef(),t.getQueryParams().getIndex()))})},t.prototype.setWithPriority=function(t,e,n,r){var i=this;this.log_("set",{path:t.toString(),value:e,priority:n});var o=this.generateServerValues(),s=Vt(e,n),a=this.serverSyncTree_.calcCompleteEventCache(t),u=se(s,a,o),c=this.getNextWriteId_(),A=this.serverSyncTree_.applyUserOverwrite(t,u,c,!0);this.eventQueue_.queueEvents(A),this.server_.put(t.toString(),s.val(!0),function(e,n){var o="ok"===e;o||C("set at "+t+" failed: "+e);var s=i.serverSyncTree_.ackUserWrite(c,!o);i.eventQueue_.raiseEventsForChangedPath(t,s),i.callOnCompleteCallback(r,e,n)});var l=this.abortTransactions_(t);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},t.prototype.update=function(t,e,n){var r=this;this.log_("update",{path:t.toString(),value:e});var i=!0,o=this.generateServerValues(),s={};if(S(e,function(e,n){i=!1,s[e]=oe(t.child(e),Vt(n),r.serverSyncTree_,o)}),i)b("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),u=this.serverSyncTree_.applyUserMerge(t,s,a);this.eventQueue_.queueEvents(u),this.server_.merge(t.toString(),e,function(e,i){var o="ok"===e;o||C("update at "+t+" failed: "+e);var s=r.serverSyncTree_.ackUserWrite(a,!o),u=s.length>0?r.rerunTransactions_(t):t;r.eventQueue_.raiseEventsForChangedPath(u,s),r.callOnCompleteCallback(n,e,i)}),S(e,function(e){var n=r.abortTransactions_(t.child(e));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(t,[])}},t.prototype.runOnDisconnectEvents_=function(){var t=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),n=new Ae;this.onDisconnect_.forEachTree(X.Empty,function(r,i){var o=oe(r,i,t.serverSyncTree_,e);n.remember(r,o)});var r=[];n.forEachTree(X.Empty,function(e,n){r=r.concat(t.serverSyncTree_.applyServerOverwrite(e,n));var i=t.abortTransactions_(e);t.rerunTransactions_(i)}),this.onDisconnect_=new Ae,this.eventQueue_.raiseEventsForChangedPath(X.Empty,r)},t.prototype.onDisconnectCancel=function(t,e){var n=this;this.server_.onDisconnectCancel(t.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(t),n.callOnCompleteCallback(e,r,i)})},t.prototype.onDisconnectSet=function(t,e,n){var r=this,i=Vt(e);this.server_.onDisconnectPut(t.toString(),i.val(!0),function(e,o){"ok"===e&&r.onDisconnect_.remember(t,i),r.callOnCompleteCallback(n,e,o)})},t.prototype.onDisconnectSetWithPriority=function(t,e,n,r){var i=this,o=Vt(e,n);this.server_.onDisconnectPut(t.toString(),o.val(!0),function(e,n){"ok"===e&&i.onDisconnect_.remember(t,o),i.callOnCompleteCallback(r,e,n)})},t.prototype.onDisconnectUpdate=function(t,e,n){var r=this;if(Object(o.s)(e))return b("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(t.toString(),e,function(i,o){"ok"===i&&S(e,function(e,n){var i=Vt(n);r.onDisconnect_.remember(t.child(e),i)}),r.callOnCompleteCallback(n,i,o)})},t.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},t.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(an)},t.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(an)},t.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;t?(this.statsListener_||(this.statsListener_=new Pe(this.stats_)),e=this.statsListener_.get()):e=this.stats_.get();var n=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);S(e,function(t,e){for(var r=t,i=t.length;i<n+2;i++)r+=" ";console.log(r+e)})}},t.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},t.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),b.apply(void 0,Object(i.f)([n],t))},t.prototype.callOnCompleteCallback=function(t,e,n){t&&q(function(){if("ok"===e)t(null);else{var r=(e||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,t(o)}})},Object.defineProperty(t.prototype,"database",{get:function(){return this.__database||(this.__database=new bn(this))},enumerable:!1,configurable:!0}),t}(),cn=function(){function t(e){this.indexedFilter_=new we(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new Bt(e,n))||(n=jt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=jt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(jt.EMPTY_NODE);var i=this;return e.forEachChild(Tt,function(t,e){i.matches(new Bt(t,e))||(r=r.updateImmediateChild(t,jt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),An=function(){function t(t){this.rangedFilter_=new cn(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new Bt(e,n))||(n=jt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=jt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(jt.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var A=this.index_.getCompare();c=function(t,e){return A(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();)s=i.getNext(),!l&&c(a,s)<=0&&(l=!0),l&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,jt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(o.e)(u.numChildren()===this.limit_,"");var c=new Bt(e,n),A=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),l=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var h=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,A,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var d=null==f?1:s(f,c);if(l&&!n.isEmpty()&&d>=0)return null!=i&&i.trackChildChange(be.childChangedChange(e,n,h)),u.updateImmediateChild(e,n);null!=i&&i.trackChildChange(be.childRemovedChange(e,h));var p=u.updateImmediateChild(e,jt.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(be.childAddedChange(f.name,f.node)),p.updateImmediateChild(f.name,f.node)):p}return n.isEmpty()?t:l&&s(A,c)>=0?(null!=i&&(i.trackChildChange(be.childRemovedChange(A.name,A.node)),i.trackChildChange(be.childAddedChange(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(A.name,jt.EMPTY_NODE)):t},t}(),ln=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Tt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},t.prototype.getIndexStartValue=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(o.e)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Q},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(o.e)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:U},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(o.e)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.copy_=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},t.prototype.limitToFirst=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},t.prototype.limitToLast=function(e){var n=this.copy_();return n.limitSet_=!0,n.limit_=e,n.viewFrom_=t.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},t.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},t.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},t.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},t.prototype.getQueryObject=function(){var e=t.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[e.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=r}return this.index_!==Tt&&(n[e.INDEX]=this.index_.toString()),n},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Tt},t.prototype.getNodeFilter=function(){return this.loadsAllData()?new we(this.getIndex()):this.hasLimit()?new An(this):new cn(this)},t.prototype.toRestQueryStringParameters=function(){var e,n=t.REST_QUERY_CONSTANTS_,r={};return this.isDefault()||(this.index_===Tt?e=n.PRIORITY_INDEX:this.index_===Gt?e=n.VALUE_INDEX:this.index_===Qt?e=n.KEY_INDEX:(Object(o.e)(this.index_ instanceof qt,"Unrecognized index type!"),e=this.index_.toString()),r[n.ORDER_BY]=Object(o.G)(e),this.startSet_&&(r[n.START_AT]=Object(o.G)(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+Object(o.G)(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=Object(o.G)(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+Object(o.G)(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_)),r},t.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},t.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},t.DEFAULT=new t,t}(),hn=function(t){function e(e,n){if(!(e instanceof un))throw new Error("new Reference() no longer supported - use app.database().");return t.call(this,e,n,ln.DEFAULT,!1)||this}return Object(i.c)(e,t),e.prototype.getKey=function(){return Object(o.H)("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},e.prototype.child=function(t){return Object(o.H)("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof X||(null===this.path.getFront()?gt("Reference.child",1,t,!1):pt("Reference.child",1,t,!1)),new e(this.repo,this.path.child(t))},e.prototype.getParent=function(){Object(o.H)("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new e(this.repo,t)},e.prototype.getRoot=function(){Object(o.H)("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},e.prototype.databaseProp=function(){return this.repo.database},e.prototype.set=function(t,e){Object(o.H)("Reference.set",1,2,arguments.length),yt("Reference.set",this.path),ct("Reference.set",1,t,this.path,!1),Object(o.I)("Reference.set",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},e.prototype.update=function(t,e){if(Object(o.H)("Reference.update",1,2,arguments.length),yt("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,C("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}lt("Reference.update",1,t,this.path,!1),Object(o.I)("Reference.update",2,e,!0);var i=new o.a;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},e.prototype.setWithPriority=function(t,e,n){if(Object(o.H)("Reference.setWithPriority",2,3,arguments.length),yt("Reference.setWithPriority",this.path),ct("Reference.setWithPriority",1,t,this.path,!1),ht("Reference.setWithPriority",2,e,!1),Object(o.I)("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new o.a;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},e.prototype.remove=function(t){return Object(o.H)("Reference.remove",0,1,arguments.length),yt("Reference.remove",this.path),Object(o.I)("Reference.remove",1,t,!0),this.set(null,t)},e.prototype.transaction=function(t,e,n){if(Object(o.H)("Reference.transaction",1,3,arguments.length),yt("Reference.transaction",this.path),Object(o.I)("Reference.transaction",1,t,!1),Object(o.I)("Reference.transaction",2,e,!0),mt("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new o.a;"function"==typeof e&&r.promise.catch(function(){});var i=function(t,n,i){t?r.reject(t):r.resolve(new wt(n,i)),"function"==typeof e&&e(t,n,i)};return this.repo.startTransaction(this.path,t,i,n),r.promise},e.prototype.setPriority=function(t,e){Object(o.H)("Reference.setPriority",1,2,arguments.length),yt("Reference.setPriority",this.path),ht("Reference.setPriority",1,t,!1),Object(o.I)("Reference.setPriority",2,e,!0);var n=new o.a;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},e.prototype.push=function(t,e){Object(o.H)("Reference.push",0,2,arguments.length),yt("Reference.push",this.path),ct("Reference.push",1,t,this.path,!0),Object(o.I)("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=_t(r),s=this.child(i),a=this.child(i);return n=null!=t?s.set(t,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),s},e.prototype.onDisconnect=function(){return yt("Reference.onDisconnect",this.path),new bt(this.repo,this.path)},Object.defineProperty(e.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Zt);Zt.__referenceConstructor=hn,Ie.__referenceConstructor=hn;var fn=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),dn=function(){function t(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new fn),this.name_=t,this.parent_=e,this.node_=n}return t.prototype.subTree=function(e){for(var n=e instanceof X?e:new X(e),r=this,i=n.getFront();null!==i;)r=new t(i,r,Object(o.D)(r.node_.children,i)||new fn),i=(n=n.popFront()).getFront();return r},t.prototype.getValue=function(){return this.node_.value},t.prototype.setValue=function(t){Object(o.e)(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},t.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},t.prototype.hasChildren=function(){return this.node_.childCount>0},t.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},t.prototype.forEachChild=function(e){var n=this;S(this.node_.children,function(r,i){e(new t(r,n,i))})},t.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},t.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},t.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},t.prototype.path=function(){return new X(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},t.prototype.name=function(){return this.name_},t.prototype.parent=function(){return this.parent_},t.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},t.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Object(o.i)(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},t}(),pn=function(t){return t[t.RUN=0]="RUN",t[t.SENT=1]="SENT",t[t.COMPLETED=2]="COMPLETED",t[t.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",t[t.NEEDS_ABORT=4]="NEEDS_ABORT",t}({});un.MAX_TRANSACTION_RETRIES_=25,un.prototype.transactionsInit_=function(){this.transactionQueueTree_=new dn},un.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);var i=function(){},s=new hn(this,t);s.on("value",i);var a={path:t,update:e,onComplete:n,status:null,order:d(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=this.getLatestState_(t);a.currentInputSnapshot=u;var c=a.update(u.val());if(void 0===c){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var A=new Wt(a.currentInputSnapshot,new hn(this,a.path),Tt);a.onComplete(null,!1,A)}}else{At("transaction failed: Data returned ",c,a.path),a.status=pn.RUN;var l=this.transactionQueueTree_.subTree(t),h=l.getValue()||[];h.push(a),l.setValue(h);var f=void 0;"object"==typeof c&&null!==c&&Object(o.i)(c,".priority")?(f=Object(o.D)(c,".priority"),Object(o.e)(ut(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):f=(this.serverSyncTree_.calcCompleteEventCache(t)||jt.EMPTY_NODE).getPriority().val(),f=f;var p=this.generateServerValues(),g=Vt(c,f),y=se(g,u,p);a.currentOutputSnapshotRaw=g,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_();var v=this.serverSyncTree_.applyUserOverwrite(t,y,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,v),this.sendReadyTransactions_()}},un.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||jt.EMPTY_NODE},un.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);Object(o.e)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return t.status===pn.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},un.prototype.sendTransactionQueue_=function(t,e){for(var n=this,r=e.map(function(t){return t.currentWriteId}),i=this.getLatestState_(t,r),s=i,a=i.hash(),u=0;u<e.length;u++){var c=e[u];Object(o.e)(c.status===pn.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=pn.SENT,c.retryCount++;var A=X.relativePath(t,c.path);s=s.updateChild(A,c.currentOutputSnapshotRaw)}var l=s.val(!0),h=t;this.server_.put(h.toString(),l,function(r){n.log_("transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<e.length;s++){if(e[s].status=pn.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(e[s].currentWriteId)),e[s].onComplete){var a=e[s].currentOutputSnapshotResolved,u=new hn(n,e[s].path),c=new Wt(a,u,Tt);o.push(e[s].onComplete.bind(null,null,!0,c))}e[s].unwatcher()}for(n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(t)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(t,i),s=0;s<o.length;s++)q(o[s])}else{if("datastale"===r)for(s=0;s<e.length;s++)e[s].status=e[s].status===pn.SENT_NEEDS_ABORT?pn.NEEDS_ABORT:pn.RUN;else for(C("transaction at "+h.toString()+" failed: "+r),s=0;s<e.length;s++)e[s].status=pn.NEEDS_ABORT,e[s].abortReason=r;n.rerunTransactions_(t)}},a)},un.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},un.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===pn.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=X.relativePath(e,a.path),c=!1,A=void 0;if(Object(o.e)(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===pn.NEEDS_ABORT)c=!0,A=a.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===pn.RUN)if(a.retryCount>=un.MAX_TRANSACTION_RETRIES_)c=!0,A="maxretry",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var l=this.getLatestState_(a.path,i);a.currentInputSnapshot=l;var h=t[s].update(l.val());if(void 0!==h){At("transaction failed: Data returned ",h,a.path);var f=Vt(h);"object"==typeof h&&null!=h&&Object(o.i)(h,".priority")||(f=f.updatePriority(l.getPriority()));var d=a.currentWriteId,p=this.generateServerValues(),g=se(f,l,p);a.currentOutputSnapshotRaw=f,a.currentOutputSnapshotResolved=g,a.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(d),1),r=(r=r.concat(this.serverSyncTree_.applyUserOverwrite(a.path,g,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,A="nodata",r=r.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],c&&(t[s].status=pn.COMPLETED,setTimeout(t[s].unwatcher,Math.floor(0)),t[s].onComplete))if("nodata"===A){var y=new hn(this,t[s].path),v=new Wt(t[s].currentInputSnapshot,y,Tt);n.push(t[s].onComplete.bind(null,null,!1,v))}else n.push(t[s].onComplete.bind(null,new Error(A),!1,null))}for(this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_),s=0;s<n.length;s++)q(n[s]);this.sendReadyTransactions_()}},un.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},un.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},un.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},un.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==pn.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(n.length>0?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},un.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},un.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,s=0;s<e.length;s++)e[s].status===pn.SENT_NEEDS_ABORT||(e[s].status===pn.SENT?(Object(o.e)(i===s-1,"All SENT items should be at beginning of queue."),i=s,e[s].status=pn.SENT_NEEDS_ABORT,e[s].abortReason="set"):(Object(o.e)(e[s].status===pn.RUN,"Unexpected transaction status in abort"),e[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[s].currentWriteId,!0)),e[s].onComplete&&n.push(e[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r),s=0;s<n.length;s++)q(n[s])}};var gn,yn=function(){function t(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(b("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';C(t+="credential"in this.app_.options?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),vn=function(){function t(){}return t.prototype.getToken=function(e){return Promise.resolve({accessToken:t.EMULATOR_AUTH_TOKEN})},t.prototype.addTokenChangeListener=function(e){e(t.EMULATOR_AUTH_TOKEN)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.EMULATOR_AUTH_TOKEN="owner",t}(),mn=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return gn||(gn=new t),gn},t.prototype.interrupt=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].interrupt()}catch(A){n={error:A}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(l){t={error:l}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.resume=function(){var t,e,n,r;try{for(var o=Object(i.h)(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var u=(n=void 0,Object(i.h)(Object.keys(this.repos_[a]))),c=u.next();!c.done;c=u.next())this.repos_[a][c.value].resume()}catch(A){n={error:A}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(l){t={error:l}}finally{try{s&&!s.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}},t.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new tt(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new vn)},t.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||B("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),b("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=et(i,r),a=s.repoInfo,u=void 0;"undefined"!=typeof process&&(u=process.env.FIREBASE_DATABASE_EMULATOR_HOST),u?(o=!0,a=(s=et(i="http://"+u+"?ns="+a.namespace,r)).repoInfo):o=!s.repoInfo.secure;var c=r&&o?new vn:new yn(t,e);return vt("Invalid Firebase Database URL",1,s),s.path.isEmpty()||B("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,c).database},t.prototype.deleteRepo=function(t){var e=Object(o.D)(this.repos_,t.app.name);e&&Object(o.D)(e,t.key)===t||B("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},t.prototype.createRepo=function(t,e,n){var r=Object(o.D)(this.repos_,e.name);r||(this.repos_[e.name]=r={});var i=Object(o.D)(r,t.toURLString());return i&&B("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new un(t,this.useRestClient_,e,n),r[t.toURLString()]=i,i},t.prototype.forceRestClient=function(t){this.useRestClient_=t},t}(),bn=function(){function t(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return Object(i.b)(e,void 0,void 0,function(){return Object(i.d)(this,function(t){return this.checkDeleted_("delete"),mn.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof un||B("Don't call new Database() directly - please use firebase.database().")}return Object.defineProperty(t.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new hn(this.repo_,X.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),t.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?B("Cannot call useEmulator() after instance has already been initialized."):mn.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},t.prototype.ref=function(t){return this.checkDeleted_("ref"),Object(o.H)("database.ref",0,1,arguments.length),t instanceof hn?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},t.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),Object(o.H)(e,1,1,arguments.length);var n=et(t,this.repo_.repoInfo_.nodeAdmin);vt(e,1,n);var r=n.repoInfo;return r.isCustomHost()||r.host===this.repo_.repoInfo_.host||B(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},t.prototype.checkDeleted_=function(t){null===this.repoInternal_&&B("Cannot call "+t+" on a deleted database.")},t.prototype.goOffline=function(){Object(o.H)("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},t.prototype.goOnline=function(){Object(o.H)("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},t.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},t}(),wn=Object.freeze({__proto__:null,forceLongPolling:function(){Ze.forceDisallow(),We.forceAllow()},forceWebSockets:function(){We.forceDisallow()},isWebSocketsAvailable:function(){return Ze.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.customAuthImpl,i=t.namespace,o=t.nodeAdmin,s=void 0!==o&&o;Ye(t.version);var u=new a.c("auth-internal",new a.b("database-standalone"));return u.setComponent(new a.a("auth-internal",function(){return r},"PRIVATE")),{instance:mn.getInstance().databaseFromApp(e,u,n,s),namespace:i}}}),_n=on;on.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},on.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Bn=Object.freeze({__proto__:null,DataConnection:_n,RealTimeConnection:en,hijackHash:function(t){var e=on.prototype.put;return on.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){on.prototype.put=e}},ConnectionTarget:tt,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){mn.getInstance().forceRestClient(t)}}),Cn=bn.ServerValue;!function(e){Ye(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new a.a("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return mn.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:hn,Query:Zt,Database:bn,DataSnapshot:Wt,enableLogging:m,INTERNAL:wn,ServerValue:Cn,TEST_ACCESS:Bn}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.8.1"),Object(o.w)()&&(t.exports=n)}(r.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new A(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new A(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class A extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),A=n("I55L");function l(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(A.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=A(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=A(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function A(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.1.1","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return A});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const A=t=>{if(t&&"function"==typeof t[s.a])return A=t,t=>{const e=A[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,A}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return A});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let A=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new l(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new l(t,e),t})();class l extends A{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return la}),n.d(e,"b",function(){return ca}),n.d(e,"c",function(){return Aa}),n.d(e,"d",function(){return eu}),n.d(e,"e",function(){return Ja}),n.d(e,"f",function(){return _s}),n.d(e,"g",function(){return ma}),n.d(e,"h",function(){return Bs}),n.d(e,"i",function(){return Bn}),n.d(e,"j",function(){return aa}),n.d(e,"k",function(){return G}),n.d(e,"l",function(){return z}),n.d(e,"m",function(){return Ao}),n.d(e,"n",function(){return js}),n.d(e,"o",function(){return Ks}),n.d(e,"p",function(){return va}),n.d(e,"q",function(){return st}),n.d(e,"r",function(){return za}),n.d(e,"s",function(){return Ta}),n.d(e,"t",function(){return h}),n.d(e,"u",function(){return pa}),n.d(e,"v",function(){return da}),n.d(e,"w",function(){return Us}),n.d(e,"x",function(){return Es}),n.d(e,"y",function(){return Qs}),n.d(e,"z",function(){return Is}),n.d(e,"A",function(){return fr}),n.d(e,"B",function(){return qs}),n.d(e,"C",function(){return Pa}),n.d(e,"D",function(){return Fs}),n.d(e,"E",function(){return Ts}),n.d(e,"F",function(){return Xs}),n.d(e,"G",function(){return dt}),n.d(e,"H",function(){return Ga}),n.d(e,"I",function(){return Kn}),n.d(e,"J",function(){return T}),n.d(e,"K",function(){return jn}),n.d(e,"L",function(){return Za}),n.d(e,"M",function(){return Ma}),n.d(e,"N",function(){return ya}),n.d(e,"O",function(){return Ji}),n.d(e,"P",function(){return us}),n.d(e,"Q",function(){return lr}),n.d(e,"R",function(){return Wn}),n.d(e,"S",function(){return Sn}),n.d(e,"T",function(){return Rn}),n.d(e,"U",function(){return kn}),n.d(e,"V",function(){return Dn}),n.d(e,"W",function(){return xn}),n.d(e,"X",function(){return Pn}),n.d(e,"Y",function(){return is}),n.d(e,"Z",function(){return $a}),n.d(e,"ab",function(){return os}),n.d(e,"bb",function(){return ss}),n.d(e,"cb",function(){return Hn}),n.d(e,"db",function(){return D}),n.d(e,"eb",function(){return wo}),n.d(e,"fb",function(){return Do}),n.d(e,"gb",function(){return xo}),n.d(e,"hb",function(){return rs}),n.d(e,"ib",function(){return $t}),n.d(e,"jb",function(){return U}),n.d(e,"kb",function(){return Nn}),n.d(e,"lb",function(){return fo}),n.d(e,"mb",function(){return Gt}),n.d(e,"nb",function(){return ms}),n.d(e,"ob",function(){return Yr}),n.d(e,"pb",function(){return Eo}),n.d(e,"qb",function(){return zo}),n.d(e,"rb",function(){return vt}),n.d(e,"sb",function(){return Et}),n.d(e,"tb",function(){return v}),n.d(e,"ub",function(){return m}),n.d(e,"vb",function(){return _t}),n.d(e,"wb",function(){return Qt}),n.d(e,"xb",function(){return Oo}),n.d(e,"yb",function(){return Ho}),n.d(e,"zb",function(){return So}),n.d(e,"Ab",function(){return No}),n.d(e,"Bb",function(){return Ro}),n.d(e,"Cb",function(){return mn}),n.d(e,"Db",function(){return nt}),n.d(e,"Eb",function(){return Io}),n.d(e,"Fb",function(){return ua}),n.d(e,"Gb",function(){return Po}),n.d(e,"Hb",function(){return Mo}),n.d(e,"Ib",function(){return To}),n.d(e,"Jb",function(){return sa}),n.d(e,"Kb",function(){return Uo}),n.d(e,"Lb",function(){return pe}),n.d(e,"Mb",function(){return dr}),n.d(e,"Nb",function(){return Bt}),n.d(e,"Ob",function(){return Qo}),n.d(e,"Pb",function(){return Jo}),n.d(e,"Qb",function(){return Yo}),n.d(e,"Rb",function(){return $o}),n.d(e,"Sb",function(){return Zo});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){return{toString:t}.toString()}const c="__parameters__";function A(t,e,n){return u(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(c)?t[c]:Object.defineProperty(t,c,{value:[]})[c];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}const l=A("Inject",t=>({token:t})),h=A("Optional"),f=A("Self"),d=A("SkipSelf");var p=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});function g(t){for(let e in t)if(t[e]===g)return e;throw Error("Could not find renamed property on target object.")}function y(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function v(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function m(t){return{factory:t.factory,providers:t.providers||[],imports:t.imports||[]}}function b(t){return w(t,B)||w(t,E)}function w(t,e){return t.hasOwnProperty(e)?t[e]:null}function _(t){return t&&(t.hasOwnProperty(C)||t.hasOwnProperty(Q))?t[C]:null}const B=g({"\u0275prov":g}),C=g({"\u0275inj":g}),E=g({ngInjectableDef:g}),Q=g({ngInjectorDef:g});function U(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(U).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return""+t.overriddenName;if(t.name)return""+t.name;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function O(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const I=g({__forward_ref__:g});function T(t){return t.__forward_ref__=T,t.toString=function(){return U(this())},t}function F(t){return N(t)?t():t}function N(t){return"function"==typeof t&&t.hasOwnProperty(I)&&t.__forward_ref__===T}const S="undefined"!=typeof globalThis&&globalThis,H="undefined"!=typeof window&&window,R="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,x="undefined"!=typeof global&&global,D=S||x||H||R,P=g({"\u0275cmp":g}),k=g({"\u0275dir":g}),L=g({"\u0275pipe":g}),M=g({"\u0275mod":g}),j=g({"\u0275loc":g}),K=g({"\u0275fac":g}),V=g({__NG_ELEMENT_ID__:g});class z{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=v({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return"InjectionToken "+this._desc}}const G=new z("INJECTOR",-1),q={},W=/\n/gm,X="__source",J=g({provide:String,useValue:g});let Y,$=void 0;function Z(t){const e=$;return $=t,e}function tt(t){const e=Y;return Y=t,e}function et(t,e=p.Default){if(void 0===$)throw new Error("inject() must be called from an injection context");return null===$?rt(t,void 0,e):$.get(t,e&p.Optional?null:void 0,e)}function nt(t,e=p.Default){return(Y||et)(F(t),e)}function rt(t,e,n){const r=b(t);if(r&&"root"==r.providedIn)return void 0===r.value?r.value=r.factory():r.value;if(n&p.Optional)return null;if(void 0!==e)return e;throw new Error(`Injector: NOT_FOUND [${U(t)}]`)}function it(t){const e=[];for(let n=0;n<t.length;n++){const r=F(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t=void 0,n=p.Default;for(let e=0;e<r.length;e++){const i=r[e];i instanceof h||"Optional"===i.ngMetadataName||i===h?n|=p.Optional:i instanceof d||"SkipSelf"===i.ngMetadataName||i===d?n|=p.SkipSelf:i instanceof f||"Self"===i.ngMetadataName||i===f?n|=p.Self:t=i instanceof l||i===l?i.token:i}e.push(nt(t,n))}else e.push(nt(r))}return e}class ot{get(t,e=q){if(e===q){const e=new Error(`NullInjectorError: No provider for ${U(t)}!`);throw e.name="NullInjectorError",e}return e}}class st{}function at(t,e){t.forEach(t=>Array.isArray(t)?at(t,e):e(t))}function ut(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ct(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function At(t,e,n){let r=ht(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function lt(t,e){const n=ht(t,e);if(n>=0)return t[1|n]}function ht(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}var ft=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),dt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const pt={},gt=[];let yt=0;function vt(t){return u(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===ft.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||gt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||dt.Emulated,id:"c",styles:t.styles||gt,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=yt++,n.inputs=Ct(t.inputs,e),n.outputs=Ct(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(mt):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(bt):null,n})}function mt(t){return Ut(t)||function(t){return t[k]||null}(t)}function bt(t){return function(t){return t[L]||null}(t)}const wt={};function _t(t){const e={type:t.type,bootstrap:t.bootstrap||gt,declarations:t.declarations||gt,imports:t.imports||gt,exports:t.exports||gt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&u(()=>{wt[t.id]=t.type}),e}function Bt(t,e){return u(()=>{const n=It(t,!0);n.declarations=e.declarations||gt,n.imports=e.imports||gt,n.exports=e.exports||gt})}function Ct(t,e){if(null==t)return pt;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const Et=vt;function Qt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Ut(t){return t[P]||null}function Ot(t,e){return t.hasOwnProperty(K)?t[K]:null}function It(t,e){const n=t[M]||null;if(!n&&!0===e)throw new Error(`Type ${U(t)} does not have '\u0275mod' property.`);return n}const Tt=20,Ft=10;function Nt(t){return Array.isArray(t)&&"object"==typeof t[1]}function St(t){return Array.isArray(t)&&!0===t[1]}function Ht(t){return 0!=(8&t.flags)}function Rt(t){return 2==(2&t.flags)}function xt(t){return 1==(1&t.flags)}function Dt(t){return null!==t.template}function Pt(t){return 0!=(512&t[2])}class kt extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function Lt(t){return"string"==typeof t?t:null==t?"":""+t}function Mt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Lt(t)}const jt=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(D))();function Kt(t){return t instanceof Function?t():t}function Vt(t,e){const n=e?" in "+e:"";throw new kt("201",`No provider for ${Mt(t)} found${n}`)}class zt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function Gt(){return qt}function qt(t){return t.type.prototype.ngOnChanges&&(t.setInput=Xt),Wt}function Wt(){const t=Jt(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===pt)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Xt(t,e,n,r){const i=Jt(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:pt,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new zt(u&&u.currentValue,e,s===pt),t[r]=e}function Jt(t){return t.__ngSimpleChanges__||null}Gt.ngInherit=!0;let Yt=void 0;function $t(t){Yt=t}function Zt(t){return!!t.listen}const te={createRenderer:(t,e)=>void 0!==Yt?Yt:"undefined"!=typeof document?document:void 0};function ee(t){for(;Array.isArray(t);)t=t[0];return t}function ne(t,e){return ee(e[t])}function re(t,e){return ee(e[t.index])}function ie(t,e){return t.data[e]}function oe(t,e){const n=e[t];return Nt(n)?n:n[0]}function se(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ae(t){return 128==(128&t[2])}function ue(t,e){return null==e?null:t[e]}function ce(t){t[18]=0}function Ae(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const le={lFrame:Fe(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function he(){return le.bindingsEnabled}function fe(){return le.lFrame.lView}function de(){return le.lFrame.tView}function pe(t){le.lFrame.contextLView=t}function ge(){let t=ye();for(;null!==t&&64===t.type;)t=t.parent;return t}function ye(){return le.lFrame.currentTNode}function ve(t,e){const n=le.lFrame;n.currentTNode=t,n.isParent=e}function me(){return le.lFrame.isParent}function be(){return le.isInCheckNoChangesMode}function we(t){le.isInCheckNoChangesMode=t}function _e(){return le.lFrame.bindingIndex++}function Be(t){const e=le.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Ce(t,e){const n=le.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ee(e)}function Ee(t){le.lFrame.currentDirectiveIndex=t}function Qe(t){le.lFrame.currentQueryIndex=t}function Ue(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Oe(t,e,n){if(n&p.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&p.Host||(r=Ue(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=le.lFrame=Te();return r.currentTNode=e,r.lView=t,!0}function Ie(t){const e=Te(),n=t[1];le.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Te(){const t=le.lFrame,e=null===t?null:t.child;return null===e?Fe(t):e}function Fe(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Ne(){const t=le.lFrame;return le.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Se=Ne;function He(){const t=Ne();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Re(){return le.lFrame.selectedIndex}function xe(t){le.lFrame.selectedIndex=t}function De(){const t=le.lFrame;return ie(t.tView,t.selectedIndex)}function Pe(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function ke(t,e,n){je(t,e,3,n)}function Le(t,e,n,r){(3&t[2])===n&&je(t,e,n,r)}function Me(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function je(t,e,n,r){const i=null!=r?r:-1;let o=0;for(let s=void 0!==r?65535&t[18]:0;s<e.length;s++)if("number"==typeof e[s+1]){if(o=e[s],null!=r&&o>=r)break}else e[s]<0&&(t[18]+=65536),(o<i||-1==i)&&(Ke(t,n,e,s),t[18]=(4294901760&t[18])+s+2),s++}function Ke(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const Ve=-1;class ze{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Ge(t,e,n){const r=Zt(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];We(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function qe(t){return 3===t||4===t||6===t}function We(t){return 64===t.charCodeAt(0)}function Xe(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Je(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Je(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ye(t){return t!==Ve}function $e(t){return 32767&t}function Ze(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let tn=!0;function en(t){const e=tn;return tn=t,e}let nn=0;function rn(t,e){const n=sn(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,on(r.data,t),on(e,null),on(r.blueprint,null));const i=an(t,e),o=t.injectorIndex;if(Ye(i)){const t=$e(i),n=Ze(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function on(t,e){t.push(0,0,0,0,0,0,0,0,e)}function sn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function an(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ve;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ve}function un(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(V)&&(r=n[V]),null==r&&(r=n[V]=nn++);const i=255&r,o=1<<i,s=64&i,a=32&i,u=e.data;128&i?s?a?u[t+7]|=o:u[t+6]|=o:a?u[t+5]|=o:u[t+4]|=o:s?a?u[t+3]|=o:u[t+2]|=o:a?u[t+1]|=o:u[t]|=o}(t,e,n)}function cn(t,e,n){if(n&p.Optional)return t;Vt(e,"NodeInjector")}function An(t,e,n,r){if(n&p.Optional&&void 0===r&&(r=null),0==(n&(p.Self|p.Host))){const i=t[9],o=tt(void 0);try{return i?i.get(e,r,n&p.Optional):rt(e,r,n&p.Optional)}finally{tt(o)}}return cn(r,e,n)}function ln(t,e,n,r=p.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(V)?t[V]:void 0;return"number"==typeof e&&e>0?255&e:e}(n);if("function"==typeof o){if(!Oe(e,t,r))return An(e,n,r,i);try{const t=o();if(null!=t||r&p.Optional)return t;Vt(n)}finally{Se()}}else if("number"==typeof o){if(-1===o){if(!Oe(e,t,r))return r&p.Host?cn(i,n,r):An(e,n,r,i);try{return new yn(ge(),fe())}finally{Se()}}let s=null,a=sn(t,e),u=Ve,c=r&p.Host?e[16][6]:null;for((-1===a||r&p.SkipSelf)&&(u=-1===a?an(t,e):e[a+8],u!==Ve&&gn(r,!1)?(s=e[1],a=$e(u),e=Ze(u,e)):a=-1);-1!==a;){const t=e[1];if(pn(o,a,t.data)){const t=fn(a,e,n,s,r,c);if(t!==hn)return t}u=e[a+8],u!==Ve&&gn(r,e[1].data[a+8]===c)&&pn(o,a,e)?(s=t,a=$e(u),e=Ze(u,e)):a=-1}}}return An(e,n,r,i)}const hn={};function fn(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=function(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,A=i?a+c:t.directiveEnd;for(let l=r?a:a+c;l<A;l++){const t=s[l];if(l<u&&n===t||l>=u&&t.type===n)return l}if(i){const t=s[u];if(t&&Dt(t)&&t.type===n)return u}return null}(a,s,n,null==r?Rt(a)&&tn:r!=s&&0!=(3&a.type),i&p.Host&&o===a);return null!==u?dn(e,s,u,a):hn}function dn(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof ze){const s=i;s.resolving&&function(t,e){throw new kt("200","Circular dependency in DI detected for "+t)}(Mt(o[n]));const a=en(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?tt(s.injectImpl):null;Oe(t,r,p.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=qt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&tt(u),en(a),s.resolving=!1,Se()}}return i}function pn(t,e,n){const r=64&t,i=32&t;let o;return o=128&t?r?i?n[e+7]:n[e+6]:i?n[e+5]:n[e+4]:r?i?n[e+3]:n[e+2]:i?n[e+1]:n[e],!!(o&1<<t)}function gn(t,e){return!(t&p.Self||t&p.Host&&e)}class yn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return ln(this._tNode,this._lView,t,void 0,e)}}function vn(t){const e=t;if(N(t))return()=>{const t=vn(F(e));return t?t():null};let n=Ot(e);if(null===n){const t=_(e);n=t&&t.factory}return n||null}function mn(t){return u(()=>{const e=t.prototype.constructor,n=e[K]||vn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[K]||vn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function bn(t){return t.ngDebugContext}function wn(t){return t.ngOriginalError}function _n(t,...e){t.error(...e)}class Bn{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||_n}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?bn(t)?bn(t):this._findContext(wn(t)):null}_findOriginalError(t){let e=wn(t);for(;e&&wn(e);)e=wn(e);return e}}let Cn;function En(t){var e;return(null===(e=function(){if(void 0===Cn&&(Cn=null,D.trustedTypes))try{Cn=D.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return Cn}())||void 0===e?void 0:e.createHTML(t))||t}class Qn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return"SafeValue must use [property]=binding: "+this.changingThisBreaksApplicationSecurity+" (see http://g.co/ng/security#xss)"}}class Un extends Qn{getTypeName(){return"HTML"}}class On extends Qn{getTypeName(){return"Style"}}class In extends Qn{getTypeName(){return"Script"}}class Tn extends Qn{getTypeName(){return"URL"}}class Fn extends Qn{getTypeName(){return"ResourceURL"}}function Nn(t){return t instanceof Qn?t.changingThisBreaksApplicationSecurity:t}function Sn(t,e){const n=Hn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see http://g.co/ng/security#xss)`)}return n===e}function Hn(t){return t instanceof Qn&&t.getTypeName()||null}function Rn(t){return new Un(t)}function xn(t){return new On(t)}function Dn(t){return new In(t)}function Pn(t){return new Tn(t)}function kn(t){return new Fn(t)}let Ln=!0,Mn=!1;function jn(){return Mn=!0,Ln}function Kn(){if(Mn)throw new Error("Cannot enable prod mode after platform setup.");Ln=!1}class Vn{getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(En(t),"text/html").body;return e.removeChild(e.firstChild),e}catch(e){return null}}}class zn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=En(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=En(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Gn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,qn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Wn(t){return(t=String(t)).match(Gn)||t.match(qn)?t:(jn()&&console.warn(`WARNING: sanitizing unsafe URL value ${t} (see http://g.co/ng/security#xss)`),"unsafe:"+t)}function Xn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Jn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Yn=Xn("area,br,col,hr,img,wbr"),$n=Xn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zn=Xn("rp,rt"),tr=Jn(Zn,$n),er=Jn(Yn,Jn($n,Xn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Jn(Zn,Xn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tr),nr=Xn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),rr=Xn("srcset"),ir=Jn(nr,rr,Xn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),or=Xn("script,style,template");class sr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!er.hasOwnProperty(e))return this.sanitizedSomething=!0,!or.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!ir.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;nr[o]&&(s=Wn(s)),rr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Wn(t.trim())).join(", ")),this.buf.push(" ",e,'="',cr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();er.hasOwnProperty(e)&&!Yn.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(cr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: "+t.outerHTML);return e}}const ar=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ur=/([^\#-~ |!])/g;function cr(t){return t.replace(/&/g,"&amp;").replace(ar,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(ur,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ar;function lr(t,e){let n=null;try{Ar=Ar||function(t){return function(){try{return!!(new window.DOMParser).parseFromString(En(""),"text/html")}catch(t){return!1}}()?new Vn:new zn(t)}(t);let r=e?String(e):"";n=Ar.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Ar.getInertBodyElement(r)}while(r!==o);const s=new sr,a=s.sanitizeChildren(hr(n)||n);return jn()&&s.sanitizedSomething&&console.warn("WARNING: sanitizing HTML stripped some content, see http://g.co/ng/security#xss"),a}finally{if(n){const t=hr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function hr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var fr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function dr(t){const e=function(){const t=fe();return t&&t[12]}();return e?e.sanitize(fr.URL,t)||"":Sn(t,"URL")?Nn(t):Wn(Lt(t))}function pr(t,e){t.__ngContext__=e}function gr(t,e){return(void 0)(t,e)}function yr(t){const e=t[3];return St(e)?e[3]:e}function vr(t){return br(t[13])}function mr(t){return br(t[4])}function br(t){for(;null!==t&&!St(t);)t=t[4];return t}function wr(t,e,n,r,i){if(null!=r){let o,s=!1;St(r)?o=r:Nt(r)&&(s=!0,r=r[0]);const a=ee(r);0===t&&null!==n?null==i?Or(e,n,a):Ur(e,n,a,i||null,!0):1===t&&null!==n?Ur(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Tr(t,e);r&&function(t,e,n,r){Zt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==ee(n)&&wr(e,t,r,o,i);for(let s=Ft;s<n.length;s++){const i=n[s];Rr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function _r(t,e,n){return Zt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Br(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Ae(i,-1)),n.splice(r,1)}function Cr(t,e){if(t.length<=Ft)return;const n=Ft+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Br(o,r),e>0&&(t[n-1][4]=r[4]);const s=ct(t,Ft+e);Rr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Er(t,e){if(!(256&e[2])){const n=e[11];Zt(n)&&n.destroyNode&&Rr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Qr(t[1],t);for(;e;){let n=null;if(Nt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Nt(e)&&Qr(e[1],e),e=e[3];null===e&&(e=t),Nt(e)&&Qr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Qr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof ze)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup;if(null!==n){const t=e[7];for(let r=0;r<n.length-1;r+=2)if("string"==typeof n[r]){const i=n[r+1],o="function"==typeof i?i(e):ee(e[i]),s=t[n[r+2]],a=n[r+3];"boolean"==typeof a?o.removeEventListener(n[r],s,a):a>=0?t[a]():t[-a].unsubscribe(),r+=2}else n[r].call(t[n[r+1]]);e[7]=null}}(t,e),1===e[1].type&&Zt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&St(e[3])){n!==e[3]&&Br(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Ur(t,e,n,r,i){Zt(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Or(t,e,n){Zt(t)?t.appendChild(e,n):e.appendChild(n)}function Ir(t,e,n,r,i){null!==r?Ur(t,e,n,r,i):Or(t,e,n)}function Tr(t,e){return Zt(t)?t.parentNode(e):e.parentNode}function Fr(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data,n=e[e[r.index].directiveStart].encapsulation;if(n===dt.None||n===dt.Emulated)return null}return re(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?re(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Ir(o,i,n[a],s,!1);else Ir(o,i,n,s,!1)}function Nr(t,e){if(null!==e){const n=e.type;if(3&n)return re(e,t);if(4&n)return Sr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Nr(t,n);{const n=t[e.index];return St(n)?Sr(-1,n):ee(n)}}if(32&n)return gr(e,t)()||ee(t[e.index]);{const n=t[16],r=n[6],i=yr(n),o=r.projection[e.projection];return null!=o?Nr(i,o):Nr(t,e.next)}}return null}function Sr(t,e){const n=Ft+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Nr(t,r)}return e[7]}function Hr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&pr(ee(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Hr(t,e,n.child,r,i,o,!1),wr(e,t,i,a,o);else if(32&u){const s=gr(n,r);let u;for(;u=s();)wr(e,t,i,u,o);wr(e,t,i,a,o)}else 16&u?xr(t,e,r,n,i,o):wr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Rr(t,e,n,r,i,o){Hr(n,r,t.firstChild,e,i,o,!1)}function xr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)wr(e,t,i,a[u],o);else Hr(t,e,a,s[3],i,o,!0)}function Dr(t,e,n){Zt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Pr(t,e,n){Zt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function kr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Lr="ng-template";function Mr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==kr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function jr(t){return 4===t.type&&t.value!==Lr}function Kr(t,e,n){return e===(4!==t.type||n?t.value:Lr)}function Vr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(qe(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Kr(t,u,n)||""===u&&1===e.length){if(zr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Mr(t.attrs,c,n)){if(zr(r))return!1;s=!0}continue}const A=Gr(8&r?"class":u,i,jr(t),n);if(-1===A){if(zr(r))return!1;s=!0;continue}if(""!==c){let t;t=A>o?"":i[A+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==kr(e,c,0)||2&r&&c!==t){if(zr(r))return!1;s=!0}}}}else{if(!s&&!zr(r)&&!zr(u))return!1;if(s&&zr(u))continue;s=!1,r=u|1&r}}return zr(r)||s}function zr(t){return 0==(1&t)}function Gr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function qr(t,e,n=!1){for(let r=0;r<e.length;r++)if(Vr(t,e[r],n))return!0;return!1}function Wr(t,e){return t?":not("+e.trim()+")":e}function Xr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||zr(s)||(e+=Wr(o,i),i=""),r=s,o=o||!zr(r);n++}return""!==i&&(e+=Wr(o,i)),e}const Jr={};function Yr(t){$r(de(),fe(),Re()+t,be())}function $r(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&ke(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Le(e,r,0,n)}xe(n)}function Zr(t,e){return t<<17|e<<2}function ti(t){return t>>17&32767}function ei(t){return 2|t}function ni(t){return(131068&t)>>2}function ri(t,e){return-131069&t|e<<2}function ii(t){return 1|t}function oi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Qe(i),n.contentQueries(2,e[o],o)}}}function si(t,e,n,r,i,o,s,a,u,c){const A=e.blueprint.slice();return A[0]=i,A[2]=140|r,ce(A),A[3]=A[15]=t,A[8]=n,A[10]=s||t&&t[10],A[11]=a||t&&t[11],A[12]=u||t&&t[12]||null,A[9]=c||t&&t[9]||null,A[6]=o,A[16]=2==e.type?t[16]:A,A}function ai(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=ye(),s=me(),a=t.data[e]=yi(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),le.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=le.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return ve(o,!0),o}function ui(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function ci(t,e,n){Ie(e);try{const r=t.viewQuery;null!==r&&Di(1,r,n);const i=t.template;null!==i&&hi(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&oi(t,e),t.staticViewQueries&&Di(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ni(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,He()}}function Ai(t,e,n,r){const i=e[2];if(256==(256&i))return;Ie(e);const o=be();try{ce(e),le.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&hi(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&ke(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Le(e,n,0,null),Me(e,0)}if(function(t){for(let e=vr(t);null!==e;e=mr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Ae(r,1),n[2]|=1024}}}(e),function(t){for(let e=vr(t);null!==e;e=mr(e))for(let t=Ft;t<e.length;t++){const n=e[t],r=n[1];ae(n)&&Ai(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&oi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&ke(e,n)}else{const n=t.contentHooks;null!==n&&Le(e,n,1),Me(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)xe(~r);else{const i=r,o=n[++t],s=n[++t];Ce(o,i),s(2,e[i])}}}finally{xe(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Ti(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Di(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&ke(e,n)}else{const n=t.viewHooks;null!==n&&Le(e,n,2),Me(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Ae(e[3],-1))}finally{He()}}function li(t,e,n,r){const i=e[10],o=!be(),s=4==(4&e[2]);try{o&&!s&&i.begin&&i.begin(),s&&ci(t,e,r),Ai(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function hi(t,e,n,r,i){const o=Re();try{xe(-1),2&r&&e.length>Tt&&$r(t,e,Tt,be()),n(r,i)}finally{xe(o)}}function fi(t,e,n){he()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||rn(n,e),pr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=Dt(r);o&&Qi(e,n,r);const u=dn(e,t,a,n);pr(u,e),null!==s&&Ui(0,a-i,u,r,0,s),o&&(oe(n.index,e)[8]=u)}}(t,e,n,re(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=le.lFrame.currentDirectiveIndex;try{xe(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Ee(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||wi(r,i)}}finally{xe(-1),Ee(s)}}(t,e,n))}function di(t,e,n=re){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function pi(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=gi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function gi(t,e,n,r,i,o,s,a,u,c){const A=Tt+r,l=A+i,h=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Jr);return n}(A,l),f="function"==typeof c?c():c;return h[1]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,A),bindingStartIndex:A,expandoStartIndex:l,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function yi(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function vi(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function mi(t,e,n,r){let i=!1;if(he()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];qr(n,s.selectors,!1)&&(i||(i=[]),un(rn(n,e),t,s.type),Dt(s)?(_i(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,Ci(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=ui(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=Xe(n.mergedAttrs,c.hostAttrs),Ei(t,n,e,u,c),Bi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const A=c.type.prototype;!r&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!A.ngOnChanges&&!A.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||jr(e)?null:Oi(n,i);o.push(c),s=vi(n,u,s),a=vi(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new kt("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=Xe(n.mergedAttrs,n.attrs),i}function bi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function wi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function _i(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Bi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Dt(e)&&(n[""]=t)}}function Ci(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Ei(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=Ot(i.type)),s=new ze(o,Dt(i),null);t.blueprint[r]=s,n[r]=s,bi(t,e,0,r,ui(t,n,i.hostVars,Jr),i)}function Qi(t,e,n){const r=re(e,t),i=pi(n),o=t[10],s=Si(t,si(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Ui(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Oi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ii(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Ti(t,e){const n=oe(e,t);if(ae(n)){const t=n[1];80&n[2]?Ai(t,n,t.template,n[8]):n[5]>0&&Fi(n)}}function Fi(t){for(let n=vr(t);null!==n;n=mr(n))for(let t=Ft;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Ai(t,e,t.template,e[8])}else e[5]>0&&Fi(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=oe(e[n],t);ae(r)&&r[5]>0&&Fi(r)}}function Ni(t,e){const n=oe(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),ci(r,n,n[8])}function Si(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Hi(t){for(;t;){t[2]|=64;const e=yr(t);if(Pt(t)&&!e)return t;t=e}return null}function Ri(t,e,n){const r=e[10];r.begin&&r.begin();try{Ai(t,e,t.template,n)}catch(i){throw Li(e,i),i}finally{r.end&&r.end()}}function xi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=se(n),i=r[1];li(i,r,i.template,n)}}(t[8])}function Di(t,e,n){Qe(0),e(t,n)}const Pi=(()=>Promise.resolve(null))();function ki(t){return t[7]||(t[7]=[])}function Li(t,e){const n=t[9],r=n?n.get(Bn,null):null;r&&r.handleError(e)}function Mi(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function ji(t,e,n){const r=ne(e,t);!function(t,e,n){Zt(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}class Ki{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._viewContainerRef=null}get rootNodes(){const t=this._lView,e=t[1];return zi(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._viewContainerRef){const t=this._viewContainerRef.indexOf(this);t>-1&&this._viewContainerRef.detach(t),this._viewContainerRef=null}Er(this._lView[1],this._lView)}onDestroy(t){!function(t,e,n,r){const i=ki(e);i.push(null),t.firstCreatePass&&function(t){return t.cleanup||(t.cleanup=[])}(t).push(r,i.length-1)}(this._lView[1],this._lView,0,t)}markForCheck(){Hi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ri(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){we(!0);try{Ri(t,e,n)}finally{we(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(t){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._viewContainerRef=t}detachFromAppRef(){var t;this._appRef=null,Rr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._viewContainerRef)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Vi extends Ki{constructor(t){super(t),this._view=t}detectChanges(){xi(this._view)}checkNoChanges(){!function(t){we(!0);try{xi(t)}finally{we(!1)}}(this._view)}get context(){return null}}function zi(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(ee(o)),St(o))for(let t=Ft;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&zi(e[1],e,n,r)}const s=n.type;if(8&s)zi(t,e,n.child,r);else if(32&s){const t=gr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=e[16],i=t[6].projection[n.projection];if(Array.isArray(i))r.push(...i);else{const e=yr(t);zi(e[1],e,i,r,!0)}}n=i?n.projectionNext:n.next}return r}let Gi,qi,Wi;function Xi(t,e,n){return Gi||(Gi=class extends t{}),new Gi(re(e,n))}const Ji=new z("Set Injector scope."),Yi={},$i={},Zi=[];let to=void 0;function eo(){return void 0===to&&(to=new ot),to}function no(t,e=null,n=null,r){return new ro(t,n,e||eo(),r)}class ro{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&at(e,n=>this.processProvider(n,t,e)),at([t],t=>this.processInjectorType(t,[],i)),this.records.set(G,so(void 0,this));const o=this.records.get(Ji);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:U(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=q,n=p.Default){this.assertNotDestroyed();const r=Z(this);try{if(!(n&p.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof z)&&b(t);e=n&&this.injectableDefInScope(n)?so(io(t),Yi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&p.Self?eo():this.parent).get(t,e=n&p.Optional&&e===q?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(U(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[X]&&i.unshift(e[X]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=U(e);if(Array.isArray(e))i=e.map(U).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):U(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(W,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{Z(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(U(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=F(t)))return!1;let r=_(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=_(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{at(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];at(r,t=>this.processProvider(t,n,r||Zi))}}this.injectorDefTypes.add(o),this.records.set(o,so(r.factory,Yi));const a=r.providers;if(null!=a&&!s){const e=t;at(a,t=>this.processProvider(t,e,a))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=uo(t=F(t))?t:F(t&&t.provide);const i=function(t,e,n){return ao(t)?so(void 0,t.useValue):so(oo(t),Yi)}(t);if(uo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=so(void 0,Yi,!0),e.factory=()=>it(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Yi&&(e.value=$i,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function io(t){const e=b(t),n=null!==e?e.factory:Ot(t);if(null!==n)return n;const r=_(t);if(null!==r)return r.factory;if(t instanceof z)throw new Error(`Token ${U(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${U(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[B]||t[E]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function oo(t,e,n){let r=void 0;if(uo(t)){const e=F(t);return Ot(e)||io(e)}if(ao(t))r=()=>F(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...it(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>nt(F(t.useExisting));else{const e=F(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Ot(e)||io(e);r=()=>new e(...it(t.deps))}var i;return r}function so(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function ao(t){return null!==t&&"object"==typeof t&&J in t}function uo(t){return"function"==typeof t}const co=function(t,e,n){return function(t,e=null,n=null,r){const i=no(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Ao=(()=>{class t{static create(t,e){return Array.isArray(t)?co(t,e,""):co(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=q,t.NULL=new ot,t.\u0275prov=v({token:t,providedIn:"any",factory:()=>nt(G)}),t.__NG_ELEMENT_ID__=-1,t})();function lo(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=O(i,t):2==o&&(r=O(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function ho(t,e){Pe(se(t)[1],ge())}function fo(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i=void 0;if(Dt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=po(t.inputs),e.declaredInputs=po(t.declaredInputs),e.outputs=po(t.outputs);const n=i.hostBindings;n&&vo(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&go(t,o),s&&yo(t,s),y(t.inputs,i.inputs),y(t.declaredInputs,i.declaredInputs),y(t.outputs,i.outputs),Dt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===fo&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Xe(i.hostAttrs,n=Xe(n,i.hostAttrs))}}(r)}function po(t){return t===pt?{}:t===gt?[]:t}function go(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function yo(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function vo(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let mo=null;function bo(){if(!mo){const t=D.Symbol;if(t&&t.iterator)mo=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(mo=n)}}}return mo}function wo(t){return!!_o(t)&&(Array.isArray(t)||!(t instanceof Map)&&bo()in t)}function _o(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Bo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Co(t,e,n,r){const i=Bo(t,e,n);return Bo(t,e+1,r)||i}function Eo(t,e,n,r){const i=fe();return Bo(i,_e(),e)&&(de(),function(t,e,n,r,i,o){const s=re(t,e);!function(t,e,n,r,i,o,s){if(null==o)Zt(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?Lt(o):s(o,r||"",i);Zt(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(De(),i,t,e,n,r)),Eo}function Qo(t,e,n,r,i,o,s,a){const u=fe(),c=de(),A=t+Tt,l=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,A=ai(e,t,4,s||null,ue(c,a));mi(e,n,A,ue(c,u)),Pe(e,A);const l=A.tViews=gi(2,A,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,A),l.queries=e.queries.embeddedTView(A)),A}(A,c,u,e,n,r,i,o,s):c.data[A];ve(l,!1);const h=u[11].createComment("");Fr(c,u,h,l),pr(h,u),Si(u,u[A]=Ii(h,u,h,l)),xt(l)&&fi(c,u,l),null!=s&&di(u,l,a)}function Uo(t){return function(t,e){return t[e]}(le.lFrame.contextLView,Tt+t)}function Oo(t,e=p.Default){const n=fe();return null===n?nt(t,e):ln(ge(),n,F(t),e)}function Io(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(qe(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(ge(),t)}function To(t,e,n){const r=fe();return Bo(r,_e(),e)&&function(t,e,n,r,i,o,s,a){const u=re(e,n);let c,A=e.inputs;null!=A&&(c=A[r])?(Mi(t,n,c,r,i),Rt(e)&&function(t,e){const n=oe(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),i=null!=s?s(i,e.value||"",r):i,Zt(o)?o.setProperty(u,r,i):We(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}(de(),De(),r,t,e,r[11],n),To}function Fo(t,e,n,r,i){const o=i?"class":"style";Mi(t,n,e.inputs[o],o,r)}function No(t,e,n,r){const i=fe(),o=de(),s=Tt+t,a=i[11],u=i[s]=_r(a,e,le.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=ai(e,t,2,i,ue(a,o));return mi(e,n,u,ue(a,s)),null!==u.attrs&&lo(u,u.attrs,!1),null!==u.mergedAttrs&&lo(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];ve(c,!0);const A=c.mergedAttrs;null!==A&&Ge(a,u,A);const l=c.classes;null!==l&&Pr(a,u,l);const h=c.styles;null!==h&&Dr(a,u,h),64!=(64&c.flags)&&Fr(o,i,u,c),0===le.lFrame.elementDepthCount&&pr(u,i),le.lFrame.elementDepthCount++,xt(c)&&(fi(o,i,c),function(t,e,n){if(Ht(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&di(i,c)}function So(){let t=ge();me()?le.lFrame.isParent=!1:(t=t.parent,ve(t,!1));const e=t;le.lFrame.elementDepthCount--;const n=de();n.firstCreatePass&&(Pe(n,t),Ht(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Fo(n,e,fe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Fo(n,e,fe(),e.stylesWithoutHost,!1)}function Ho(t,e,n,r){No(t,e,n,r),So()}function Ro(){return fe()}function xo(t){return!!t&&"function"==typeof t.then}function Do(t){return!!t&&"function"==typeof t.subscribe}function Po(t,e,n=!1,r){const i=fe(),o=de(),s=ge();return function(t,e,n,r,i,o,s=!1,a){const u=xt(r),c=t.firstCreatePass&&(t.cleanup||(t.cleanup=[])),A=ki(e);let l=!0;if(3&r.type){const h=re(r,e),f=a?a(h):pt,d=f.target||h,p=A.length,g=a?t=>a(ee(t[r.index])).target:r.index;if(Zt(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,l=!1;else{o=Lo(r,e,o,!1);const t=n.listen(f.name||d,i,o);A.push(o,t),c&&c.push(i,g,p,p+1)}}else o=Lo(r,e,o,!0),d.addEventListener(i,o,s),A.push(o),c&&c.push(i,g,p,s)}const h=r.outputs;let f;if(l&&null!==h&&(f=h[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=A.length;A.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),Po}function ko(t,e,n){try{return!1!==e(n)}catch(r){return Li(t,r),!1}}function Lo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?oe(t.index,e):e;0==(32&e[2])&&Hi(s);let a=ko(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=ko(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function Mo(t=1){return function(t){return(le.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,le.lFrame.contextLView))[8]}(t)}const jo=[];function Ko(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?ti(o):ni(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];Vo(t[a],e)&&(u=!0,t[a+1]=r?ii(n):ei(n)),a=r?ti(n):ni(n)}u&&(t[n+1]=r?ei(o):ii(o))}function Vo(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ht(t,e)>=0}function zo(t,e){return function(t,e,n,r){const i=fe(),o=de(),s=Be(2);o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[Re()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=le.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=qo(n=Go(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=Go(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==ni(r))return t[ti(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=Go(null,t,e,n[1],r),n=qo(n,e.attrs,r),function(t,e,n,r){t[ti(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r=void 0;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=qo(r,t[o].hostAttrs,true);return qo(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=ti(s),u=ni(s);t[r]=n;let c,A=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||ht(t,c)>0)&&(A=!0)}else c=n;if(i)if(0!==u){const e=ti(t[a+1]);t[r+1]=Zr(e,a),0!==e&&(t[e+1]=ri(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=Zr(a,0),0!==a&&(t[a+1]=ri(t[a+1],r)),a=r;else t[r+1]=Zr(u,0),0===a?a=r:t[u+1]=ri(t[u+1],r),u=r;A&&(t[r+1]=ei(t[r+1])),Ko(t,c,r,!0),Ko(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&ht(o,e)>=0&&(n[r+1]=ii(n[r+1]))}(e,c,t,r),s=Zr(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==Jr&&Bo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];Xo(1==(1&c)?Wo(u,e,n,i,ni(c),s):void 0)||(Xo(o)||function(t){return 2==(2&t)}(c)&&(o=Wo(u,null,n,i,a,s)),function(t,e,n,r,i){const o=Zt(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,ne(Re(),n),i,o))}(o,o.data[Re()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=U(Nn(t))),t}(e),true,s)}(t,e),zo}function Go(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=qo(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function qo(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),At(t,s,!!n||e[++o]))}return void 0===t?null:t}function Wo(t,e,n,r,i,o){const s=null===e;let a=void 0;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let A=n[i+1];A===Jr&&(A=c?jo:void 0);let l=c?lt(A,r):u===r?A:void 0;if(o&&!Xo(l)&&(l=lt(e,r)),Xo(l)&&(a=l,s))return a;const h=t[i+1];i=s?ti(h):ni(h)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=lt(t,r))}return a}function Xo(t){return void 0!==t}function Jo(t,e=""){const n=fe(),r=de(),i=t+Tt,o=r.firstCreatePass?ai(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Zt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Fr(r,n,s,o),ve(o,!1)}function Yo(t){return $o("",t,""),Yo}function $o(t,e,n){const r=fe(),i=function(t,e,n,r){return Bo(t,_e(),n)?e+Lt(n)+r:Jr}(r,t,e,n);return i!==Jr&&ji(r,Re(),i),$o}function Zo(t,e,n,r,i){const o=fe(),s=function(t,e,n,r,i,o){const s=Co(t,le.lFrame.bindingIndex,n,i);return Be(2),s?e+Lt(n)+r+Lt(i)+o:Jr}(o,t,e,n,r,i);return s!==Jr&&ji(o,Re(),s),Zo}const ts=void 0;var es=["en",[["a","p"],["AM","PM"],ts],[["AM","PM"],ts,ts],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ts,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ts,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ts,"{1} 'at' {0}",ts],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let ns={};function rs(t,e,n){"string"!=typeof e&&(n=e,e=t[us.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),ns[e]=t,n&&(ns[e][us.ExtraData]=n)}function is(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=as(e);if(n)return n;const r=e.split("-")[0];if(n=as(r),n)return n;if("en"===r)return es;throw new Error(`Missing locale data for the locale "${t}".`)}function os(t){return is(t)[us.CurrencyCode]||null}function ss(t){return is(t)[us.PluralCase]}function as(t){return t in ns||(ns[t]=D.ng&&D.ng.common&&D.ng.common.locales&&D.ng.common.locales[t]),ns[t]}var us=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const cs="en-US";let As=cs;function ls(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error("ASSERTION ERROR: "+t+` [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(As=t.toLowerCase().replace(/_/g,"-"))}function hs(t,e,n,r,i){if(t=F(t),Array.isArray(t))for(let o=0;o<t.length;o++)hs(t[o],e,n,r,i);else{const o=de(),s=fe();let a=uo(t)?t:F(t.provide),u=oo(t);const c=ge(),A=1048575&c.providerIndexes,l=c.directiveStart,h=c.providerIndexes>>20;if(uo(t)||!t.multi){const r=new ze(u,i,Oo),f=ps(a,e,i?A:A+h,l);-1===f?(un(rn(c,s),o,a),fs(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=ps(a,e,A+h,l),d=ps(a,e,A,A+h),p=f>=0&&n[f],g=d>=0&&n[d];if(i&&!g||!i&&!p){un(rn(c,s),o,a);const A=function(t,e,n,r,i){const o=new ze(t,n,Oo);return o.multi=[],o.index=e,o.componentProviders=0,ds(o,i,r&&!n),o}(i?ys:gs,n.length,i,r,u);!i&&g&&(n[d].providerFactory=A),fs(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(A),s.push(A)}else fs(o,t,f>-1?f:d,ds(n[i?d:f],u,!i&&r));!i&&r&&g&&n[d].componentProviders++}}}function fs(t,e,n,r){const i=uo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function ds(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function ps(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function gs(t,e,n,r){return vs(this.multi,[])}function ys(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=dn(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),vs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],vs(i,o);return o}function vs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function ms(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=de();if(r.firstCreatePass){const i=Dt(t);hs(n,r.data,r.blueprint,i,!0),hs(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class bs{}class ws{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${U(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let _s=(()=>{class t{}return t.NULL=new ws,t})(),Bs=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=()=>Cs(t),t})();const Cs=function(t){return Xi(t,ge(),fe())};class Es{}var Qs=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});let Us=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Os(),t})();const Os=function(){const t=fe(),e=oe(ge().index,t);return function(t){const e=t[11];if(Zt(e))return e;throw new Error("Cannot inject Renderer2 when the application uses Renderer3!")}(Nt(e)?e:t)};let Is=(()=>{class t{}return t.\u0275prov=v({token:t,providedIn:"root",factory:()=>null}),t})();class Ts{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Fs=new Ts("11.0.0");class Ns{constructor(){}supports(t){return wo(t)}create(t){return new Hs(t)}}const Ss=(t,e)=>e;class Hs{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Ss}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<Ps(n,r,i)?e:n,s=Ps(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!wo(t))throw new Error(`Error trying to diff '${U(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[bo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):t=this._addAfter(new Rs(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ds),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ds),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Rs{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class xs{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class Ds{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new xs,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Ps(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ks{constructor(){}supports(t){return t instanceof Map||_o(t)}create(){return new Ls}}class Ls{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||_o(t)))throw new Error(`Error trying to diff '${U(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Ms(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ms{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}let js=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend IterableDiffers without a parent injector");return t.create(e,n)},deps:[[t,new d,new h]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=v({token:t,providedIn:"root",factory:()=>new t([new Ns])}),t})(),Ks=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>{if(!n)throw new Error("Cannot extend KeyValueDiffers without a parent injector");return t.create(e,n)},deps:[[t,new d,new h]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=v({token:t,providedIn:"root",factory:()=>new t([new ks])}),t})();const Vs=[new ks],zs=new js([new Ns]),Gs=new Ks(Vs);let qs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Ws(t,Bs),t})();const Ws=function(t,e){return function(t,e,n,r){return qi||(qi=class extends t{constructor(t,e,n){super(),this._declarationView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=si(this._declarationView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationView[this._declarationTContainer.index];const r=this._declarationView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),ci(e,n,t),new Ki(n)}}),4&n.type?new qi(r,n,Xi(e,n,r)):null}(t,e,ge(),fe())};let Xs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Js(t,Bs),t})();const Js=function(t,e){return function(t,e,n,r){let i;Wi||(Wi=class extends t{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostView=n}get element(){return Xi(e,this._hostTNode,this._hostView)}get injector(){return new yn(this._hostTNode,this._hostView)}get parentInjector(){const t=an(this._hostTNode,this._hostView);if(Ye(t)){const e=Ze(t,this._hostView),n=$e(t);return new yn(e[1].data[n+8],e)}return new yn(null,this._hostView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){return null!==this._lContainer[8]&&this._lContainer[8][t]||null}get length(){return this._lContainer.length-Ft}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(st,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(t.destroyed)throw new Error("Cannot insert a destroyed View in a ViewContainer!");if(this.allocateContainerIfNeeded(),St(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Wi(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=Ft+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-Ft?(e[4]=n[i],ut(n,Ft+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=Sr(i,o),a=n[11],u=Tr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Rr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(this),ut(o[8],i,t),t}move(t,e){if(t.destroyed)throw new Error("Cannot move a destroyed View in a ViewContainer!");return this.insert(t,e)}indexOf(t){const e=this._lContainer[8];return null!==e?e.indexOf(t):-1}remove(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Cr(this._lContainer,e);n&&(ct(this._lContainer[8],e),Er(n[1],n))}detach(t){this.allocateContainerIfNeeded();const e=this._adjustIndex(t,-1),n=Cr(this._lContainer,e);return n&&null!=ct(this._lContainer[8],e)?new Ki(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}allocateContainerIfNeeded(){null===this._lContainer[8]&&(this._lContainer[8]=[])}});const o=r[n.index];if(St(o))i=o;else{let t;if(8&n.type)t=ee(o);else if(t=r[11].createComment(""),Pt(r)){const e=r[11],i=re(n,r);Ur(e,Tr(e,i),t,function(t,e){return Zt(t)?t.nextSibling(e):e.nextSibling}(e,i),!1)}else{const e=yi(0,n.parent,4,0,null,null);Fr(r[1],r,t,e)}r[n.index]=i=Ii(o,r,t,n),Si(r,i)}return new Wi(i,n,r)}(t,e,ge(),fe())},Ys={};class $s extends _s{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Ut(t);return new ea(e,this.ngModule)}}function Zs(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const ta=new z("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>jt});class ea extends bs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(Xr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Zs(this.componentDef.inputs)}get outputs(){return Zs(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ys,i);return o!==Ys||r===Ys?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Es,te),s=i.get(Is,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Zt(t))return t.selectRootElement(e,n===dt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):_r(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),A=this.componentDef.onPush?576:528,l={components:[],scheduler:jt,clean:Pi,playerHandler:null,flags:0},h=gi(0,null,null,1,0,null,null,null,null,null),f=si(null,h,l,A,null,null,o,a,s,i);let d,p;Ie(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=ai(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(lo(a,u,!0),null!==t&&(Ge(i,t,u),null!==a.classes&&Pr(i,t,a.classes),null!==a.styles&&Dr(i,t,a.styles)));const c=r.createRenderer(t,e),A=si(n,pi(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(un(rn(a,n),s,e.type),_i(s,a),Ci(a,n.length,1)),Si(n,A),n[20]=A}(c,this.componentDef,f,o,a);if(c)if(n)Ge(a,c,["ng-version",Fs.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!zr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Ge(a,c,t),e&&e.length>0&&Pr(a,c,e.join(" "))}if(p=ie(h,Tt),void 0!==e){const t=p.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}d=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=ge();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Ei(t,r,e,ui(t,e,1,null),n));const i=dn(e,t,r.directiveStart,r);pr(i,e);const o=re(r,e);return o&&pr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=ge();e.contentQueries(1,s,t.directiveStart)}const a=ge();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(xe(a.index),bi(n[1],a,0,a.directiveStart,a.directiveEnd,e),wi(e,s)),s}(t,this.componentDef,f,l,[ho]),ci(h,f,null)}finally{He()}return new na(this.componentType,d,Xi(Bs,p,f),f,p)}}class na extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.destroyCbs=[],this.instance=e,this.hostView=this.changeDetectorRef=new Vi(r),this.componentType=t}get injector(){return new yn(this._tNode,this._rootLView)}destroy(){this.destroyCbs&&(this.destroyCbs.forEach(t=>t()),this.destroyCbs=null,!this.hostView.destroyed&&this.hostView.destroy())}onDestroy(t){this.destroyCbs&&this.destroyCbs.push(t)}}const ra=new Map;class ia extends st{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new $s(this);const n=It(t),r=t[j]||null;r&&ls(r),this._bootstrapComponents=Kt(n.bootstrap),this._r3Injector=no(t,e,[{provide:st,useValue:this},{provide:_s,useValue:this.componentFactoryResolver}],U(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Ao.THROW_IF_NOT_FOUND,n=p.Default){return t===Ao||t===st||t===G?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class oa extends class{}{constructor(t){super(),this.moduleType=t,null!==It(t)&&function(t){const e=new Set;!function t(n){const r=It(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${U(e)} vs ${U(e.name)}`)}(i,ra.get(i),n),ra.set(i,n));const o=Kt(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new ia(this.moduleType,t)}}function sa(t,e,n,r,i){return function(t,e,n,r,i,o,s){const a=e+n;return Co(t,a,i,o)?function(t,e,n){return t[e]=n}(t,a+2,s?r.call(s,i,o):r(i,o)):function(t,e){const n=t[e];return n===Jr?void 0:n}(t,a+2)}(fe(),function(){const t=le.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),t,e,n,r,i)}const aa=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function ua(t=p.Default){const e=function(t=!1){return function(t,e,n){if(!n&&Rt(t)){const n=oe(t.index,e);return new Ki(n,n)}return 47&t.type?new Ki(e[16],e):null}(ge(),fe(),t)}(!0);if(null!=e||t&p.Optional)return e;Vt("ChangeDetectorRef")}const ca=new z("Application Initializer");let Aa=(()=>{class t{constructor(t){this.appInits=t,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();xo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(nt(ca,8))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const la=new z("AppId"),ha={provide:la,useFactory:function(){return`${fa()}${fa()}${fa()}`},deps:[]};function fa(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const da=new z("Platform Initializer"),pa=new z("Platform ID"),ga=new z("appBootstrapListener");let ya=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const va=new z("LocaleId"),ma=new z("DefaultCurrencyCode");class ba{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const wa=function(t){return new oa(t)},_a=wa,Ba=function(t){return Promise.resolve(wa(t))},Ca=function(t){const e=wa(t),n=Kt(It(t).declarations).reduce((t,e)=>{const n=Ut(e);return n&&t.push(new ea(n)),t},[]);return new ba(e,n)},Ea=Ca,Qa=function(t){return Promise.resolve(Ca(t))};let Ua=(()=>{class t{constructor(){this.compileModuleSync=_a,this.compileModuleAsync=Ba,this.compileModuleAndAllComponentsSync=Ea,this.compileModuleAndAllComponentsAsync=Qa}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();const Oa=(()=>Promise.resolve(0))();function Ia(t){"undefined"==typeof Zone?Oa.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ta{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new aa(!1),this.onMicrotaskEmpty=new aa(!1),this.onStable=new aa(!1),this.onError=new aa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const n=this;n._nesting=0,n._outer=n._inner=Zone.current,Zone.wtfZoneSpec&&(n._inner=n._inner.fork(Zone.wtfZoneSpec)),Zone.TaskTrackingZoneSpec&&(n._inner=n._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(n._inner=n._inner.fork(Zone.longStackTraceZoneSpec)),n.shouldCoalesceEventChangeDetection=e,n.lastRequestAnimationFrameId=-1,n.nativeRequestAnimationFrame=function(){let t=D.requestAnimationFrame,e=D.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=!!t.shouldCoalesceEventChangeDetection&&t.nativeRequestAnimationFrame&&(()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(D,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Ha(t),Sa(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Ha(t))}(t)});t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0,maybeDelayChangeDetection:e},onInvokeTask:(n,r,i,o,s,a)=>{try{return Ra(t),n.invokeTask(i,o,s,a)}finally{e&&"eventTask"===o.type&&e(),xa(t)}},onInvoke:(e,n,r,i,o,s,a)=>{try{return Ra(t),e.invoke(r,i,o,s,a)}finally{xa(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Ha(t),Sa(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(n)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ta.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ta.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Na,Fa,Fa);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}function Fa(){}const Na={};function Sa(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Ha(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||t.shouldCoalesceEventChangeDetection&&-1!==t.lastRequestAnimationFrameId)}function Ra(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function xa(t){t._nesting--,Sa(t)}class Da{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new aa,this.onMicrotaskEmpty=new aa,this.onStable=new aa,this.onError=new aa}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Pa=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ta.assertNotInAngularZone(),Ia(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ia(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(nt(Ta))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})(),ka=(()=>{class t{constructor(){this._applications=new Map,Ka.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Ka.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();class La{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Ma(t){Ka=t}let ja,Ka=new La;const Va=new z("AllowMultipleToken");class za{constructor(t,e){this.name=t,this.token=e}}function Ga(t,e,n=[]){const r="Platform: "+e,i=new z(r);return(e=[])=>{let o=qa();if(!o||o.injector.get(Va,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Ji,useValue:"platform"});!function(t){if(ja&&!ja.destroyed&&!ja.injector.get(Va,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ja=t.get(Wa);const e=t.get(da,null);e&&e.forEach(t=>t())}(Ao.create({providers:t,name:r}))}return function(t){const e=qa();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function qa(){return ja&&!ja.destroyed?ja:null}let Wa=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Da:("zone.js"===t?void 0:t)||new Ta({enableLongStackTrace:jn(),shouldCoalesceEventChangeDetection:e}),n}(e?e.ngZone:void 0,e&&e.ngZoneEventCoalescing||!1),r=[{provide:Ta,useValue:n}];return n.run(()=>{const e=Ao.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(Bn,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return i.onDestroy(()=>Ya(this._modules,i)),n.runOutsideAngular(()=>n.onError.subscribe({next:t=>{o.handleError(t)}})),function(t,e,n){try{const r=n();return xo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(Aa);return t.runInitializers(),t.donePromise.then(()=>(ls(i.injector.get(va,cs)||cs),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Xa({},e);return function(t,e,n){const r=new oa(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(Ja);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${U(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(nt(Ao))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function Xa(t,e){return Array.isArray(e)?e.reduce(Xa,t):Object.assign(Object.assign({},t),e)}let Ja=(()=>{class t{constructor(t,e,n,r,i,u){this._zone=t,this._console=e,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=u,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._enforceNoNewChanges=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._enforceNoNewChanges=jn(),this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),A=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Ta.assertNotInAngularZone(),Ia(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Ta.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(c,A.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof bs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(st),i=n.create(Ao.NULL,[],e||n.selector,r);i.onDestroy(()=>{this._unloadComponent(i)});const o=i.injector.get(Pa,null);return o&&i.injector.get(ka).registerApplication(i.location.nativeElement,o),this._loadComponent(i),jn()&&this._console.log("Angular is running in development mode. Call enableProdMode() to enable production mode."),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges();if(this._enforceNoNewChanges)for(let t of this._views)t.checkNoChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Ya(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ga,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}_unloadComponent(t){this.detachView(t.hostView),Ya(this.components,t)}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy())}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(nt(Ta),nt(ya),nt(Ao),nt(Bn),nt(_s),nt(Aa))},t.\u0275prov=v({token:t,factory:t.\u0275fac}),t})();function Ya(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const $a=function(t){return null},Za=Ga(null,"core",[{provide:pa,useValue:"unknown"},{provide:Wa,deps:[Ao]},{provide:ka,deps:[]},{provide:ya,deps:[]}]),tu=[{provide:Ja,useClass:Ja,deps:[Ta,ya,Ao,Bn,_s,Aa]},{provide:ta,deps:[Ta],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:Aa,useClass:Aa,deps:[[new h,ca]]},{provide:Ua,useClass:Ua,deps:[]},ha,{provide:js,useFactory:function(){return zs},deps:[]},{provide:Ks,useFactory:function(){return Gs},deps:[]},{provide:va,useFactory:function(t){return ls(t=t||"undefined"!=typeof $localize&&$localize.locale||cs),t},deps:[[new l(va),new h,new d]]},{provide:ma,useValue:"USD"}];let eu=(()=>{class t{constructor(t){}}return t.\u0275mod=_t({type:t}),t.\u0275inj=m({factory:function(e){return new(e||t)(nt(Ja))},providers:tu}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mAIw:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return A}),n.d(e,"g",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function A(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}function l(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return A});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.a)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new A(t,this.scheduler,this.delay))}}class A extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(A.dispatch,this.delay,new l(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class l{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return l}),n.d(e,"c",function(){return h}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),A=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=A,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function h(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return h}),n.d(e,"b",function(){return C}),n.d(e,"c",function(){return B}),n.d(e,"d",function(){return D}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return u}),n.d(e,"i",function(){return N}),n.d(e,"j",function(){return P}),n.d(e,"k",function(){return A}),n.d(e,"l",function(){return l}),n.d(e,"m",function(){return j}),n.d(e,"n",function(){return f}),n.d(e,"o",function(){return F}),n.d(e,"p",function(){return g}),n.d(e,"q",function(){return y}),n.d(e,"r",function(){return m}),n.d(e,"s",function(){return H}),n.d(e,"t",function(){return b}),n.d(e,"u",function(){return d}),n.d(e,"v",function(){return p}),n.d(e,"w",function(){return _}),n.d(e,"x",function(){return v}),n.d(e,"y",function(){return w}),n.d(e,"z",function(){return T}),n.d(e,"A",function(){return U}),n.d(e,"B",function(){return R}),n.d(e,"C",function(){return x}),n.d(e,"D",function(){return S}),n.d(e,"E",function(){return G}),n.d(e,"F",function(){return z}),n.d(e,"G",function(){return O}),n.d(e,"H",function(){return M}),n.d(e,"I",function(){return K}),n.d(e,"J",function(){return V});var r=n("mAIw"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,A=(15&a)<<2|c>>6,l=63&c;u||(l=64,s||(A=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[A],n[l])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function A(t){return l(void 0,t)}function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=l(t[n],e[n]));return t}var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function d(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function p(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function g(){return"object"==typeof self&&self.self===self}function y(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function m(){return f().indexOf("Electron/")>=0}function b(){var t=f();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function w(){return f().indexOf("MSAppHost/")>=0}function _(){return!1}var B=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,C.prototype.create),o}return Object(r.c)(e,t),e}(Error),C=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?E(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new B(i,a,r);return u},t}();function E(t,e){return t.replace(Q,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var Q=/\{\$([^}]+)}/g;function U(t){return JSON.parse(t)}function O(t){return JSON.stringify(t)}var I=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=U(c(o[0])||""),n=U(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},T=function(t){var e=I(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},F=function(t){var e=I(t).claims;return"object"==typeof e&&!0===e.admin};function N(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function H(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function R(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function x(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var D=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((l=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|l>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],A=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var l=(s<<5|s>>>27)+i+A+o+n[r]&4294967295;A=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=l}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+A&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function P(t,e){var n=new k(t,e);return n.subscribe.bind(n)}var k=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=L),void 0===r.error&&(r.error=L),void 0===r.complete&&(r.complete=L);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function L(){}var M=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function j(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}function K(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(j(t,e,r)+"must be a valid function.")}function V(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(j(t,e,r)+"must be a valid context object.")}var z=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},G=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:A}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(l){e=l instanceof s?u(l.errors):[l]}}if(Object(r.a)(A)){let t=-1,n=A.length;for(;++t<n;){const n=A[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(l){e=e||[],l instanceof s?e=e.concat(u(l.errors)):e.push(l)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return Q}),n.d(e,"b",function(){return m}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return f}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return C}),n.d(e,"g",function(){return w}),n.d(e,"h",function(){return d}),n.d(e,"i",function(){return g}),n.d(e,"j",function(){return _});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function A(){}class l{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class h{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",A,{},A,A)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new l(Zone.current)),this.insideAngular=t.run(()=>new l(Zone.current,i.a))}}function d(t){return function(e){return(e=e.lift(new h(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const p=["ngOnDestroy"],g=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(p.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.l("angularfire2.app.options"),m=new u.l("angularfire2.app.nameOrConfig"),b=new u.E("6.1.2");function w(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&B("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const _=()=>{B("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},B=(t,...e)=>{Object(u.K)()&&"undefined"!=typeof console&&console[t](...e)};function C(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&B("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const E={provide:class{},useFactory:w,deps:[v,u.s,[new u.t,m]]};let Q=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",b.full,t.toString()),c.a.registerVersion("angular",u.D.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:m,useValue:n}]}}}return t.\u0275mod=u.vb({type:t}),t.\u0275inj=u.ub({factory:function(e){return new(e||t)(u.Db(u.u))},providers:[E]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return g});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class A extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var l=n("IjjT");class h extends l.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new h(A);var d=n("DH7j");class p extends r.a{constructor(t,e=0,n=f){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(d.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new p(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(p.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function g(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new p(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return d});var r=n("XNiG"),i=n("HDdC"),o=n("7o/Q"),s=n("quSY");function a(){return function(t){return t.lift(new u(t))}}class u{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new c(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class c extends o.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}class A extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new s.a,t.add(this.source.subscribe(new h(this.getSubject(),this))),t.closed&&(this._connection=null,t=s.a.EMPTY)),t}refCount(){return a()(this)}}const l=(()=>{const t=A.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class h extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function f(){return new r.a}function d(){return t=>{return a()((e=f,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,l);return r.source=t,r.subjectFactory=n,r})(t));var e}}},wOnQ:function(t,e,n){t.exports=function(){"use strict";var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};function e(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return(n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function r(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})}function i(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}for(var o=function(){function t(t,e,n,r){this.left=t,this.top=e,this.width=n,this.height=r}return t.prototype.add=function(e,n,r,i){return new t(this.left+e,this.top+n,this.width+r,this.height+i)},t.fromClientRect=function(e){return new t(e.left,e.top,e.width,e.height)},t}(),s=function(t){return o.fromClientRect(t.getBoundingClientRect())},a=function(t){for(var e=[],n=0,r=t.length;n<r;){var i=t.charCodeAt(n++);if(i>=55296&&i<=56319&&n<r){var o=t.charCodeAt(n++);56320==(64512&o)?e.push(((1023&i)<<10)+(1023&o)+65536):(e.push(i),n--)}else e.push(i)}return e},u=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";for(var r=[],i=-1,o="";++i<n;){var s=t[i];s<=65535?r.push(s):r.push(55296+((s-=65536)>>10),s%1024+56320),(i+1===n||r.length>16384)&&(o+=String.fromCharCode.apply(String,r),r.length=0)}return o},c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",A="undefined"==typeof Uint8Array?[]:new Uint8Array(256),l=0;l<c.length;l++)A[c.charCodeAt(l)]=l;var h,f,d,p,g,y,v,m,b,w=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},_=function(){function t(t,e,n,r,i,o){this.initialValue=t,this.errorValue=e,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=o}return t.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return this.data[e=((e=this.index[t>>5])<<2)+(31&t)];if(t<=65535)return this.data[e=((e=this.index[2048+(t-55296>>5)])<<2)+(31&t)];if(t<this.highStart)return e=this.index[e=2080+(t>>11)],this.data[e=((e=this.index[e+=t>>5&63])<<2)+(31&t)];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),B=10,C=13,E=15,Q=17,U=18,O=19,I=20,T=21,F=22,N=24,S=25,H=26,R=27,x=28,D=30,P=32,k=33,L=34,M=35,j=37,K=38,V=39,z=40,G=42,q="\xd7",W="\xf7",X=(g=function(t){var e,n,r,i,o,s=.75*t.length,a=t.length,u=0;"="===t[t.length-1]&&(s--,"="===t[t.length-2]&&s--);var c="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(s):new Array(s),l=Array.isArray(c)?c:new Uint8Array(c);for(e=0;e<a;e+=4)n=A[t.charCodeAt(e)],r=A[t.charCodeAt(e+1)],i=A[t.charCodeAt(e+2)],o=A[t.charCodeAt(e+3)],l[u++]=n<<2|r>>4,l[u++]=(15&r)<<4|i>>2,l[u++]=(3&i)<<6|63&o;return c}("KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"),y=Array.isArray(g)?function(t){for(var e=t.length,n=[],r=0;r<e;r+=4)n.push(t[r+3]<<24|t[r+2]<<16|t[r+1]<<8|t[r]);return n}(g):new Uint32Array(g),m=w(v=Array.isArray(g)?function(t){for(var e=t.length,n=[],r=0;r<e;r+=2)n.push(t[r+1]<<8|t[r]);return n}(g):new Uint16Array(g),12,y[4]/2),b=2===y[5]?w(v,(24+y[4])/2):(f=y,d=Math.ceil((24+y[4])/4),f.slice?f.slice(d,p):new Uint32Array(Array.prototype.slice.call(f,d,p))),new _(y[0],y[1],y[2],y[3],m,b)),J=[D,36],Y=[1,2,3,5],$=[B,8],Z=[R,H],tt=Y.concat($),et=[K,V,z,L,M],nt=[E,C],rt=function(t,e,n,r){var i=r[n];if(Array.isArray(t)?-1!==t.indexOf(i):t===i)for(var o=n;o<=r.length;){if((u=r[++o])===e)return!0;if(u!==B)break}if(i===B)for(o=n;o>0;){var s=r[--o];if(Array.isArray(t)?-1!==t.indexOf(s):t===s)for(var a=n;a<=r.length;){var u;if((u=r[++a])===e)return!0;if(u!==B)break}if(s!==B)break}return!1},it=function(t,e){for(var n=t;n>=0;){var r=e[n];if(r!==B)return r;n--}return 0},ot=function(t,e,n,r,i){if(0===n[r])return q;var o=r-1;if(Array.isArray(i)&&!0===i[o])return q;var s=o-1,a=o+1,u=e[o],c=s>=0?e[s]:0,A=e[a];if(2===u&&3===A)return q;if(-1!==Y.indexOf(u))return"!";if(-1!==Y.indexOf(A))return q;if(-1!==$.indexOf(A))return q;if(8===it(o,e))return W;if(11===X.get(t[o])&&(A===j||A===P||A===k))return q;if(7===u||7===A)return q;if(9===u)return q;if(-1===[B,C,E].indexOf(u)&&9===A)return q;if(-1!==[Q,U,O,N,x].indexOf(A))return q;if(it(o,e)===F)return q;if(rt(23,F,o,e))return q;if(rt([Q,U],T,o,e))return q;if(rt(12,12,o,e))return q;if(u===B)return W;if(23===u||23===A)return q;if(16===A||16===u)return W;if(-1!==[C,E,T].indexOf(A)||14===u)return q;if(36===c&&-1!==nt.indexOf(u))return q;if(u===x&&36===A)return q;if(A===I&&-1!==J.concat(I,O,S,j,P,k).indexOf(u))return q;if(-1!==J.indexOf(A)&&u===S||-1!==J.indexOf(u)&&A===S)return q;if(u===R&&-1!==[j,P,k].indexOf(A)||-1!==[j,P,k].indexOf(u)&&A===H)return q;if(-1!==J.indexOf(u)&&-1!==Z.indexOf(A)||-1!==Z.indexOf(u)&&-1!==J.indexOf(A))return q;if(-1!==[R,H].indexOf(u)&&(A===S||-1!==[F,E].indexOf(A)&&e[a+1]===S)||-1!==[F,E].indexOf(u)&&A===S||u===S&&-1!==[S,x,N].indexOf(A))return q;if(-1!==[S,x,N,Q,U].indexOf(A))for(var l=o;l>=0;){if((h=e[l])===S)return q;if(-1===[x,N].indexOf(h))break;l--}if(-1!==[R,H].indexOf(A))for(l=-1!==[Q,U].indexOf(u)?s:o;l>=0;){var h;if((h=e[l])===S)return q;if(-1===[x,N].indexOf(h))break;l--}if(K===u&&-1!==[K,V,L,M].indexOf(A)||-1!==[V,L].indexOf(u)&&-1!==[V,z].indexOf(A)||-1!==[z,M].indexOf(u)&&A===z)return q;if(-1!==et.indexOf(u)&&-1!==[I,H].indexOf(A)||-1!==et.indexOf(A)&&u===R)return q;if(-1!==J.indexOf(u)&&-1!==J.indexOf(A))return q;if(u===N&&-1!==J.indexOf(A))return q;if(-1!==J.concat(S).indexOf(u)&&A===F||-1!==J.concat(S).indexOf(A)&&u===U)return q;if(41===u&&41===A){for(var f=n[o],d=1;f>0&&41===e[--f];)d++;if(d%2!=0)return q}return u===P&&A===k?q:W},st=function(){function t(t,e,n,r){this.codePoints=t,this.required="!"===e,this.start=n,this.end=r}return t.prototype.slice=function(){return u.apply(void 0,this.codePoints.slice(this.start,this.end))},t}();!function(t){t[t.STRING_TOKEN=0]="STRING_TOKEN",t[t.BAD_STRING_TOKEN=1]="BAD_STRING_TOKEN",t[t.LEFT_PARENTHESIS_TOKEN=2]="LEFT_PARENTHESIS_TOKEN",t[t.RIGHT_PARENTHESIS_TOKEN=3]="RIGHT_PARENTHESIS_TOKEN",t[t.COMMA_TOKEN=4]="COMMA_TOKEN",t[t.HASH_TOKEN=5]="HASH_TOKEN",t[t.DELIM_TOKEN=6]="DELIM_TOKEN",t[t.AT_KEYWORD_TOKEN=7]="AT_KEYWORD_TOKEN",t[t.PREFIX_MATCH_TOKEN=8]="PREFIX_MATCH_TOKEN",t[t.DASH_MATCH_TOKEN=9]="DASH_MATCH_TOKEN",t[t.INCLUDE_MATCH_TOKEN=10]="INCLUDE_MATCH_TOKEN",t[t.LEFT_CURLY_BRACKET_TOKEN=11]="LEFT_CURLY_BRACKET_TOKEN",t[t.RIGHT_CURLY_BRACKET_TOKEN=12]="RIGHT_CURLY_BRACKET_TOKEN",t[t.SUFFIX_MATCH_TOKEN=13]="SUFFIX_MATCH_TOKEN",t[t.SUBSTRING_MATCH_TOKEN=14]="SUBSTRING_MATCH_TOKEN",t[t.DIMENSION_TOKEN=15]="DIMENSION_TOKEN",t[t.PERCENTAGE_TOKEN=16]="PERCENTAGE_TOKEN",t[t.NUMBER_TOKEN=17]="NUMBER_TOKEN",t[t.FUNCTION=18]="FUNCTION",t[t.FUNCTION_TOKEN=19]="FUNCTION_TOKEN",t[t.IDENT_TOKEN=20]="IDENT_TOKEN",t[t.COLUMN_TOKEN=21]="COLUMN_TOKEN",t[t.URL_TOKEN=22]="URL_TOKEN",t[t.BAD_URL_TOKEN=23]="BAD_URL_TOKEN",t[t.CDC_TOKEN=24]="CDC_TOKEN",t[t.CDO_TOKEN=25]="CDO_TOKEN",t[t.COLON_TOKEN=26]="COLON_TOKEN",t[t.SEMICOLON_TOKEN=27]="SEMICOLON_TOKEN",t[t.LEFT_SQUARE_BRACKET_TOKEN=28]="LEFT_SQUARE_BRACKET_TOKEN",t[t.RIGHT_SQUARE_BRACKET_TOKEN=29]="RIGHT_SQUARE_BRACKET_TOKEN",t[t.UNICODE_RANGE_TOKEN=30]="UNICODE_RANGE_TOKEN",t[t.WHITESPACE_TOKEN=31]="WHITESPACE_TOKEN",t[t.EOF_TOKEN=32]="EOF_TOKEN"}(h||(h={}));var at=45,ut=43,ct=-1,At=function(t){return t>=48&&t<=57},lt=function(t){return At(t)||t>=65&&t<=70||t>=97&&t<=102},ht=function(t){return 10===t||9===t||32===t},ft=function(t){return function(t){return function(t){return t>=97&&t<=122}(t)||function(t){return t>=65&&t<=90}(t)}(t)||function(t){return t>=128}(t)||95===t},dt=function(t){return ft(t)||At(t)||t===at},pt=function(t){return t>=0&&t<=8||11===t||t>=14&&t<=31||127===t},gt=function(t,e){return 92===t&&10!==e},yt=function(t,e,n){return t===at?ft(e)||gt(e,n):!!ft(t)||!(92!==t||!gt(t,e))},vt=function(t,e,n){return t===ut||t===at?!!At(e)||46===e&&At(n):At(46===t?e:t)},mt=function(t){var e=0,n=1;t[e]!==ut&&t[e]!==at||(t[e]===at&&(n=-1),e++);for(var r=[];At(t[e]);)r.push(t[e++]);var i=r.length?parseInt(u.apply(void 0,r),10):0;46===t[e]&&e++;for(var o=[];At(t[e]);)o.push(t[e++]);var s=o.length,a=s?parseInt(u.apply(void 0,o),10):0;69!==t[e]&&101!==t[e]||e++;var c=1;t[e]!==ut&&t[e]!==at||(t[e]===at&&(c=-1),e++);for(var A=[];At(t[e]);)A.push(t[e++]);var l=A.length?parseInt(u.apply(void 0,A),10):0;return n*(i+a*Math.pow(10,-s))*Math.pow(10,c*l)},bt={type:h.LEFT_PARENTHESIS_TOKEN},wt={type:h.RIGHT_PARENTHESIS_TOKEN},_t={type:h.COMMA_TOKEN},Bt={type:h.SUFFIX_MATCH_TOKEN},Ct={type:h.PREFIX_MATCH_TOKEN},Et={type:h.COLUMN_TOKEN},Qt={type:h.DASH_MATCH_TOKEN},Ut={type:h.INCLUDE_MATCH_TOKEN},Ot={type:h.LEFT_CURLY_BRACKET_TOKEN},It={type:h.RIGHT_CURLY_BRACKET_TOKEN},Tt={type:h.SUBSTRING_MATCH_TOKEN},Ft={type:h.BAD_URL_TOKEN},Nt={type:h.BAD_STRING_TOKEN},St={type:h.CDO_TOKEN},Ht={type:h.CDC_TOKEN},Rt={type:h.COLON_TOKEN},xt={type:h.SEMICOLON_TOKEN},Dt={type:h.LEFT_SQUARE_BRACKET_TOKEN},Pt={type:h.RIGHT_SQUARE_BRACKET_TOKEN},kt={type:h.WHITESPACE_TOKEN},Lt={type:h.EOF_TOKEN},Mt=function(){function t(){this._value=[]}return t.prototype.write=function(t){this._value=this._value.concat(a(t))},t.prototype.read=function(){for(var t=[],e=this.consumeToken();e!==Lt;)t.push(e),e=this.consumeToken();return t},t.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case 34:return this.consumeStringToken(34);case 35:var e=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(dt(e)||gt(n,r)){var i=yt(e,n,r)?2:1,o=this.consumeName();return{type:h.HASH_TOKEN,value:o,flags:i}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Bt;break;case 39:return this.consumeStringToken(39);case 40:return bt;case 41:return wt;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Tt;break;case ut:if(vt(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 44:return _t;case at:var s=t,a=this.peekCodePoint(0),c=this.peekCodePoint(1);if(vt(s,a,c))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(yt(s,a,c))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(a===at&&62===c)return this.consumeCodePoint(),this.consumeCodePoint(),Ht;break;case 46:if(vt(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var A=this.consumeCodePoint();if(42===A&&47===(A=this.consumeCodePoint()))return this.consumeToken();if(A===ct)return this.consumeToken()}break;case 58:return Rt;case 59:return xt;case 60:if(33===this.peekCodePoint(0)&&this.peekCodePoint(1)===at&&this.peekCodePoint(2)===at)return this.consumeCodePoint(),this.consumeCodePoint(),St;break;case 64:var l=this.peekCodePoint(0),f=this.peekCodePoint(1),d=this.peekCodePoint(2);if(yt(l,f,d))return o=this.consumeName(),{type:h.AT_KEYWORD_TOKEN,value:o};break;case 91:return Dt;case 92:if(gt(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case 93:return Pt;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Ct;break;case 123:return Ot;case 125:return It;case 117:case 85:var p=this.peekCodePoint(0),g=this.peekCodePoint(1);return p!==ut||!lt(g)&&63!==g||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Qt;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),Et;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Ut;break;case ct:return Lt}return ht(t)?(this.consumeWhiteSpace(),kt):At(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):ft(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:h.DELIM_TOKEN,value:u(t)}},t.prototype.consumeCodePoint=function(){var t=this._value.shift();return void 0===t?-1:t},t.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},t.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},t.prototype.consumeUnicodeRangeToken=function(){for(var t=[],e=this.consumeCodePoint();lt(e)&&t.length<6;)t.push(e),e=this.consumeCodePoint();for(var n=!1;63===e&&t.length<6;)t.push(e),e=this.consumeCodePoint(),n=!0;if(n){var r=parseInt(u.apply(void 0,t.map(function(t){return 63===t?48:t})),16),i=parseInt(u.apply(void 0,t.map(function(t){return 63===t?70:t})),16);return{type:h.UNICODE_RANGE_TOKEN,start:r,end:i}}var o=parseInt(u.apply(void 0,t),16);if(this.peekCodePoint(0)===at&&lt(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var s=[];lt(e)&&s.length<6;)s.push(e),e=this.consumeCodePoint();return i=parseInt(u.apply(void 0,s),16),{type:h.UNICODE_RANGE_TOKEN,start:o,end:i}}return{type:h.UNICODE_RANGE_TOKEN,start:o,end:o}},t.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return"url"===t.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:h.FUNCTION_TOKEN,value:t}):{type:h.IDENT_TOKEN,value:t}},t.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===ct)return{type:h.URL_TOKEN,value:""};var e=this.peekCodePoint(0);if(39===e||34===e){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===h.STRING_TOKEN&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===ct||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:h.URL_TOKEN,value:n.value}):(this.consumeBadUrlRemnants(),Ft)}for(;;){var r=this.consumeCodePoint();if(r===ct||41===r)return{type:h.URL_TOKEN,value:u.apply(void 0,t)};if(ht(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===ct||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:h.URL_TOKEN,value:u.apply(void 0,t)}):(this.consumeBadUrlRemnants(),Ft);if(34===r||39===r||40===r||pt(r))return this.consumeBadUrlRemnants(),Ft;if(92===r){if(!gt(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),Ft;t.push(this.consumeEscapedCodePoint())}else t.push(r)}},t.prototype.consumeWhiteSpace=function(){for(;ht(this.peekCodePoint(0));)this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(41===t||t===ct)return;gt(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(t){for(var e="";t>0;){var n=Math.min(6e4,t);e+=u.apply(void 0,this._value.splice(0,n)),t-=n}return this._value.shift(),e},t.prototype.consumeStringToken=function(t){for(var e="",n=0;;){var r=this._value[n];if(r===ct||void 0===r||r===t)return e+=this.consumeStringSlice(n),{type:h.STRING_TOKEN,value:e};if(10===r)return this._value.splice(0,n),Nt;if(92===r){var i=this._value[n+1];i!==ct&&void 0!==i&&(10===i?(e+=this.consumeStringSlice(n),n=-1,this._value.shift()):gt(r,i)&&(e+=this.consumeStringSlice(n),e+=u(this.consumeEscapedCodePoint()),n=-1))}n++}},t.prototype.consumeNumber=function(){var t=[],e=4,n=this.peekCodePoint(0);for(n!==ut&&n!==at||t.push(this.consumeCodePoint());At(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(46===n&&At(r))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;At(this.peekCodePoint(0));)t.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((69===n||101===n)&&((r===ut||r===at)&&At(i)||At(r)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;At(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[mt(t),e]},t.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),e=t[0],n=t[1],r=this.peekCodePoint(0),i=this.peekCodePoint(1),o=this.peekCodePoint(2);if(yt(r,i,o)){var s=this.consumeName();return{type:h.DIMENSION_TOKEN,number:e,flags:n,unit:s}}return 37===r?(this.consumeCodePoint(),{type:h.PERCENTAGE_TOKEN,number:e,flags:n}):{type:h.NUMBER_TOKEN,number:e,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(lt(t)){for(var e=u(t);lt(this.peekCodePoint(0))&&e.length<6;)e+=u(this.consumeCodePoint());ht(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(e,16);return 0===n||function(t){return t>=55296&&t<=57343}(n)||n>1114111?65533:n}return t===ct?65533:t},t.prototype.consumeName=function(){for(var t="";;){var e=this.consumeCodePoint();if(dt(e))t+=u(e);else{if(!gt(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),t;t+=u(this.consumeEscapedCodePoint())}}},t}(),jt=function(){function t(t){this._tokens=t}return t.create=function(e){var n=new Mt;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===h.WHITESPACE_TOKEN;)t=this.consumeToken();if(t.type===h.EOF_TOKEN)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var e=this.consumeComponentValue();do{t=this.consumeToken()}while(t.type===h.WHITESPACE_TOKEN);if(t.type===h.EOF_TOKEN)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){for(var t=[];;){var e=this.consumeComponentValue();if(e.type===h.EOF_TOKEN)return t;t.push(e),t.push()}},t.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case h.LEFT_CURLY_BRACKET_TOKEN:case h.LEFT_SQUARE_BRACKET_TOKEN:case h.LEFT_PARENTHESIS_TOKEN:return this.consumeSimpleBlock(t.type);case h.FUNCTION_TOKEN:return this.consumeFunction(t)}return t},t.prototype.consumeSimpleBlock=function(t){for(var e={type:t,values:[]},n=this.consumeToken();;){if(n.type===h.EOF_TOKEN||Yt(n,t))return e;this.reconsumeToken(n),e.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(t){for(var e={name:t.value,values:[],type:h.FUNCTION};;){var n=this.consumeToken();if(n.type===h.EOF_TOKEN||n.type===h.RIGHT_PARENTHESIS_TOKEN)return e;this.reconsumeToken(n),e.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var t=this._tokens.shift();return void 0===t?Lt:t},t.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},t}(),Kt=function(t){return t.type===h.DIMENSION_TOKEN},Vt=function(t){return t.type===h.NUMBER_TOKEN},zt=function(t){return t.type===h.IDENT_TOKEN},Gt=function(t){return t.type===h.STRING_TOKEN},qt=function(t,e){return zt(t)&&t.value===e},Wt=function(t){return t.type!==h.WHITESPACE_TOKEN},Xt=function(t){return t.type!==h.WHITESPACE_TOKEN&&t.type!==h.COMMA_TOKEN},Jt=function(t){var e=[],n=[];return t.forEach(function(t){if(t.type===h.COMMA_TOKEN){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return e.push(n),void(n=[])}t.type!==h.WHITESPACE_TOKEN&&n.push(t)}),n.length&&e.push(n),e},Yt=function(t,e){return e===h.LEFT_CURLY_BRACKET_TOKEN&&t.type===h.RIGHT_CURLY_BRACKET_TOKEN||e===h.LEFT_SQUARE_BRACKET_TOKEN&&t.type===h.RIGHT_SQUARE_BRACKET_TOKEN||e===h.LEFT_PARENTHESIS_TOKEN&&t.type===h.RIGHT_PARENTHESIS_TOKEN},$t=function(t){return t.type===h.NUMBER_TOKEN||t.type===h.DIMENSION_TOKEN},Zt=function(t){return t.type===h.PERCENTAGE_TOKEN||$t(t)},te=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},ee={type:h.NUMBER_TOKEN,number:0,flags:4},ne={type:h.PERCENTAGE_TOKEN,number:50,flags:4},re={type:h.PERCENTAGE_TOKEN,number:100,flags:4},ie=function(t,e,n){var r=t[0],i=t[1];return[oe(r,e),oe(void 0!==i?i:r,n)]},oe=function(t,e){if(t.type===h.PERCENTAGE_TOKEN)return t.number/100*e;if(Kt(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},se="grad",ae="turn",ue=function(t){if(t.type===h.DIMENSION_TOKEN)switch(t.unit){case"deg":return Math.PI*t.number/180;case se:return Math.PI/200*t.number;case"rad":return t.number;case ae:return 2*Math.PI*t.number}throw new Error("Unsupported angle type")},ce=function(t){return t.type===h.DIMENSION_TOKEN&&("deg"===t.unit||t.unit===se||"rad"===t.unit||t.unit===ae)},Ae=function(t){switch(t.filter(zt).map(function(t){return t.value}).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[ee,ee];case"to top":case"bottom":return le(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[ee,re];case"to right":case"left":return le(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[re,re];case"to bottom":case"top":return le(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[re,ee];case"to left":case"right":return le(270)}return 0},le=function(t){return Math.PI*t/180},he=function(t){if(t.type===h.FUNCTION){var e=_e[t.name];if(void 0===e)throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return e(t.values)}if(t.type===h.HASH_TOKEN){if(3===t.value.length){var n=t.value.substring(0,1),r=t.value.substring(1,2),i=t.value.substring(2,3);return pe(parseInt(n+n,16),parseInt(r+r,16),parseInt(i+i,16),1)}if(4===t.value.length){n=t.value.substring(0,1),r=t.value.substring(1,2),i=t.value.substring(2,3);var o=t.value.substring(3,4);return pe(parseInt(n+n,16),parseInt(r+r,16),parseInt(i+i,16),parseInt(o+o,16)/255)}if(6===t.value.length)return n=t.value.substring(0,2),r=t.value.substring(2,4),i=t.value.substring(4,6),pe(parseInt(n,16),parseInt(r,16),parseInt(i,16),1);if(8===t.value.length)return n=t.value.substring(0,2),r=t.value.substring(2,4),i=t.value.substring(4,6),o=t.value.substring(6,8),pe(parseInt(n,16),parseInt(r,16),parseInt(i,16),parseInt(o,16)/255)}if(t.type===h.IDENT_TOKEN){var s=Be[t.value.toUpperCase()];if(void 0!==s)return s}return Be.TRANSPARENT},fe=function(t){return 0==(255&t)},de=function(t){var e=255&t,n=255&t>>8,r=255&t>>16,i=255&t>>24;return e<255?"rgba("+i+","+r+","+n+","+e/255+")":"rgb("+i+","+r+","+n+")"},pe=function(t,e,n,r){return(t<<24|e<<16|n<<8|Math.round(255*r)<<0)>>>0},ge=function(t,e){if(t.type===h.NUMBER_TOKEN)return t.number;if(t.type===h.PERCENTAGE_TOKEN){var n=3===e?1:255;return 3===e?t.number/100*n:Math.round(t.number/100*n)}return 0},ye=function(t){var e=t.filter(Xt);if(3===e.length){var n=e.map(ge);return pe(n[0],n[1],n[2],1)}if(4===e.length){var r=e.map(ge);return pe(r[0],r[1],r[2],r[3])}return 0};function ve(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<.5?e:n<2/3?6*(e-t)*(2/3-n)+t:t}var me,be,we=function(t){var e=t.filter(Xt),n=e[0],r=e[1],i=e[2],o=e[3],s=(n.type===h.NUMBER_TOKEN?le(n.number):ue(n))/(2*Math.PI),a=Zt(r)?r.number/100:0,u=Zt(i)?i.number/100:0,c=void 0!==o&&Zt(o)?oe(o,1):1;if(0===a)return pe(255*u,255*u,255*u,1);var A=u<=.5?u*(a+1):u+a-u*a,l=2*u-A,f=ve(l,A,s+1/3),d=ve(l,A,s),p=ve(l,A,s-1/3);return pe(255*f,255*d,255*p,c)},_e={hsl:we,hsla:we,rgb:ye,rgba:ye},Be={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199};(function(t){t[t.VALUE=0]="VALUE",t[t.LIST=1]="LIST",t[t.IDENT_VALUE=2]="IDENT_VALUE",t[t.TYPE_VALUE=3]="TYPE_VALUE",t[t.TOKEN_VALUE=4]="TOKEN_VALUE"})(me||(me={})),function(t){t[t.BORDER_BOX=0]="BORDER_BOX",t[t.PADDING_BOX=1]="PADDING_BOX",t[t.CONTENT_BOX=2]="CONTENT_BOX"}(be||(be={}));var Ce,Ee,Qe,Ue={name:"background-clip",initialValue:"border-box",prefix:!1,type:me.LIST,parse:function(t){return t.map(function(t){if(zt(t))switch(t.value){case"padding-box":return be.PADDING_BOX;case"content-box":return be.CONTENT_BOX}return be.BORDER_BOX})}},Oe={name:"background-color",initialValue:"transparent",prefix:!1,type:me.TYPE_VALUE,format:"color"},Ie=function(t){var e=he(t[0]),n=t[1];return n&&Zt(n)?{color:e,stop:n}:{color:e,stop:null}},Te=function(t,e){var n=t[0],r=t[t.length-1];null===n.stop&&(n.stop=ee),null===r.stop&&(r.stop=re);for(var i=[],o=0,s=0;s<t.length;s++){var a=t[s].stop;if(null!==a){var u=oe(a,e);i.push(u>o?u:o),o=u}else i.push(null)}var c=null;for(s=0;s<i.length;s++){var A=i[s];if(null===A)null===c&&(c=s);else if(null!==c){for(var l=s-c,h=(A-i[c-1])/(l+1),f=1;f<=l;f++)i[c+f-1]=h*f;c=null}}return t.map(function(t,n){return{color:t.color,stop:Math.max(Math.min(1,i[n]/e),0)}})},Fe=function(t,e){return Math.sqrt(t*t+e*e)},Ne=function(t,e,n,r,i){return[[0,0],[0,e],[t,0],[t,e]].reduce(function(t,e){var o=Fe(n-e[0],r-e[1]);return(i?o<t.optimumDistance:o>t.optimumDistance)?{optimumCorner:e,optimumDistance:o}:t},{optimumDistance:i?1/0:-1/0,optimumCorner:null}).optimumCorner},Se=function(t){var e=le(180),n=[];return Jt(t).forEach(function(t,r){if(0===r){var i=t[0];if(i.type===h.IDENT_TOKEN&&-1!==["top","left","right","bottom"].indexOf(i.value))return void(e=Ae(t));if(ce(i))return void(e=(ue(i)+le(270))%le(360))}var o=Ie(t);n.push(o)}),{angle:e,stops:n,type:Ce.LINEAR_GRADIENT}},He=function(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]},Re=function(t,e,n,r,i){var o="http://www.w3.org/2000/svg",s=document.createElementNS(o,"svg"),a=document.createElementNS(o,"foreignObject");return s.setAttributeNS(null,"width",t.toString()),s.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",n.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(a),a.appendChild(i),s},xe=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){return e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))})},De={get SUPPORT_RANGE_BOUNDS(){var t=function(t){if(t.createRange){var e=t.createRange();if(e.getBoundingClientRect){var n=t.createElement("boundtest");n.style.height="123px",n.style.display="block",t.body.appendChild(n),e.selectNode(n);var r=e.getBoundingClientRect(),i=Math.round(r.height);if(t.body.removeChild(n),123===i)return!0}}return!1}(document);return Object.defineProperty(De,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=function(t){var e=new Image,n=t.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(e,0,0),n.toDataURL()}catch(i){return!1}return!0}(document);return Object.defineProperty(De,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t="function"==typeof Array.from&&"function"==typeof window.fetch?function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var r=e.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var i=new Image,o=e.toDataURL();i.src=o;var s=Re(n,n,0,0,i);return r.fillStyle="red",r.fillRect(0,0,n,n),xe(s).then(function(e){r.drawImage(e,0,0);var i=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var s=t.createElement("div");return s.style.backgroundImage="url("+o+")",s.style.height="100px",He(i)?xe(Re(n,n,0,0,s)):Promise.reject(!1)}).then(function(t){return r.drawImage(t,0,0),He(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})}(document):Promise.resolve(!1);return Object.defineProperty(De,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=void 0!==(new Image).crossOrigin;return Object.defineProperty(De,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(De,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(De,"SUPPORT_CORS_XHR",{value:t}),t}},Pe=function(){function t(t){var e=t.enabled;this.id=t.id,this.enabled=e,this.start=Date.now()}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,[this.id,this.getTime()+"ms"].concat(t)):this.info.apply(this,t))},t.prototype.getTime=function(){return Date.now()-this.start},t.create=function(e){t.instances[e.id]=new t(e)},t.destroy=function(e){delete t.instances[e]},t.getInstance=function(e){var n=t.instances[e];if(void 0===n)throw new Error("No logger instance found with id "+e);return n},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,[this.id,this.getTime()+"ms"].concat(t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,[this.id,this.getTime()+"ms"].concat(t)):this.info.apply(this,t))},t.instances={},t}(),ke=function(){function t(){}return t.create=function(e,n){return t._caches[e]=new Le(e,n)},t.destroy=function(e){delete t._caches[e]},t.open=function(e){var n=t._caches[e];if(void 0!==n)return n;throw new Error('Cache with key "'+e+'" not found')},t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t.getInstance=function(){var e=t._current;if(null===e)throw new Error("No cache instance attached");return e},t.attachInstance=function(e){t._current=e},t.detachInstance=function(){t._current=null},t._caches={},t._origin="about:blank",t._current=null,t}(),Le=function(){function t(t,e){this.id=t,this._options=e,this._cache={}}return t.prototype.addImage=function(t){var e=Promise.resolve();return this.has(t)?e:qe(t)||Ve(t)?(this._cache[t]=this.loadImage(t),e):e},t.prototype.match=function(t){return this._cache[t]},t.prototype.loadImage=function(t){return r(this,void 0,void 0,function(){var e,n,r,o,s=this;return i(this,function(i){switch(i.label){case 0:return e=ke.isSameOrigin(t),n=!ze(t)&&!0===this._options.useCORS&&De.SUPPORT_CORS_IMAGES&&!e,r=!ze(t)&&!e&&"string"==typeof this._options.proxy&&De.SUPPORT_CORS_XHR&&!n,e||!1!==this._options.allowTaint||ze(t)||r||n?(o=t,r?[4,this.proxy(o)]:[3,2]):[2];case 1:o=i.sent(),i.label=2;case 2:return Pe.getInstance(this.id).debug("Added image "+t.substring(0,256)),[4,new Promise(function(t,e){var r=new Image;r.onload=function(){return t(r)},r.onerror=e,(Ge(o)||n)&&(r.crossOrigin="anonymous"),r.src=o,!0===r.complete&&setTimeout(function(){return t(r)},500),s._options.imageTimeout>0&&setTimeout(function(){return e("Timed out ("+s._options.imageTimeout+"ms) loading image")},s._options.imageTimeout)})];case 3:return[2,i.sent()]}})})},t.prototype.has=function(t){return void 0!==this._cache[t]},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(t){var e=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=t.substring(0,256);return new Promise(function(i,o){var s=De.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;if(a.onload=function(){if(200===a.status)if("text"===s)i(a.response);else{var t=new FileReader;t.addEventListener("load",function(){return i(t.result)},!1),t.addEventListener("error",function(t){return o(t)},!1),t.readAsDataURL(a.response)}else o("Failed to proxy resource "+r+" with status code "+a.status)},a.onerror=o,a.open("GET",n+"?url="+encodeURIComponent(t)+"&responseType="+s),"text"!==s&&a instanceof XMLHttpRequest&&(a.responseType=s),e._options.imageTimeout){var u=e._options.imageTimeout;a.timeout=u,a.ontimeout=function(){return o("Timed out ("+u+"ms) proxying "+r)}}a.send()})},t}(),Me=/^data:image\/svg\+xml/i,je=/^data:image\/.*;base64,/i,Ke=/^data:image\/.*/i,Ve=function(t){return De.SUPPORT_SVG_DRAWING||!We(t)},ze=function(t){return Ke.test(t)},Ge=function(t){return je.test(t)},qe=function(t){return"blob"===t.substr(0,4)},We=function(t){return"svg"===t.substr(-3).toLowerCase()||Me.test(t)},Xe="closest-side",Je="farthest-side",Ye="closest-corner",$e="farthest-corner",Ze="circle",tn="ellipse",en="cover",nn="contain",rn=function(t){var e=Ee.CIRCLE,n=Qe.FARTHEST_CORNER,r=[],i=[];return Jt(t).forEach(function(t,o){var s=!0;if(0===o?s=t.reduce(function(t,e){if(zt(e))switch(e.value){case"center":return i.push(ne),!1;case"top":case"left":return i.push(ee),!1;case"right":case"bottom":return i.push(re),!1}else if(Zt(e)||$t(e))return i.push(e),!1;return t},s):1===o&&(s=t.reduce(function(t,r){if(zt(r))switch(r.value){case Ze:return e=Ee.CIRCLE,!1;case tn:return e=Ee.ELLIPSE,!1;case nn:case Xe:return n=Qe.CLOSEST_SIDE,!1;case Je:return n=Qe.FARTHEST_SIDE,!1;case Ye:return n=Qe.CLOSEST_CORNER,!1;case en:case $e:return n=Qe.FARTHEST_CORNER,!1}else if($t(r)||Zt(r))return Array.isArray(n)||(n=[]),n.push(r),!1;return t},s)),s){var a=Ie(t);r.push(a)}}),{size:n,shape:e,stops:r,position:i,type:Ce.RADIAL_GRADIENT}};!function(t){t[t.URL=0]="URL",t[t.LINEAR_GRADIENT=1]="LINEAR_GRADIENT",t[t.RADIAL_GRADIENT=2]="RADIAL_GRADIENT"}(Ce||(Ce={})),function(t){t[t.CIRCLE=0]="CIRCLE",t[t.ELLIPSE=1]="ELLIPSE"}(Ee||(Ee={})),function(t){t[t.CLOSEST_SIDE=0]="CLOSEST_SIDE",t[t.FARTHEST_SIDE=1]="FARTHEST_SIDE",t[t.CLOSEST_CORNER=2]="CLOSEST_CORNER",t[t.FARTHEST_CORNER=3]="FARTHEST_CORNER"}(Qe||(Qe={}));var on,sn=function(t){if(t.type===h.URL_TOKEN){var e={url:t.value,type:Ce.URL};return ke.getInstance().addImage(t.value),e}if(t.type===h.FUNCTION){var n=an[t.name];if(void 0===n)throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return n(t.values)}throw new Error("Unsupported image type")},an={"linear-gradient":function(t){var e=le(180),n=[];return Jt(t).forEach(function(t,r){if(0===r){var i=t[0];if(i.type===h.IDENT_TOKEN&&"to"===i.value)return void(e=Ae(t));if(ce(i))return void(e=ue(i))}var o=Ie(t);n.push(o)}),{angle:e,stops:n,type:Ce.LINEAR_GRADIENT}},"-moz-linear-gradient":Se,"-ms-linear-gradient":Se,"-o-linear-gradient":Se,"-webkit-linear-gradient":Se,"radial-gradient":function(t){var e=Ee.CIRCLE,n=Qe.FARTHEST_CORNER,r=[],i=[];return Jt(t).forEach(function(t,o){var s=!0;if(0===o){var a=!1;s=t.reduce(function(t,r){if(a)if(zt(r))switch(r.value){case"center":return i.push(ne),t;case"top":case"left":return i.push(ee),t;case"right":case"bottom":return i.push(re),t}else(Zt(r)||$t(r))&&i.push(r);else if(zt(r))switch(r.value){case Ze:return e=Ee.CIRCLE,!1;case tn:return e=Ee.ELLIPSE,!1;case"at":return a=!0,!1;case Xe:return n=Qe.CLOSEST_SIDE,!1;case en:case Je:return n=Qe.FARTHEST_SIDE,!1;case nn:case Ye:return n=Qe.CLOSEST_CORNER,!1;case $e:return n=Qe.FARTHEST_CORNER,!1}else if($t(r)||Zt(r))return Array.isArray(n)||(n=[]),n.push(r),!1;return t},s)}if(s){var u=Ie(t);r.push(u)}}),{size:n,shape:e,stops:r,position:i,type:Ce.RADIAL_GRADIENT}},"-moz-radial-gradient":rn,"-ms-radial-gradient":rn,"-o-radial-gradient":rn,"-webkit-radial-gradient":rn,"-webkit-gradient":function(t){var e=le(180),n=[],r=Ce.LINEAR_GRADIENT,i=Ee.CIRCLE,o=Qe.FARTHEST_CORNER;return Jt(t).forEach(function(t,e){var i=t[0];if(0===e){if(zt(i)&&"linear"===i.value)return void(r=Ce.LINEAR_GRADIENT);if(zt(i)&&"radial"===i.value)return void(r=Ce.RADIAL_GRADIENT)}if(i.type===h.FUNCTION)if("from"===i.name){var o=he(i.values[0]);n.push({stop:ee,color:o})}else if("to"===i.name)o=he(i.values[0]),n.push({stop:re,color:o});else if("color-stop"===i.name){var s=i.values.filter(Xt);if(2===s.length){o=he(s[1]);var a=s[0];Vt(a)&&n.push({stop:{type:h.PERCENTAGE_TOKEN,number:100*a.number,flags:a.flags},color:o})}}}),r===Ce.LINEAR_GRADIENT?{angle:(e+le(180))%le(360),stops:n,type:r}:{size:o,shape:i,stops:n,position:[],type:r}}},un={name:"background-image",initialValue:"none",type:me.LIST,prefix:!1,parse:function(t){if(0===t.length)return[];var e=t[0];return e.type===h.IDENT_TOKEN&&"none"===e.value?[]:t.filter(function(t){return Xt(t)&&function(t){return t.type!==h.FUNCTION||an[t.name]}(t)}).map(sn)}},cn={name:"background-origin",initialValue:"border-box",prefix:!1,type:me.LIST,parse:function(t){return t.map(function(t){if(zt(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},An={name:"background-position",initialValue:"0% 0%",type:me.LIST,prefix:!1,parse:function(t){return Jt(t).map(function(t){return t.filter(Zt)}).map(te)}};!function(t){t[t.REPEAT=0]="REPEAT",t[t.NO_REPEAT=1]="NO_REPEAT",t[t.REPEAT_X=2]="REPEAT_X",t[t.REPEAT_Y=3]="REPEAT_Y"}(on||(on={}));var ln,hn={name:"background-repeat",initialValue:"repeat",prefix:!1,type:me.LIST,parse:function(t){return Jt(t).map(function(t){return t.filter(zt).map(function(t){return t.value}).join(" ")}).map(fn)}},fn=function(t){switch(t){case"no-repeat":return on.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return on.REPEAT_X;case"repeat-y":case"no-repeat repeat":return on.REPEAT_Y;case"repeat":default:return on.REPEAT}};!function(t){t.AUTO="auto",t.CONTAIN="contain",t.COVER="cover"}(ln||(ln={}));var dn,pn={name:"background-size",initialValue:"0",prefix:!1,type:me.LIST,parse:function(t){return Jt(t).map(function(t){return t.filter(gn)})}},gn=function(t){return zt(t)||Zt(t)},yn=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:me.TYPE_VALUE,format:"color"}},vn=yn("top"),mn=yn("right"),bn=yn("bottom"),wn=yn("left"),_n=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:me.LIST,parse:function(t){return te(t.filter(Zt))}}},Bn=_n("top-left"),Cn=_n("top-right"),En=_n("bottom-right"),Qn=_n("bottom-left");!function(t){t[t.NONE=0]="NONE",t[t.SOLID=1]="SOLID"}(dn||(dn={}));var Un,On=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:me.IDENT_VALUE,parse:function(t){switch(t){case"none":return dn.NONE}return dn.SOLID}}},In=On("top"),Tn=On("right"),Fn=On("bottom"),Nn=On("left"),Sn=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:me.VALUE,prefix:!1,parse:function(t){return Kt(t)?t.number:0}}},Hn=Sn("top"),Rn=Sn("right"),xn=Sn("bottom"),Dn=Sn("left"),Pn={name:"color",initialValue:"transparent",prefix:!1,type:me.TYPE_VALUE,format:"color"},kn={name:"display",initialValue:"inline-block",prefix:!1,type:me.LIST,parse:function(t){return t.filter(zt).reduce(function(t,e){return t|Ln(e.value)},0)}},Ln=function(t){switch(t){case"block":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0};!function(t){t[t.NONE=0]="NONE",t[t.LEFT=1]="LEFT",t[t.RIGHT=2]="RIGHT",t[t.INLINE_START=3]="INLINE_START",t[t.INLINE_END=4]="INLINE_END"}(Un||(Un={}));var Mn,jn={name:"float",initialValue:"none",prefix:!1,type:me.IDENT_VALUE,parse:function(t){switch(t){case"left":return Un.LEFT;case"right":return Un.RIGHT;case"inline-start":return Un.INLINE_START;case"inline-end":return Un.INLINE_END}return Un.NONE}},Kn={name:"letter-spacing",initialValue:"0",prefix:!1,type:me.VALUE,parse:function(t){return t.type===h.IDENT_TOKEN&&"normal"===t.value?0:t.type===h.NUMBER_TOKEN||t.type===h.DIMENSION_TOKEN?t.number:0}};!function(t){t.NORMAL="normal",t.STRICT="strict"}(Mn||(Mn={}));var Vn,zn={name:"line-break",initialValue:"normal",prefix:!1,type:me.IDENT_VALUE,parse:function(t){switch(t){case"strict":return Mn.STRICT;case"normal":default:return Mn.NORMAL}}},Gn={name:"line-height",initialValue:"normal",prefix:!1,type:me.TOKEN_VALUE},qn={name:"list-style-image",initialValue:"none",type:me.VALUE,prefix:!1,parse:function(t){return t.type===h.IDENT_TOKEN&&"none"===t.value?null:sn(t)}};!function(t){t[t.INSIDE=0]="INSIDE",t[t.OUTSIDE=1]="OUTSIDE"}(Vn||(Vn={}));var Wn,Xn={name:"list-style-position",initialValue:"outside",prefix:!1,type:me.IDENT_VALUE,parse:function(t){switch(t){case"inside":return Vn.INSIDE;case"outside":default:return Vn.OUTSIDE}}};!function(t){t[t.NONE=-1]="NONE",t[t.DISC=0]="DISC",t[t.CIRCLE=1]="CIRCLE",t[t.SQUARE=2]="SQUARE",t[t.DECIMAL=3]="DECIMAL",t[t.CJK_DECIMAL=4]="CJK_DECIMAL",t[t.DECIMAL_LEADING_ZERO=5]="DECIMAL_LEADING_ZERO",t[t.LOWER_ROMAN=6]="LOWER_ROMAN",t[t.UPPER_ROMAN=7]="UPPER_ROMAN",t[t.LOWER_GREEK=8]="LOWER_GREEK",t[t.LOWER_ALPHA=9]="LOWER_ALPHA",t[t.UPPER_ALPHA=10]="UPPER_ALPHA",t[t.ARABIC_INDIC=11]="ARABIC_INDIC",t[t.ARMENIAN=12]="ARMENIAN",t[t.BENGALI=13]="BENGALI",t[t.CAMBODIAN=14]="CAMBODIAN",t[t.CJK_EARTHLY_BRANCH=15]="CJK_EARTHLY_BRANCH",t[t.CJK_HEAVENLY_STEM=16]="CJK_HEAVENLY_STEM",t[t.CJK_IDEOGRAPHIC=17]="CJK_IDEOGRAPHIC",t[t.DEVANAGARI=18]="DEVANAGARI",t[t.ETHIOPIC_NUMERIC=19]="ETHIOPIC_NUMERIC",t[t.GEORGIAN=20]="GEORGIAN",t[t.GUJARATI=21]="GUJARATI",t[t.GURMUKHI=22]="GURMUKHI",t[t.HEBREW=22]="HEBREW",t[t.HIRAGANA=23]="HIRAGANA",t[t.HIRAGANA_IROHA=24]="HIRAGANA_IROHA",t[t.JAPANESE_FORMAL=25]="JAPANESE_FORMAL",t[t.JAPANESE_INFORMAL=26]="JAPANESE_INFORMAL",t[t.KANNADA=27]="KANNADA",t[t.KATAKANA=28]="KATAKANA",t[t.KATAKANA_IROHA=29]="KATAKANA_IROHA",t[t.KHMER=30]="KHMER",t[t.KOREAN_HANGUL_FORMAL=31]="KOREAN_HANGUL_FORMAL",t[t.KOREAN_HANJA_FORMAL=32]="KOREAN_HANJA_FORMAL",t[t.KOREAN_HANJA_INFORMAL=33]="KOREAN_HANJA_INFORMAL",t[t.LAO=34]="LAO",t[t.LOWER_ARMENIAN=35]="LOWER_ARMENIAN",t[t.MALAYALAM=36]="MALAYALAM",t[t.MONGOLIAN=37]="MONGOLIAN",t[t.MYANMAR=38]="MYANMAR",t[t.ORIYA=39]="ORIYA",t[t.PERSIAN=40]="PERSIAN",t[t.SIMP_CHINESE_FORMAL=41]="SIMP_CHINESE_FORMAL",t[t.SIMP_CHINESE_INFORMAL=42]="SIMP_CHINESE_INFORMAL",t[t.TAMIL=43]="TAMIL",t[t.TELUGU=44]="TELUGU",t[t.THAI=45]="THAI",t[t.TIBETAN=46]="TIBETAN",t[t.TRAD_CHINESE_FORMAL=47]="TRAD_CHINESE_FORMAL",t[t.TRAD_CHINESE_INFORMAL=48]="TRAD_CHINESE_INFORMAL",t[t.UPPER_ARMENIAN=49]="UPPER_ARMENIAN",t[t.DISCLOSURE_OPEN=50]="DISCLOSURE_OPEN",t[t.DISCLOSURE_CLOSED=51]="DISCLOSURE_CLOSED"}(Wn||(Wn={}));var Jn,Yn={name:"list-style-type",initialValue:"none",prefix:!1,type:me.IDENT_VALUE,parse:function(t){switch(t){case"disc":return Wn.DISC;case"circle":return Wn.CIRCLE;case"square":return Wn.SQUARE;case"decimal":return Wn.DECIMAL;case"cjk-decimal":return Wn.CJK_DECIMAL;case"decimal-leading-zero":return Wn.DECIMAL_LEADING_ZERO;case"lower-roman":return Wn.LOWER_ROMAN;case"upper-roman":return Wn.UPPER_ROMAN;case"lower-greek":return Wn.LOWER_GREEK;case"lower-alpha":return Wn.LOWER_ALPHA;case"upper-alpha":return Wn.UPPER_ALPHA;case"arabic-indic":return Wn.ARABIC_INDIC;case"armenian":return Wn.ARMENIAN;case"bengali":return Wn.BENGALI;case"cambodian":return Wn.CAMBODIAN;case"cjk-earthly-branch":return Wn.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return Wn.CJK_HEAVENLY_STEM;case"cjk-ideographic":return Wn.CJK_IDEOGRAPHIC;case"devanagari":return Wn.DEVANAGARI;case"ethiopic-numeric":return Wn.ETHIOPIC_NUMERIC;case"georgian":return Wn.GEORGIAN;case"gujarati":return Wn.GUJARATI;case"gurmukhi":return Wn.GURMUKHI;case"hebrew":return Wn.HEBREW;case"hiragana":return Wn.HIRAGANA;case"hiragana-iroha":return Wn.HIRAGANA_IROHA;case"japanese-formal":return Wn.JAPANESE_FORMAL;case"japanese-informal":return Wn.JAPANESE_INFORMAL;case"kannada":return Wn.KANNADA;case"katakana":return Wn.KATAKANA;case"katakana-iroha":return Wn.KATAKANA_IROHA;case"khmer":return Wn.KHMER;case"korean-hangul-formal":return Wn.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return Wn.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return Wn.KOREAN_HANJA_INFORMAL;case"lao":return Wn.LAO;case"lower-armenian":return Wn.LOWER_ARMENIAN;case"malayalam":return Wn.MALAYALAM;case"mongolian":return Wn.MONGOLIAN;case"myanmar":return Wn.MYANMAR;case"oriya":return Wn.ORIYA;case"persian":return Wn.PERSIAN;case"simp-chinese-formal":return Wn.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return Wn.SIMP_CHINESE_INFORMAL;case"tamil":return Wn.TAMIL;case"telugu":return Wn.TELUGU;case"thai":return Wn.THAI;case"tibetan":return Wn.TIBETAN;case"trad-chinese-formal":return Wn.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return Wn.TRAD_CHINESE_INFORMAL;case"upper-armenian":return Wn.UPPER_ARMENIAN;case"disclosure-open":return Wn.DISCLOSURE_OPEN;case"disclosure-closed":return Wn.DISCLOSURE_CLOSED;case"none":default:return Wn.NONE}}},$n=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:me.TOKEN_VALUE}},Zn=$n("top"),tr=$n("right"),er=$n("bottom"),nr=$n("left");!function(t){t[t.VISIBLE=0]="VISIBLE",t[t.HIDDEN=1]="HIDDEN",t[t.SCROLL=2]="SCROLL",t[t.AUTO=3]="AUTO"}(Jn||(Jn={}));var rr,ir={name:"overflow",initialValue:"visible",prefix:!1,type:me.LIST,parse:function(t){return t.filter(zt).map(function(t){switch(t.value){case"hidden":return Jn.HIDDEN;case"scroll":return Jn.SCROLL;case"auto":return Jn.AUTO;case"visible":default:return Jn.VISIBLE}})}};!function(t){t.NORMAL="normal",t.BREAK_WORD="break-word"}(rr||(rr={}));var or,sr={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:me.IDENT_VALUE,parse:function(t){switch(t){case"break-word":return rr.BREAK_WORD;case"normal":default:return rr.NORMAL}}},ar=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:me.TYPE_VALUE,format:"length-percentage"}},ur=ar("top"),cr=ar("right"),Ar=ar("bottom"),lr=ar("left");!function(t){t[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT"}(or||(or={}));var hr,fr={name:"text-align",initialValue:"left",prefix:!1,type:me.IDENT_VALUE,parse:function(t){switch(t){case"right":return or.RIGHT;case"center":case"justify":return or.CENTER;case"left":default:return or.LEFT}}};!function(t){t[t.STATIC=0]="STATIC",t[t.RELATIVE=1]="RELATIVE",t[t.ABSOLUTE=2]="ABSOLUTE",t[t.FIXED=3]="FIXED",t[t.STICKY=4]="STICKY"}(hr||(hr={}));var dr,pr={name:"position",initialValue:"static",prefix:!1,type:me.IDENT_VALUE,parse:function(t){switch(t){case"relative":return hr.RELATIVE;case"absolute":return hr.ABSOLUTE;case"fixed":return hr.FIXED;case"sticky":return hr.STICKY}return hr.STATIC}},gr={name:"text-shadow",initialValue:"none",type:me.LIST,prefix:!1,parse:function(t){return 1===t.length&&qt(t[0],"none")?[]:Jt(t).map(function(t){for(var e={color:Be.TRANSPARENT,offsetX:ee,offsetY:ee,blur:ee},n=0,r=0;r<t.length;r++){var i=t[r];$t(i)?(0===n?e.offsetX=i:1===n?e.offsetY=i:e.blur=i,n++):e.color=he(i)}return e})}};!function(t){t[t.NONE=0]="NONE",t[t.LOWERCASE=1]="LOWERCASE",t[t.UPPERCASE=2]="UPPERCASE",t[t.CAPITALIZE=3]="CAPITALIZE"}(dr||(dr={}));var yr,vr={name:"text-transform",initialValue:"none",prefix:!1,type:me.IDENT_VALUE,parse:function(t){switch(t){case"uppercase":return dr.UPPERCASE;case"lowercase":return dr.LOWERCASE;case"capitalize":return dr.CAPITALIZE}return dr.NONE}},mr={name:"transform",initialValue:"none",prefix:!0,type:me.VALUE,parse:function(t){if(t.type===h.IDENT_TOKEN&&"none"===t.value)return null;if(t.type===h.FUNCTION){var e=br[t.name];if(void 0===e)throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return e(t.values)}return null}},br={matrix:function(t){var e=t.filter(function(t){return t.type===h.NUMBER_TOKEN}).map(function(t){return t.number});return 6===e.length?e:null},matrix3d:function(t){var e=t.filter(function(t){return t.type===h.NUMBER_TOKEN}).map(function(t){return t.number});return 16===e.length?[e[0],e[1],e[4],e[5],e[12],e[13]]:null}},wr={type:h.PERCENTAGE_TOKEN,number:50,flags:4},_r=[wr,wr],Br={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:me.LIST,parse:function(t){var e=t.filter(Zt);return 2!==e.length?_r:[e[0],e[1]]}};!function(t){t[t.VISIBLE=0]="VISIBLE",t[t.HIDDEN=1]="HIDDEN",t[t.COLLAPSE=2]="COLLAPSE"}(yr||(yr={}));var Cr,Er={name:"visible",initialValue:"none",prefix:!1,type:me.IDENT_VALUE,parse:function(t){switch(t){case"hidden":return yr.HIDDEN;case"collapse":return yr.COLLAPSE;case"visible":default:return yr.VISIBLE}}};!function(t){t.NORMAL="normal",t.BREAK_ALL="break-all",t.KEEP_ALL="keep-all"}(Cr||(Cr={}));var Qr,Ur={name:"word-break",initialValue:"normal",prefix:!1,type:me.IDENT_VALUE,parse:function(t){switch(t){case"break-all":return Cr.BREAK_ALL;case"keep-all":return Cr.KEEP_ALL;case"normal":default:return Cr.NORMAL}}},Or={name:"z-index",initialValue:"auto",prefix:!1,type:me.VALUE,parse:function(t){if(t.type===h.IDENT_TOKEN)return{auto:!0,order:0};if(Vt(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Ir={name:"opacity",initialValue:"1",type:me.VALUE,prefix:!1,parse:function(t){return Vt(t)?t.number:1}},Tr={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:me.TYPE_VALUE,format:"color"},Fr={name:"text-decoration-line",initialValue:"none",prefix:!1,type:me.LIST,parse:function(t){return t.filter(zt).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return 0!==t})}},Nr={name:"font-family",initialValue:"",prefix:!1,type:me.LIST,parse:function(t){var e=[],n=[];return t.forEach(function(t){switch(t.type){case h.IDENT_TOKEN:case h.STRING_TOKEN:e.push(t.value);break;case h.NUMBER_TOKEN:e.push(t.number.toString());break;case h.COMMA_TOKEN:n.push(e.join(" ")),e.length=0}}),e.length&&n.push(e.join(" ")),n.map(function(t){return-1===t.indexOf(" ")?t:"'"+t+"'"})}},Sr={name:"font-size",initialValue:"0",prefix:!1,type:me.TYPE_VALUE,format:"length"},Hr={name:"font-weight",initialValue:"normal",type:me.VALUE,prefix:!1,parse:function(t){if(Vt(t))return t.number;if(zt(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},Rr={name:"font-variant",initialValue:"none",type:me.LIST,prefix:!1,parse:function(t){return t.filter(zt).map(function(t){return t.value})}};!function(t){t.NORMAL="normal",t.ITALIC="italic",t.OBLIQUE="oblique"}(Qr||(Qr={}));var xr,Dr={name:"font-style",initialValue:"normal",prefix:!1,type:me.IDENT_VALUE,parse:function(t){switch(t){case"oblique":return Qr.OBLIQUE;case"italic":return Qr.ITALIC;case"normal":default:return Qr.NORMAL}}},Pr=function(t,e){return 0!=(t&e)},kr={name:"content",initialValue:"none",type:me.LIST,prefix:!1,parse:function(t){if(0===t.length)return[];var e=t[0];return e.type===h.IDENT_TOKEN&&"none"===e.value?[]:t}},Lr={name:"counter-increment",initialValue:"none",prefix:!0,type:me.LIST,parse:function(t){if(0===t.length)return null;var e=t[0];if(e.type===h.IDENT_TOKEN&&"none"===e.value)return null;for(var n=[],r=t.filter(Wt),i=0;i<r.length;i++){var o=r[i],s=r[i+1];if(o.type===h.IDENT_TOKEN){var a=s&&Vt(s)?s.number:1;n.push({counter:o.value,increment:a})}}return n}},Mr={name:"counter-reset",initialValue:"none",prefix:!0,type:me.LIST,parse:function(t){if(0===t.length)return[];for(var e=[],n=t.filter(Wt),r=0;r<n.length;r++){var i=n[r],o=n[r+1];if(zt(i)&&"none"!==i.value){var s=o&&Vt(o)?o.number:0;e.push({counter:i.value,reset:s})}}return e}},jr={name:"quotes",initialValue:"none",prefix:!0,type:me.LIST,parse:function(t){if(0===t.length)return null;var e=t[0];if(e.type===h.IDENT_TOKEN&&"none"===e.value)return null;var n=[],r=t.filter(Gt);if(r.length%2!=0)return null;for(var i=0;i<r.length;i+=2)n.push({open:r[i].value,close:r[i+1].value});return n}},Kr=function(t,e,n){if(!t)return"";var r=t[Math.min(e,t.length-1)];return r?n?r.open:r.close:""},Vr={name:"box-shadow",initialValue:"none",type:me.LIST,prefix:!1,parse:function(t){return 1===t.length&&qt(t[0],"none")?[]:Jt(t).map(function(t){for(var e={color:255,offsetX:ee,offsetY:ee,blur:ee,spread:ee,inset:!1},n=0,r=0;r<t.length;r++){var i=t[r];qt(i,"inset")?e.inset=!0:$t(i)?(0===n?e.offsetX=i:1===n?e.offsetY=i:2===n?e.blur=i:e.spread=i,n++):e.color=he(i)}return e})}},zr=function(){function t(t){this.backgroundClip=Wr(Ue,t.backgroundClip),this.backgroundColor=Wr(Oe,t.backgroundColor),this.backgroundImage=Wr(un,t.backgroundImage),this.backgroundOrigin=Wr(cn,t.backgroundOrigin),this.backgroundPosition=Wr(An,t.backgroundPosition),this.backgroundRepeat=Wr(hn,t.backgroundRepeat),this.backgroundSize=Wr(pn,t.backgroundSize),this.borderTopColor=Wr(vn,t.borderTopColor),this.borderRightColor=Wr(mn,t.borderRightColor),this.borderBottomColor=Wr(bn,t.borderBottomColor),this.borderLeftColor=Wr(wn,t.borderLeftColor),this.borderTopLeftRadius=Wr(Bn,t.borderTopLeftRadius),this.borderTopRightRadius=Wr(Cn,t.borderTopRightRadius),this.borderBottomRightRadius=Wr(En,t.borderBottomRightRadius),this.borderBottomLeftRadius=Wr(Qn,t.borderBottomLeftRadius),this.borderTopStyle=Wr(In,t.borderTopStyle),this.borderRightStyle=Wr(Tn,t.borderRightStyle),this.borderBottomStyle=Wr(Fn,t.borderBottomStyle),this.borderLeftStyle=Wr(Nn,t.borderLeftStyle),this.borderTopWidth=Wr(Hn,t.borderTopWidth),this.borderRightWidth=Wr(Rn,t.borderRightWidth),this.borderBottomWidth=Wr(xn,t.borderBottomWidth),this.borderLeftWidth=Wr(Dn,t.borderLeftWidth),this.boxShadow=Wr(Vr,t.boxShadow),this.color=Wr(Pn,t.color),this.display=Wr(kn,t.display),this.float=Wr(jn,t.cssFloat),this.fontFamily=Wr(Nr,t.fontFamily),this.fontSize=Wr(Sr,t.fontSize),this.fontStyle=Wr(Dr,t.fontStyle),this.fontVariant=Wr(Rr,t.fontVariant),this.fontWeight=Wr(Hr,t.fontWeight),this.letterSpacing=Wr(Kn,t.letterSpacing),this.lineBreak=Wr(zn,t.lineBreak),this.lineHeight=Wr(Gn,t.lineHeight),this.listStyleImage=Wr(qn,t.listStyleImage),this.listStylePosition=Wr(Xn,t.listStylePosition),this.listStyleType=Wr(Yn,t.listStyleType),this.marginTop=Wr(Zn,t.marginTop),this.marginRight=Wr(tr,t.marginRight),this.marginBottom=Wr(er,t.marginBottom),this.marginLeft=Wr(nr,t.marginLeft),this.opacity=Wr(Ir,t.opacity);var e=Wr(ir,t.overflow);this.overflowX=e[0],this.overflowY=e[e.length>1?1:0],this.overflowWrap=Wr(sr,t.overflowWrap),this.paddingTop=Wr(ur,t.paddingTop),this.paddingRight=Wr(cr,t.paddingRight),this.paddingBottom=Wr(Ar,t.paddingBottom),this.paddingLeft=Wr(lr,t.paddingLeft),this.position=Wr(pr,t.position),this.textAlign=Wr(fr,t.textAlign),this.textDecorationColor=Wr(Tr,t.textDecorationColor||t.color),this.textDecorationLine=Wr(Fr,t.textDecorationLine),this.textShadow=Wr(gr,t.textShadow),this.textTransform=Wr(vr,t.textTransform),this.transform=Wr(mr,t.transform),this.transformOrigin=Wr(Br,t.transformOrigin),this.visibility=Wr(Er,t.visibility),this.wordBreak=Wr(Ur,t.wordBreak),this.zIndex=Wr(Or,t.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===yr.VISIBLE},t.prototype.isTransparent=function(){return fe(this.backgroundColor)},t.prototype.isTransformed=function(){return null!==this.transform},t.prototype.isPositioned=function(){return this.position!==hr.STATIC},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return this.float!==Un.NONE},t.prototype.isInlineLevel=function(){return Pr(this.display,4)||Pr(this.display,33554432)||Pr(this.display,268435456)||Pr(this.display,536870912)||Pr(this.display,67108864)||Pr(this.display,134217728)},t}(),Gr=function(t){this.content=Wr(kr,t.content),this.quotes=Wr(jr,t.quotes)},qr=function(t){this.counterIncrement=Wr(Lr,t.counterIncrement),this.counterReset=Wr(Mr,t.counterReset)},Wr=function(t,e){var n=new Mt,r=null!=e?e.toString():t.initialValue;n.write(r);var i=new jt(n.read());switch(t.type){case me.IDENT_VALUE:var o=i.parseComponentValue();return t.parse(zt(o)?o.value:t.initialValue);case me.VALUE:return t.parse(i.parseComponentValue());case me.LIST:return t.parse(i.parseComponentValues());case me.TOKEN_VALUE:return i.parseComponentValue();case me.TYPE_VALUE:switch(t.format){case"angle":return ue(i.parseComponentValue());case"color":return he(i.parseComponentValue());case"image":return sn(i.parseComponentValue());case"length":var s=i.parseComponentValue();return $t(s)?s:ee;case"length-percentage":var a=i.parseComponentValue();return Zt(a)?a:ee}}throw new Error("Attempting to parse unsupported css format type "+t.format)},Xr=function(t){this.styles=new zr(window.getComputedStyle(t,null)),this.textNodes=[],this.elements=[],null!==this.styles.transform&&Ei(t)&&(t.style.transform="none"),this.bounds=s(t),this.flags=0},Jr=function(t,e){this.text=t,this.bounds=e},Yr=function(t,e){for(var n,r=function(t,e){var n=a(t),r=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=function(t,e){void 0===e&&(e="strict");var n=[],r=[],i=[];return t.forEach(function(t,o){var s=X.get(t);if(s>50?(i.push(!0),s-=50):i.push(!1),-1!==["normal","auto","loose"].indexOf(e)&&-1!==[8208,8211,12316,12448].indexOf(t))return r.push(o),n.push(16);if(4===s||11===s){if(0===o)return r.push(o),n.push(D);var a=n[o-1];return-1===tt.indexOf(a)?(r.push(r[o-1]),n.push(a)):(r.push(o),n.push(D))}return r.push(o),31===s?n.push("strict"===e?T:j):s===G||29===s?n.push(D):43===s?n.push(t>=131072&&t<=196605||t>=196608&&t<=262141?j:D):void n.push(s)}),[r,n,i]}(t,e.lineBreak),r=n[0],i=n[1],o=n[2];return"break-all"!==e.wordBreak&&"break-word"!==e.wordBreak||(i=i.map(function(t){return-1!==[S,D,G].indexOf(t)?j:t})),[r,i,"keep-all"===e.wordBreak?o.map(function(e,n){return e&&t[n]>=19968&&t[n]<=40959}):void 0]}(n,e),i=r[0],o=r[1],s=r[2],u=n.length,c=0,A=0;return{next:function(){if(A>=u)return{done:!0,value:null};for(var t=q;A<u&&(t=ot(n,o,i,++A,s))===q;);if(t!==q||A===u){var e=new st(n,t,c,A);return c=A,{value:e,done:!1}}return{done:!0,value:null}}}}(t,{lineBreak:e.lineBreak,wordBreak:e.overflowWrap===rr.BREAK_WORD?"break-word":e.wordBreak}),i=[];!(n=r.next()).done;)n.value&&i.push(n.value.slice());return i},$r=function(t,e){this.text=Zr(t.data,e.textTransform),this.textBounds=function(t,e,n){var r=function(t,e){return 0!==e.letterSpacing?a(t).map(function(t){return u(t)}):Yr(t,e)}(t,e),i=[],c=0;return r.forEach(function(t){if(e.textDecorationLine.length||t.trim().length>0)if(De.SUPPORT_RANGE_BOUNDS)i.push(new Jr(t,function(t,e,n){var r=t.ownerDocument;if(!r)throw new Error("Node has no owner document");var i=r.createRange();return i.setStart(t,e),i.setEnd(t,e+n),o.fromClientRect(i.getBoundingClientRect())}(n,c,t.length)));else{var r=n.splitText(t.length);i.push(new Jr(t,function(t){var e=t.ownerDocument;if(e){var n=e.createElement("html2canvaswrapper");n.appendChild(t.cloneNode(!0));var r=t.parentNode;if(r){r.replaceChild(n,t);var i=s(n);return n.firstChild&&r.replaceChild(n.firstChild,n),i}}return new o(0,0,0,0)}(n))),n=r}else De.SUPPORT_RANGE_BOUNDS||(n=n.splitText(t.length));c+=t.length}),i}(this.text,e,t)},Zr=function(t,e){switch(e){case dr.LOWERCASE:return t.toLowerCase();case dr.CAPITALIZE:return t.replace(ti,ei);case dr.UPPERCASE:return t.toUpperCase();default:return t}},ti=/(^|\s|:|-|\(|\))([a-z])/g,ei=function(t,e,n){return t.length>0?e+n.toUpperCase():t},ni=function(t){function n(e){var n=t.call(this,e)||this;return n.src=e.currentSrc||e.src,n.intrinsicWidth=e.naturalWidth,n.intrinsicHeight=e.naturalHeight,ke.getInstance().addImage(n.src),n}return e(n,t),n}(Xr),ri=function(t){function n(e){var n=t.call(this,e)||this;return n.canvas=e,n.intrinsicWidth=e.width,n.intrinsicHeight=e.height,n}return e(n,t),n}(Xr),ii=function(t){function n(e){var n=t.call(this,e)||this,r=new XMLSerializer;return n.svg="data:image/svg+xml,"+encodeURIComponent(r.serializeToString(e)),n.intrinsicWidth=e.width.baseVal.value,n.intrinsicHeight=e.height.baseVal.value,ke.getInstance().addImage(n.svg),n}return e(n,t),n}(Xr),oi=function(t){function n(e){var n=t.call(this,e)||this;return n.value=e.value,n}return e(n,t),n}(Xr),si=function(t){function n(e){var n=t.call(this,e)||this;return n.start=e.start,n.reversed="boolean"==typeof e.reversed&&!0===e.reversed,n}return e(n,t),n}(Xr),ai=[{type:h.DIMENSION_TOKEN,flags:0,unit:"px",number:3}],ui=[{type:h.PERCENTAGE_TOKEN,flags:0,number:50}],ci="checkbox",Ai="radio",li=707406591,hi=function(t){function n(e){var n,r,i,s=t.call(this,e)||this;switch(s.type=e.type.toLowerCase(),s.checked=e.checked,s.value=0===(i="password"===(r=e).type?new Array(r.value.length+1).join("\u2022"):r.value).length?r.placeholder||"":i,s.type!==ci&&s.type!==Ai||(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=dn.SOLID,s.styles.backgroundClip=[be.BORDER_BOX],s.styles.backgroundOrigin=[0],s.bounds=(n=s.bounds).width>n.height?new o(n.left+(n.width-n.height)/2,n.top,n.height,n.height):n.width<n.height?new o(n.left,n.top+(n.height-n.width)/2,n.width,n.width):n),s.type){case ci:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=ai;break;case Ai:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=ui}return s}return e(n,t),n}(Xr),fi=function(t){function n(e){var n=t.call(this,e)||this,r=e.options[e.selectedIndex||0];return n.value=r&&r.text||"",n}return e(n,t),n}(Xr),di=function(t){function n(e){var n=t.call(this,e)||this;return n.value=e.value,n}return e(n,t),n}(Xr),pi=function(t){return he(jt.create(t).parseComponentValue())},gi=function(t){function n(e){var n=t.call(this,e)||this;n.src=e.src,n.width=parseInt(e.width,10)||0,n.height=parseInt(e.height,10)||0,n.backgroundColor=n.styles.backgroundColor;try{if(e.contentWindow&&e.contentWindow.document&&e.contentWindow.document.documentElement){n.tree=bi(e.contentWindow.document.documentElement);var r=e.contentWindow.document.documentElement?pi(getComputedStyle(e.contentWindow.document.documentElement).backgroundColor):Be.TRANSPARENT,i=e.contentWindow.document.body?pi(getComputedStyle(e.contentWindow.document.body).backgroundColor):Be.TRANSPARENT;n.backgroundColor=fe(r)?fe(i)?n.styles.backgroundColor:i:r}}catch(o){}return n}return e(n,t),n}(Xr),yi=["OL","UL","MENU"],vi=function(t,e,n){for(var r=t.firstChild,i=void 0;r;r=i)if(i=r.nextSibling,Bi(r)&&r.data.trim().length>0)e.textNodes.push(new $r(r,e.styles));else if(Ci(r)){var o=mi(r);o.styles.isVisible()&&(wi(r,o,n)?o.flags|=4:_i(o.styles)&&(o.flags|=2),-1!==yi.indexOf(r.tagName)&&(o.flags|=8),e.elements.push(o),Di(r)||Ti(r)||Pi(r)||vi(r,o,n))}},mi=function(t){return Si(t)?new ni(t):Ni(t)?new ri(t):Ti(t)?new ii(t):Ui(t)?new oi(t):Oi(t)?new si(t):Ii(t)?new hi(t):Pi(t)?new fi(t):Di(t)?new di(t):Hi(t)?new gi(t):new Xr(t)},bi=function(t){var e=mi(t);return e.flags|=4,vi(t,e,e),e},wi=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||Fi(t)&&n.styles.isTransparent()},_i=function(t){return t.isPositioned()||t.isFloating()},Bi=function(t){return t.nodeType===Node.TEXT_NODE},Ci=function(t){return t.nodeType===Node.ELEMENT_NODE},Ei=function(t){return Ci(t)&&void 0!==t.style&&!Qi(t)},Qi=function(t){return"object"==typeof t.className},Ui=function(t){return"LI"===t.tagName},Oi=function(t){return"OL"===t.tagName},Ii=function(t){return"INPUT"===t.tagName},Ti=function(t){return"svg"===t.tagName},Fi=function(t){return"BODY"===t.tagName},Ni=function(t){return"CANVAS"===t.tagName},Si=function(t){return"IMG"===t.tagName},Hi=function(t){return"IFRAME"===t.tagName},Ri=function(t){return"STYLE"===t.tagName},xi=function(t){return"SCRIPT"===t.tagName},Di=function(t){return"TEXTAREA"===t.tagName},Pi=function(t){return"SELECT"===t.tagName},ki=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(t){var e=this.counters[t];return e&&e.length?e[e.length-1]:1},t.prototype.getCounterValues=function(t){return this.counters[t]||[]},t.prototype.pop=function(t){var e=this;t.forEach(function(t){return e.counters[t].pop()})},t.prototype.parse=function(t){var e=this,n=t.counterIncrement,r=t.counterReset,i=!0;null!==n&&n.forEach(function(t){var n=e.counters[t.counter];n&&0!==t.increment&&(i=!1,n[Math.max(0,n.length-1)]+=t.increment)});var o=[];return i&&r.forEach(function(t){var n=e.counters[t.counter];o.push(t.counter),n||(n=e.counters[t.counter]=[]),n.push(t.reset)}),o},t}(),Li={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Mi={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u0554","\u0553","\u0552","\u0551","\u0550","\u054f","\u054e","\u054d","\u054c","\u054b","\u054a","\u0549","\u0548","\u0547","\u0546","\u0545","\u0544","\u0543","\u0542","\u0541","\u0540","\u053f","\u053e","\u053d","\u053c","\u053b","\u053a","\u0539","\u0538","\u0537","\u0536","\u0535","\u0534","\u0533","\u0532","\u0531"]},ji={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["\u05d9\u05f3","\u05d8\u05f3","\u05d7\u05f3","\u05d6\u05f3","\u05d5\u05f3","\u05d4\u05f3","\u05d3\u05f3","\u05d2\u05f3","\u05d1\u05f3","\u05d0\u05f3","\u05ea","\u05e9","\u05e8","\u05e7","\u05e6","\u05e4","\u05e2","\u05e1","\u05e0","\u05de","\u05dc","\u05db","\u05d9\u05d8","\u05d9\u05d7","\u05d9\u05d6","\u05d8\u05d6","\u05d8\u05d5","\u05d9","\u05d8","\u05d7","\u05d6","\u05d5","\u05d4","\u05d3","\u05d2","\u05d1","\u05d0"]},Ki={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["\u10f5","\u10f0","\u10ef","\u10f4","\u10ee","\u10ed","\u10ec","\u10eb","\u10ea","\u10e9","\u10e8","\u10e7","\u10e6","\u10e5","\u10e4","\u10f3","\u10e2","\u10e1","\u10e0","\u10df","\u10de","\u10dd","\u10f2","\u10dc","\u10db","\u10da","\u10d9","\u10d8","\u10d7","\u10f1","\u10d6","\u10d5","\u10d4","\u10d3","\u10d2","\u10d1","\u10d0"]},Vi=function(t,e,n,r,i,o){return t<e||t>n?Zi(t,i,o.length>0):r.integers.reduce(function(e,n,i){for(;t>=n;)t-=n,e+=r.values[i];return e},"")+o},zi=function(t,e,n,r){var i="";do{n||t--,i=r(t)+i,t/=e}while(t*e>=e);return i},Gi=function(t,e,n,r,i){var o=n-e+1;return(t<0?"-":"")+(zi(Math.abs(t),o,r,function(t){return u(Math.floor(t%o)+e)})+i)},qi=function(t,e,n){void 0===n&&(n=". ");var r=e.length;return zi(Math.abs(t),r,!1,function(t){return e[Math.floor(t%r)]})+n},Wi=function(t,e,n,r,i,o){if(t<-9999||t>9999)return Zi(t,Wn.CJK_DECIMAL,i.length>0);var s=Math.abs(t),a=i;if(0===s)return e[0]+a;for(var u=0;s>0&&u<=4;u++){var c=s%10;0===c&&Pr(o,1)&&""!==a?a=e[c]+a:c>1||1===c&&0===u||1===c&&1===u&&Pr(o,2)||1===c&&1===u&&Pr(o,4)&&t>100||1===c&&u>1&&Pr(o,8)?a=e[c]+(u>0?n[u-1]:"")+a:1===c&&u>0&&(a=n[u-1]+a),s=Math.floor(s/10)}return(t<0?r:"")+a},Xi="\u5341\u767e\u5343\u842c",Ji="\u62fe\u4f70\u4edf\u842c",Yi="\u30de\u30a4\u30ca\u30b9",$i="\ub9c8\uc774\ub108\uc2a4",Zi=function(t,e,n){var r=n?". ":"",i=n?"\u3001":"",o=n?", ":"",s=n?" ":"";switch(e){case Wn.DISC:return"\u2022"+s;case Wn.CIRCLE:return"\u25e6"+s;case Wn.SQUARE:return"\u25fe"+s;case Wn.DECIMAL_LEADING_ZERO:var a=Gi(t,48,57,!0,r);return a.length<4?"0"+a:a;case Wn.CJK_DECIMAL:return qi(t,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",i);case Wn.LOWER_ROMAN:return Vi(t,1,3999,Li,Wn.DECIMAL,r).toLowerCase();case Wn.UPPER_ROMAN:return Vi(t,1,3999,Li,Wn.DECIMAL,r);case Wn.LOWER_GREEK:return Gi(t,945,969,!1,r);case Wn.LOWER_ALPHA:return Gi(t,97,122,!1,r);case Wn.UPPER_ALPHA:return Gi(t,65,90,!1,r);case Wn.ARABIC_INDIC:return Gi(t,1632,1641,!0,r);case Wn.ARMENIAN:case Wn.UPPER_ARMENIAN:return Vi(t,1,9999,Mi,Wn.DECIMAL,r);case Wn.LOWER_ARMENIAN:return Vi(t,1,9999,Mi,Wn.DECIMAL,r).toLowerCase();case Wn.BENGALI:return Gi(t,2534,2543,!0,r);case Wn.CAMBODIAN:case Wn.KHMER:return Gi(t,6112,6121,!0,r);case Wn.CJK_EARTHLY_BRANCH:return qi(t,"\u5b50\u4e11\u5bc5\u536f\u8fb0\u5df3\u5348\u672a\u7533\u9149\u620c\u4ea5",i);case Wn.CJK_HEAVENLY_STEM:return qi(t,"\u7532\u4e59\u4e19\u4e01\u620a\u5df1\u5e9a\u8f9b\u58ec\u7678",i);case Wn.CJK_IDEOGRAPHIC:case Wn.TRAD_CHINESE_INFORMAL:return Wi(t,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Xi,"\u8ca0",i,14);case Wn.TRAD_CHINESE_FORMAL:return Wi(t,"\u96f6\u58f9\u8cb3\u53c3\u8086\u4f0d\u9678\u67d2\u634c\u7396",Ji,"\u8ca0",i,15);case Wn.SIMP_CHINESE_INFORMAL:return Wi(t,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d",Xi,"\u8d1f",i,14);case Wn.SIMP_CHINESE_FORMAL:return Wi(t,"\u96f6\u58f9\u8d30\u53c1\u8086\u4f0d\u9646\u67d2\u634c\u7396",Ji,"\u8d1f",i,15);case Wn.JAPANESE_INFORMAL:return Wi(t,"\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u4e07",Yi,i,0);case Wn.JAPANESE_FORMAL:return Wi(t,"\u96f6\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343\u4e07",Yi,i,7);case Wn.KOREAN_HANGUL_FORMAL:return Wi(t,"\uc601\uc77c\uc774\uc0bc\uc0ac\uc624\uc721\uce60\ud314\uad6c","\uc2ed\ubc31\ucc9c\ub9cc",$i,o,7);case Wn.KOREAN_HANJA_INFORMAL:return Wi(t,"\u96f6\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u5341\u767e\u5343\u842c",$i,o,0);case Wn.KOREAN_HANJA_FORMAL:return Wi(t,"\u96f6\u58f9\u8cb3\u53c3\u56db\u4e94\u516d\u4e03\u516b\u4e5d","\u62fe\u767e\u5343",$i,o,7);case Wn.DEVANAGARI:return Gi(t,2406,2415,!0,r);case Wn.GEORGIAN:return Vi(t,1,19999,Ki,Wn.DECIMAL,r);case Wn.GUJARATI:return Gi(t,2790,2799,!0,r);case Wn.GURMUKHI:return Gi(t,2662,2671,!0,r);case Wn.HEBREW:return Vi(t,1,10999,ji,Wn.DECIMAL,r);case Wn.HIRAGANA:return qi(t,"\u3042\u3044\u3046\u3048\u304a\u304b\u304d\u304f\u3051\u3053\u3055\u3057\u3059\u305b\u305d\u305f\u3061\u3064\u3066\u3068\u306a\u306b\u306c\u306d\u306e\u306f\u3072\u3075\u3078\u307b\u307e\u307f\u3080\u3081\u3082\u3084\u3086\u3088\u3089\u308a\u308b\u308c\u308d\u308f\u3090\u3091\u3092\u3093");case Wn.HIRAGANA_IROHA:return qi(t,"\u3044\u308d\u306f\u306b\u307b\u3078\u3068\u3061\u308a\u306c\u308b\u3092\u308f\u304b\u3088\u305f\u308c\u305d\u3064\u306d\u306a\u3089\u3080\u3046\u3090\u306e\u304a\u304f\u3084\u307e\u3051\u3075\u3053\u3048\u3066\u3042\u3055\u304d\u3086\u3081\u307f\u3057\u3091\u3072\u3082\u305b\u3059");case Wn.KANNADA:return Gi(t,3302,3311,!0,r);case Wn.KATAKANA:return qi(t,"\u30a2\u30a4\u30a6\u30a8\u30aa\u30ab\u30ad\u30af\u30b1\u30b3\u30b5\u30b7\u30b9\u30bb\u30bd\u30bf\u30c1\u30c4\u30c6\u30c8\u30ca\u30cb\u30cc\u30cd\u30ce\u30cf\u30d2\u30d5\u30d8\u30db\u30de\u30df\u30e0\u30e1\u30e2\u30e4\u30e6\u30e8\u30e9\u30ea\u30eb\u30ec\u30ed\u30ef\u30f0\u30f1\u30f2\u30f3",i);case Wn.KATAKANA_IROHA:return qi(t,"\u30a4\u30ed\u30cf\u30cb\u30db\u30d8\u30c8\u30c1\u30ea\u30cc\u30eb\u30f2\u30ef\u30ab\u30e8\u30bf\u30ec\u30bd\u30c4\u30cd\u30ca\u30e9\u30e0\u30a6\u30f0\u30ce\u30aa\u30af\u30e4\u30de\u30b1\u30d5\u30b3\u30a8\u30c6\u30a2\u30b5\u30ad\u30e6\u30e1\u30df\u30b7\u30f1\u30d2\u30e2\u30bb\u30b9",i);case Wn.LAO:return Gi(t,3792,3801,!0,r);case Wn.MONGOLIAN:return Gi(t,6160,6169,!0,r);case Wn.MYANMAR:return Gi(t,4160,4169,!0,r);case Wn.ORIYA:return Gi(t,2918,2927,!0,r);case Wn.PERSIAN:return Gi(t,1776,1785,!0,r);case Wn.TAMIL:return Gi(t,3046,3055,!0,r);case Wn.TELUGU:return Gi(t,3174,3183,!0,r);case Wn.THAI:return Gi(t,3664,3673,!0,r);case Wn.TIBETAN:return Gi(t,3872,3881,!0,r);case Wn.DECIMAL:default:return Gi(t,48,57,!0,r)}},to="data-html2canvas-ignore",eo=function(){function t(t,e){if(this.options=e,this.scrolledElements=[],this.referenceElement=t,this.counters=new ki,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement)}return t.prototype.toIFrame=function(t,e){var n=this,o=ro(t,e);if(!o.contentWindow)return Promise.reject("Unable to find iframe window");var s=t.defaultView.pageXOffset,a=t.defaultView.pageYOffset,u=o.contentWindow,c=u.document,A=io(o).then(function(){return r(n,void 0,void 0,function(){var t;return i(this,function(n){switch(n.label){case 0:return this.scrolledElements.forEach(uo),u&&(u.scrollTo(e.left,e.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||u.scrollY===e.top&&u.scrollX===e.left||(c.documentElement.style.top=-e.top+"px",c.documentElement.style.left=-e.left+"px",c.documentElement.style.position="absolute")),t=this.options.onclone,void 0===this.clonedReferenceElement?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:n.sent(),n.label=2;case 2:return"function"==typeof t?[2,Promise.resolve().then(function(){return t(c)}).then(function(){return o})]:[2,o]}})})});return c.open(),c.write(so(document.doctype)+"<html></html>"),ao(this.referenceElement.ownerDocument,s,a),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),A},t.prototype.createElementClone=function(t){if(Ni(t))return this.createCanvasClone(t);if(Ri(t))return this.createStyleClone(t);var e=t.cloneNode(!1);return Si(e)&&"lazy"===e.loading&&(e.loading="eager"),e},t.prototype.createStyleClone=function(t){try{var e=t.sheet;if(e&&e.cssRules){var n=[].slice.call(e.cssRules,0).reduce(function(t,e){return e&&"string"==typeof e.cssText?t+e.cssText:t},""),r=t.cloneNode(!1);return r.textContent=n,r}}catch(i){if(Pe.getInstance(this.options.id).error("Unable to access cssRules property",i),"SecurityError"!==i.name)throw i}return t.cloneNode(!1)},t.prototype.createCanvasClone=function(t){if(this.options.inlineImages&&t.ownerDocument){var e=t.ownerDocument.createElement("img");try{return e.src=t.toDataURL(),e}catch(o){Pe.getInstance(this.options.id).info("Unable to clone canvas contents, canvas is tainted")}}var n=t.cloneNode(!1);try{n.width=t.width,n.height=t.height;var r=t.getContext("2d"),i=n.getContext("2d");return i&&(r?i.putImageData(r.getImageData(0,0,t.width,t.height),0,0):i.drawImage(t,0,0)),n}catch(o){}return n},t.prototype.cloneNode=function(t){if(Bi(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var e=t.ownerDocument.defaultView;if(e&&Ci(t)&&(Ei(t)||Qi(t))){var n=this.createElementClone(t),r=e.getComputedStyle(t),i=e.getComputedStyle(t,":before"),o=e.getComputedStyle(t,":after");this.referenceElement===t&&Ei(n)&&(this.clonedReferenceElement=n),Fi(n)&&ho(n);for(var s=this.counters.parse(new qr(r)),a=this.resolvePseudoContent(t,n,i,xr.BEFORE),u=t.firstChild;u;u=u.nextSibling)Ci(u)&&(xi(u)||u.hasAttribute(to)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(u))||this.options.copyStyles&&Ci(u)&&Ri(u)||n.appendChild(this.cloneNode(u));a&&n.insertBefore(a,n.firstChild);var c=this.resolvePseudoContent(t,n,o,xr.AFTER);return c&&n.appendChild(c),this.counters.pop(s),r&&(this.options.copyStyles||Qi(t))&&!Hi(t)&&oo(r,n),0===t.scrollTop&&0===t.scrollLeft||this.scrolledElements.push([n,t.scrollLeft,t.scrollTop]),(Di(t)||Pi(t))&&(Di(n)||Pi(n))&&(n.value=t.value),n}return t.cloneNode(!1)},t.prototype.resolvePseudoContent=function(t,e,n,r){var i=this;if(n){var o=n.content,s=e.ownerDocument;if(s&&o&&"none"!==o&&"-moz-alt-content"!==o&&"none"!==n.display){this.counters.parse(new qr(n));var a=new Gr(n),u=s.createElement("html2canvaspseudoelement");oo(n,u),a.content.forEach(function(e){if(e.type===h.STRING_TOKEN)u.appendChild(s.createTextNode(e.value));else if(e.type===h.URL_TOKEN){var n=s.createElement("img");n.src=e.value,n.style.opacity="1",u.appendChild(n)}else if(e.type===h.FUNCTION){if("attr"===e.name){var r=e.values.filter(zt);r.length&&u.appendChild(s.createTextNode(t.getAttribute(r[0].value)||""))}else if("counter"===e.name){var o=e.values.filter(Xt),c=o[1];if((f=o[0])&&zt(f)){var A=i.counters.getCounterValue(f.value),l=c&&zt(c)?Yn.parse(c.value):Wn.DECIMAL;u.appendChild(s.createTextNode(Zi(A,l,!1)))}}else if("counters"===e.name){var f,d=e.values.filter(Xt),p=d[1];if(c=d[2],(f=d[0])&&zt(f)){var g=i.counters.getCounterValues(f.value),y=c&&zt(c)?Yn.parse(c.value):Wn.DECIMAL,v=p&&p.type===h.STRING_TOKEN?p.value:"",m=g.map(function(t){return Zi(t,y,!1)}).join(v);u.appendChild(s.createTextNode(m))}}}else if(e.type===h.IDENT_TOKEN)switch(e.value){case"open-quote":u.appendChild(s.createTextNode(Kr(a.quotes,i.quoteDepth++,!0)));break;case"close-quote":u.appendChild(s.createTextNode(Kr(a.quotes,--i.quoteDepth,!1)));break;default:u.appendChild(s.createTextNode(e.value))}}),u.className=co+" "+Ao;var c=r===xr.BEFORE?" "+co:" "+Ao;return Qi(e)?e.className.baseValue+=c:e.className+=c,u}}},t.destroy=function(t){return!!t.parentNode&&(t.parentNode.removeChild(t),!0)},t}();!function(t){t[t.BEFORE=0]="BEFORE",t[t.AFTER=1]="AFTER"}(xr||(xr={}));var no,ro=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(to,"true"),t.body.appendChild(n),n},io=function(t){return new Promise(function(e,n){var r=t.contentWindow;if(!r)return n("No window assigned for iframe");var i=r.document;r.onload=t.onload=i.onreadystatechange=function(){r.onload=t.onload=i.onreadystatechange=null;var n=setInterval(function(){i.body.childNodes.length>0&&"complete"===i.readyState&&(clearInterval(n),e(t))},50)}})},oo=function(t,e){for(var n=t.length-1;n>=0;n--){var r=t.item(n);"content"!==r&&e.style.setProperty(r,t.getPropertyValue(r))}return e},so=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},ao=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},uo=function(t){var e=t[0],n=t[2];e.scrollLeft=t[1],e.scrollTop=n},co="___html2canvas___pseudoelement_before",Ao="___html2canvas___pseudoelement_after",lo='{\n    content: "" !important;\n    display: none !important;\n}',ho=function(t){fo(t,"."+co+":before"+lo+"\n         ."+Ao+":after"+lo)},fo=function(t,e){var n=t.ownerDocument;if(n){var r=n.createElement("style");r.textContent=e,t.appendChild(r)}};!function(t){t[t.VECTOR=0]="VECTOR",t[t.BEZIER_CURVE=1]="BEZIER_CURVE"}(no||(no={}));var po,go=function(t,e){return t.length===e.length&&t.some(function(t,n){return t===e[n]})},yo=function(){function t(t,e){this.type=no.VECTOR,this.x=t,this.y=e}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),vo=function(t,e,n){return new yo(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},mo=function(){function t(t,e,n,r){this.type=no.BEZIER_CURVE,this.start=t,this.startControl=e,this.endControl=n,this.end=r}return t.prototype.subdivide=function(e,n){var r=vo(this.start,this.startControl,e),i=vo(this.startControl,this.endControl,e),o=vo(this.endControl,this.end,e),s=vo(r,i,e),a=vo(i,o,e),u=vo(s,a,e);return n?new t(this.start,r,s,u):new t(u,a,o,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),bo=function(t){return t.type===no.BEZIER_CURVE},wo=function(t){var e=t.styles,n=t.bounds,r=ie(e.borderTopLeftRadius,n.width,n.height),i=r[0],o=r[1],s=ie(e.borderTopRightRadius,n.width,n.height),a=s[0],u=s[1],c=ie(e.borderBottomRightRadius,n.width,n.height),A=c[0],l=c[1],h=ie(e.borderBottomLeftRadius,n.width,n.height),f=h[0],d=h[1],p=[];p.push((i+a)/n.width),p.push((f+A)/n.width),p.push((o+d)/n.height),p.push((u+l)/n.height);var g=Math.max.apply(Math,p);g>1&&(i/=g,o/=g,a/=g,u/=g,A/=g,l/=g,f/=g,d/=g);var y=n.width-a,v=n.height-l,m=n.width-A,b=n.height-d,w=e.borderTopWidth,_=e.borderRightWidth,B=e.borderBottomWidth,C=e.borderLeftWidth,E=oe(e.paddingTop,t.bounds.width),Q=oe(e.paddingRight,t.bounds.width),U=oe(e.paddingBottom,t.bounds.width),O=oe(e.paddingLeft,t.bounds.width);this.topLeftBorderBox=i>0||o>0?_o(n.left,n.top,i,o,po.TOP_LEFT):new yo(n.left,n.top),this.topRightBorderBox=a>0||u>0?_o(n.left+y,n.top,a,u,po.TOP_RIGHT):new yo(n.left+n.width,n.top),this.bottomRightBorderBox=A>0||l>0?_o(n.left+m,n.top+v,A,l,po.BOTTOM_RIGHT):new yo(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=f>0||d>0?_o(n.left,n.top+b,f,d,po.BOTTOM_LEFT):new yo(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||o>0?_o(n.left+C,n.top+w,Math.max(0,i-C),Math.max(0,o-w),po.TOP_LEFT):new yo(n.left+C,n.top+w),this.topRightPaddingBox=a>0||u>0?_o(n.left+Math.min(y,n.width+C),n.top+w,y>n.width+C?0:a-C,u-w,po.TOP_RIGHT):new yo(n.left+n.width-_,n.top+w),this.bottomRightPaddingBox=A>0||l>0?_o(n.left+Math.min(m,n.width-C),n.top+Math.min(v,n.height+w),Math.max(0,A-_),l-B,po.BOTTOM_RIGHT):new yo(n.left+n.width-_,n.top+n.height-B),this.bottomLeftPaddingBox=f>0||d>0?_o(n.left+C,n.top+b,Math.max(0,f-C),d-B,po.BOTTOM_LEFT):new yo(n.left+C,n.top+n.height-B),this.topLeftContentBox=i>0||o>0?_o(n.left+C+O,n.top+w+E,Math.max(0,i-(C+O)),Math.max(0,o-(w+E)),po.TOP_LEFT):new yo(n.left+C+O,n.top+w+E),this.topRightContentBox=a>0||u>0?_o(n.left+Math.min(y,n.width+C+O),n.top+w+E,y>n.width+C+O?0:a-C+O,u-(w+E),po.TOP_RIGHT):new yo(n.left+n.width-(_+Q),n.top+w+E),this.bottomRightContentBox=A>0||l>0?_o(n.left+Math.min(m,n.width-(C+O)),n.top+Math.min(v,n.height+w+E),Math.max(0,A-(_+Q)),l-(B+U),po.BOTTOM_RIGHT):new yo(n.left+n.width-(_+Q),n.top+n.height-(B+U)),this.bottomLeftContentBox=f>0||d>0?_o(n.left+C+O,n.top+b,Math.max(0,f-(C+O)),d-(B+U),po.BOTTOM_LEFT):new yo(n.left+C+O,n.top+n.height-(B+U))};!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP_RIGHT=1]="TOP_RIGHT",t[t.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",t[t.BOTTOM_LEFT=3]="BOTTOM_LEFT"}(po||(po={}));var _o=function(t,e,n,r,i){var o=(Math.sqrt(2)-1)/3*4,s=n*o,a=r*o,u=t+n,c=e+r;switch(i){case po.TOP_LEFT:return new mo(new yo(t,c),new yo(t,c-a),new yo(u-s,e),new yo(u,e));case po.TOP_RIGHT:return new mo(new yo(t,e),new yo(t+s,e),new yo(u,c-a),new yo(u,c));case po.BOTTOM_RIGHT:return new mo(new yo(u,e),new yo(u,e+a),new yo(t+s,c),new yo(t,c));case po.BOTTOM_LEFT:default:return new mo(new yo(u,c),new yo(u-s,c),new yo(t,e+a),new yo(t,e))}},Bo=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},Co=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},Eo=function(t,e,n){this.type=0,this.offsetX=t,this.offsetY=e,this.matrix=n,this.target=6},Qo=function(t,e){this.type=1,this.target=e,this.path=t},Uo=function(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},Oo=function(){function t(t,e){if(this.container=t,this.effects=e.slice(0),this.curves=new wo(t),null!==t.styles.transform&&this.effects.push(new Eo(t.bounds.left+t.styles.transformOrigin[0].number,t.bounds.top+t.styles.transformOrigin[1].number,t.styles.transform)),t.styles.overflowX!==Jn.VISIBLE){var n=Bo(this.curves),r=Co(this.curves);go(n,r)?this.effects.push(new Qo(n,6)):(this.effects.push(new Qo(n,2)),this.effects.push(new Qo(r,4)))}}return t.prototype.getParentEffects=function(){var t=this.effects.slice(0);if(this.container.styles.overflowX!==Jn.VISIBLE){var e=Bo(this.curves),n=Co(this.curves);go(e,n)||t.push(new Qo(n,6))}return t},t}(),Io=function(t,e,n,r){t.container.elements.forEach(function(i){var o=Pr(i.flags,4),s=Pr(i.flags,2),a=new Oo(i,t.getParentEffects());Pr(i.styles.display,2048)&&r.push(a);var u=Pr(i.flags,8)?[]:r;if(o||s){var c=o||i.styles.isPositioned()?n:e,A=new Uo(a);if(i.styles.isPositioned()||i.styles.opacity<1||i.styles.isTransformed()){var l=i.styles.zIndex.order;if(l<0){var h=0;c.negativeZIndex.some(function(t,e){return l>t.element.container.styles.zIndex.order?(h=e,!1):h>0}),c.negativeZIndex.splice(h,0,A)}else if(l>0){var f=0;c.positiveZIndex.some(function(t,e){return l>=t.element.container.styles.zIndex.order?(f=e+1,!1):f>0}),c.positiveZIndex.splice(f,0,A)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(A)}else i.styles.isFloating()?c.nonPositionedFloats.push(A):c.nonPositionedInlineLevel.push(A);Io(a,A,o?A:n,u)}else i.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),Io(a,e,n,u);Pr(i.flags,8)&&To(i,u)})},To=function(t,e){for(var n=t instanceof si?t.start:1,r=t instanceof si&&t.reversed,i=0;i<e.length;i++){var o=e[i];o.container instanceof oi&&"number"==typeof o.container.value&&0!==o.container.value&&(n=o.container.value),o.listValue=Zi(n,o.container.styles.listStyleType,!0),n+=r?-1:1}},Fo=function(t,e,n,r){var i=[];return bo(t)?i.push(t.subdivide(.5,!1)):i.push(t),bo(n)?i.push(n.subdivide(.5,!0)):i.push(n),bo(r)?i.push(r.subdivide(.5,!0).reverse()):i.push(r),bo(e)?i.push(e.subdivide(.5,!1).reverse()):i.push(e),i},No=function(t){var e=t.styles;return t.bounds.add(e.borderLeftWidth,e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth),-(e.borderTopWidth+e.borderBottomWidth))},So=function(t){var e=t.styles,n=t.bounds,r=oe(e.paddingLeft,n.width),i=oe(e.paddingRight,n.width),o=oe(e.paddingTop,n.width),s=oe(e.paddingBottom,n.width);return n.add(r+e.borderLeftWidth,o+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+r+i),-(e.borderTopWidth+e.borderBottomWidth+o+s))},Ho=function(t,e,n){var r=function(t,e){return 0===t?e.bounds:2===t?So(e):No(e)}(Po(t.styles.backgroundOrigin,e),t),i=function(t,e){return t===be.BORDER_BOX?e.bounds:t===be.CONTENT_BOX?So(e):No(e)}(Po(t.styles.backgroundClip,e),t),o=Do(Po(t.styles.backgroundSize,e),n,r),s=o[0],a=o[1],u=ie(Po(t.styles.backgroundPosition,e),r.width-s,r.height-a);return[ko(Po(t.styles.backgroundRepeat,e),u,o,r,i),Math.round(r.left+u[0]),Math.round(r.top+u[1]),s,a]},Ro=function(t){return zt(t)&&t.value===ln.AUTO},xo=function(t){return"number"==typeof t},Do=function(t,e,n){var r=e[0],i=e[1],o=e[2],s=t[0],a=t[1];if(Zt(s)&&a&&Zt(a))return[oe(s,n.width),oe(a,n.height)];var u=xo(o);if(zt(s)&&(s.value===ln.CONTAIN||s.value===ln.COVER))return xo(o)?n.width/n.height<o!=(s.value===ln.COVER)?[n.width,n.width/o]:[n.height*o,n.height]:[n.width,n.height];var c=xo(r),A=xo(i),l=c||A;if(Ro(s)&&(!a||Ro(a)))return c&&A?[r,i]:u||l?l&&u?[c?r:i*o,A?i:r/o]:[c?r:n.width,A?i:n.height]:[n.width,n.height];if(u){var h=0,f=0;return Zt(s)?h=oe(s,n.width):Zt(a)&&(f=oe(a,n.height)),Ro(s)?h=f*o:a&&!Ro(a)||(f=h/o),[h,f]}var d=null,p=null;if(Zt(s)?d=oe(s,n.width):a&&Zt(a)&&(p=oe(a,n.height)),null===d||a&&!Ro(a)||(p=c&&A?d/r*i:n.height),null!==p&&Ro(s)&&(d=c&&A?p/i*r:n.width),null!==d&&null!==p)return[d,p];throw new Error("Unable to calculate background-size for element")},Po=function(t,e){var n=t[e];return void 0===n?t[0]:n},ko=function(t,e,n,r,i){var o=e[0],s=e[1],a=n[0],u=n[1];switch(t){case on.REPEAT_X:return[new yo(Math.round(r.left),Math.round(r.top+s)),new yo(Math.round(r.left+r.width),Math.round(r.top+s)),new yo(Math.round(r.left+r.width),Math.round(u+r.top+s)),new yo(Math.round(r.left),Math.round(u+r.top+s))];case on.REPEAT_Y:return[new yo(Math.round(r.left+o),Math.round(r.top)),new yo(Math.round(r.left+o+a),Math.round(r.top)),new yo(Math.round(r.left+o+a),Math.round(r.height+r.top)),new yo(Math.round(r.left+o),Math.round(r.height+r.top))];case on.NO_REPEAT:return[new yo(Math.round(r.left+o),Math.round(r.top+s)),new yo(Math.round(r.left+o+a),Math.round(r.top+s)),new yo(Math.round(r.left+o+a),Math.round(r.top+s+u)),new yo(Math.round(r.left+o),Math.round(r.top+s+u))];default:return[new yo(Math.round(i.left),Math.round(i.top)),new yo(Math.round(i.left+i.width),Math.round(i.top)),new yo(Math.round(i.left+i.width),Math.round(i.height+i.top)),new yo(Math.round(i.left),Math.round(i.height+i.top))]}},Lo="Hidden Text",Mo=function(){function t(t){this._data={},this._document=t}return t.prototype.parseMetrics=function(t,e){var n=this._document.createElement("div"),r=this._document.createElement("img"),i=this._document.createElement("span"),o=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=e,n.style.margin="0",n.style.padding="0",o.appendChild(n),r.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",i.style.fontFamily=t,i.style.fontSize=e,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(Lo)),n.appendChild(i),n.appendChild(r);var s=r.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(Lo)),n.style.lineHeight="normal",r.style.verticalAlign="super";var a=r.offsetTop-n.offsetTop+2;return o.removeChild(n),{baseline:s,middle:a}},t.prototype.getMetrics=function(t,e){var n=t+" "+e;return void 0===this._data[n]&&(this._data[n]=this.parseMetrics(t,e)),this._data[n]},t}(),jo=function(){function t(t){this._activeEffects=[],this.canvas=t.canvas?t.canvas:document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.options=t,t.canvas||(this.canvas.width=Math.floor(t.width*t.scale),this.canvas.height=Math.floor(t.height*t.scale),this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px"),this.fontMetrics=new Mo(document),this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-t.x+t.scrollX,-t.y+t.scrollY),this.ctx.textBaseline="bottom",this._activeEffects=[],Pe.getInstance(t.id).debug("Canvas renderer initialized ("+t.width+"x"+t.height+" at "+t.x+","+t.y+") with scale "+t.scale)}return t.prototype.applyEffects=function(t,e){for(var n=this;this._activeEffects.length;)this.popEffect();t.filter(function(t){return Pr(t.target,e)}).forEach(function(t){return n.applyEffect(t)})},t.prototype.applyEffect=function(t){this.ctx.save(),function(t){return 0===t.type}(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),function(t){return 1===t.type}(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(t){return r(this,void 0,void 0,function(){var e;return i(this,function(n){switch(n.label){case 0:return(e=t.element.container.styles).isVisible()?(this.ctx.globalAlpha=e.opacity,[4,this.renderStackContent(t)]):[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return e.sent(),[4,this.renderNodeContent(t)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(t,e){var n=this;0===e?this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height):a(t.text).map(function(t){return u(t)}).reduce(function(e,r){return n.ctx.fillText(r,e,t.bounds.top+t.bounds.height),e+n.ctx.measureText(r).width},t.bounds.left)},t.prototype.createFontStyle=function(t){var e=t.fontVariant.filter(function(t){return"normal"===t||"small-caps"===t}).join(""),n=t.fontFamily.join(", "),r=Kt(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,e,t.fontWeight,r,n].join(" "),n,r]},t.prototype.renderTextNode=function(t,e){return r(this,void 0,void 0,function(){var n,r,o,s=this;return i(this,function(i){return n=this.createFontStyle(e),r=n[1],o=n[2],this.ctx.font=n[0],t.textBounds.forEach(function(t){s.ctx.fillStyle=de(e.color),s.renderTextWithLetterSpacing(t,e.letterSpacing);var n=e.textShadow;n.length&&t.text.trim().length&&(n.slice(0).reverse().forEach(function(e){s.ctx.shadowColor=de(e.color),s.ctx.shadowOffsetX=e.offsetX.number*s.options.scale,s.ctx.shadowOffsetY=e.offsetY.number*s.options.scale,s.ctx.shadowBlur=e.blur.number,s.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height)}),s.ctx.shadowColor="",s.ctx.shadowOffsetX=0,s.ctx.shadowOffsetY=0,s.ctx.shadowBlur=0),e.textDecorationLine.length&&(s.ctx.fillStyle=de(e.textDecorationColor||e.color),e.textDecorationLine.forEach(function(e){switch(e){case 1:var n=s.fontMetrics.getMetrics(r,o).baseline;s.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top+n),t.bounds.width,1);break;case 2:s.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1);break;case 3:var i=s.fontMetrics.getMetrics(r,o).middle;s.ctx.fillRect(t.bounds.left,Math.ceil(t.bounds.top+i),t.bounds.width,1)}}))}),[2]})})},t.prototype.renderReplacedElement=function(t,e,n){if(n&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var r=So(t),i=Co(e);this.path(i),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,t.intrinsicWidth,t.intrinsicHeight,r.left,r.top,r.width,r.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(e){return r(this,void 0,void 0,function(){var n,r,s,a,u,c,A,l,f,d,p,g,y;return i(this,function(i){switch(i.label){case 0:this.applyEffects(e.effects,4),r=e.curves,s=(n=e.container).styles,a=0,u=n.textNodes,i.label=1;case 1:return a<u.length?[4,this.renderTextNode(u[a],s)]:[3,4];case 2:i.sent(),i.label=3;case 3:return a++,[3,1];case 4:if(!(n instanceof ni))return[3,8];i.label=5;case 5:return i.trys.push([5,7,,8]),[4,this.options.cache.match(n.src)];case 6:return p=i.sent(),this.renderReplacedElement(n,r,p),[3,8];case 7:return i.sent(),Pe.getInstance(this.options.id).error("Error loading image "+n.src),[3,8];case 8:if(n instanceof ri&&this.renderReplacedElement(n,r,n.canvas),!(n instanceof ii))return[3,12];i.label=9;case 9:return i.trys.push([9,11,,12]),[4,this.options.cache.match(n.svg)];case 10:return p=i.sent(),this.renderReplacedElement(n,r,p),[3,12];case 11:return i.sent(),Pe.getInstance(this.options.id).error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof gi&&n.tree?[4,new t({id:this.options.id,scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,scrollX:0,scrollY:0,width:n.width,height:n.height,cache:this.options.cache,windowWidth:n.width,windowHeight:n.height}).render(n.tree)]:[3,14];case 13:c=i.sent(),n.width&&n.height&&this.ctx.drawImage(c,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),i.label=14;case 14:if(n instanceof hi&&(A=Math.min(n.bounds.width,n.bounds.height),n.type===ci?n.checked&&(this.ctx.save(),this.path([new yo(n.bounds.left+.39363*A,n.bounds.top+.79*A),new yo(n.bounds.left+.16*A,n.bounds.top+.5549*A),new yo(n.bounds.left+.27347*A,n.bounds.top+.44071*A),new yo(n.bounds.left+.39694*A,n.bounds.top+.5649*A),new yo(n.bounds.left+.72983*A,n.bounds.top+.23*A),new yo(n.bounds.left+.84*A,n.bounds.top+.34085*A),new yo(n.bounds.left+.39363*A,n.bounds.top+.79*A)]),this.ctx.fillStyle=de(li),this.ctx.fill(),this.ctx.restore()):n.type===Ai&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+A/2,n.bounds.top+A/2,A/4,0,2*Math.PI,!0),this.ctx.fillStyle=de(li),this.ctx.fill(),this.ctx.restore())),Ko(n)&&n.value.length){switch(this.ctx.font=this.createFontStyle(s)[0],this.ctx.fillStyle=de(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign=zo(n.styles.textAlign),y=So(n),l=0,n.styles.textAlign){case or.CENTER:l+=y.width/2;break;case or.RIGHT:l+=y.width}f=y.add(l,0,0,-y.height/2+1),this.ctx.save(),this.path([new yo(y.left,y.top),new yo(y.left+y.width,y.top),new yo(y.left+y.width,y.top+y.height),new yo(y.left,y.top+y.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Jr(n.value,f),s.letterSpacing),this.ctx.restore(),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"}if(!Pr(n.styles.display,2048))return[3,20];if(null===n.styles.listStyleImage)return[3,19];if((d=n.styles.listStyleImage).type!==Ce.URL)return[3,18];p=void 0,g=d.url,i.label=15;case 15:return i.trys.push([15,17,,18]),[4,this.options.cache.match(g)];case 16:return p=i.sent(),this.ctx.drawImage(p,n.bounds.left-(p.width+10),n.bounds.top),[3,18];case 17:return i.sent(),Pe.getInstance(this.options.id).error("Error loading list-style-image "+g),[3,18];case 18:return[3,20];case 19:e.listValue&&n.styles.listStyleType!==Wn.NONE&&(this.ctx.font=this.createFontStyle(s)[0],this.ctx.fillStyle=de(s.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",y=new o(n.bounds.left,n.bounds.top+oe(n.styles.paddingTop,n.bounds.width),n.bounds.width,function(t,e){return zt(t)&&"normal"===t.value?1.2*e:t.type===h.NUMBER_TOKEN?e*t.number:Zt(t)?oe(t,e):e}(s.lineHeight,s.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Jr(e.listValue,y),s.letterSpacing),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),i.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(t){return r(this,void 0,void 0,function(){var e,n,r,o,s,a,u,c,A,l,h,f,d,p;return i(this,function(i){switch(i.label){case 0:return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:i.sent(),e=0,n=t.negativeZIndex,i.label=2;case 2:return e<n.length?[4,this.renderStack(n[e])]:[3,5];case 3:i.sent(),i.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:i.sent(),r=0,o=t.nonInlineLevel,i.label=7;case 7:return r<o.length?[4,this.renderNode(o[r])]:[3,10];case 8:i.sent(),i.label=9;case 9:return r++,[3,7];case 10:s=0,a=t.nonPositionedFloats,i.label=11;case 11:return s<a.length?[4,this.renderStack(a[s])]:[3,14];case 12:i.sent(),i.label=13;case 13:return s++,[3,11];case 14:u=0,c=t.nonPositionedInlineLevel,i.label=15;case 15:return u<c.length?[4,this.renderStack(c[u])]:[3,18];case 16:i.sent(),i.label=17;case 17:return u++,[3,15];case 18:A=0,l=t.inlineLevel,i.label=19;case 19:return A<l.length?[4,this.renderNode(l[A])]:[3,22];case 20:i.sent(),i.label=21;case 21:return A++,[3,19];case 22:h=0,f=t.zeroOrAutoZIndexOrTransformedOrOpacity,i.label=23;case 23:return h<f.length?[4,this.renderStack(f[h])]:[3,26];case 24:i.sent(),i.label=25;case 25:return h++,[3,23];case 26:d=0,p=t.positiveZIndex,i.label=27;case 27:return d<p.length?[4,this.renderStack(p[d])]:[3,30];case 28:i.sent(),i.label=29;case 29:return d++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},t.prototype.formatPath=function(t){var e=this;t.forEach(function(t,n){var r=bo(t)?t.start:t;0===n?e.ctx.moveTo(r.x,r.y):e.ctx.lineTo(r.x,r.y),bo(t)&&e.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)})},t.prototype.renderRepeat=function(t,e,n,r){this.path(t),this.ctx.fillStyle=e,this.ctx.translate(n,r),this.ctx.fill(),this.ctx.translate(-n,-r)},t.prototype.resizeImage=function(t,e,n){if(t.width===e&&t.height===n)return t;var r=this.canvas.ownerDocument.createElement("canvas");return r.width=e,r.height=n,r.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e,n),r},t.prototype.renderBackgroundImage=function(t){return r(this,void 0,void 0,function(){var e,n,r,o,s;return i(this,function(a){switch(a.label){case 0:e=t.styles.backgroundImage.length-1,n=function(n){var o,s,a,u,c,A,l,h,f,d,p,g,y,v,m,b,w,_,B,C,E,Q,U,O,I,T,F,N,S,H,R;return i(this,function(i){switch(i.label){case 0:if(n.type!==Ce.URL)return[3,5];o=void 0,s=n.url,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,r.options.cache.match(s)];case 2:return o=i.sent(),[3,4];case 3:return i.sent(),Pe.getInstance(r.options.id).error("Error loading background-image "+s),[3,4];case 4:return o&&(a=Ho(t,e,[o.width,o.height,o.width/o.height]),b=a[0],Q=a[1],U=a[2],v=r.ctx.createPattern(r.resizeImage(o,B=a[3],C=a[4]),"repeat"),r.renderRepeat(b,v,Q,U)),[3,6];case 5:n.type===Ce.LINEAR_GRADIENT?(u=Ho(t,e,[null,null,null]),b=u[0],Q=u[1],U=u[2],c=function(t,e,n){var r="number"==typeof t?t:function(t,e,n){var r=e/2,i=n/2,o=oe(t[0],e)-r,s=i-oe(t[1],n);return(Math.atan2(s,o)+2*Math.PI)%(2*Math.PI)}(t,e,n),i=Math.abs(e*Math.sin(r))+Math.abs(n*Math.cos(r)),o=e/2,s=n/2,a=i/2,u=Math.sin(r-Math.PI/2)*a,c=Math.cos(r-Math.PI/2)*a;return[i,o-c,o+c,s-u,s+u]}(n.angle,B=u[3],C=u[4]),A=c[0],l=c[1],h=c[2],f=c[3],d=c[4],(p=document.createElement("canvas")).width=B,p.height=C,g=p.getContext("2d"),y=g.createLinearGradient(l,f,h,d),Te(n.stops,A).forEach(function(t){return y.addColorStop(t.stop,de(t.color))}),g.fillStyle=y,g.fillRect(0,0,B,C),B>0&&C>0&&(v=r.ctx.createPattern(p,"repeat"),r.renderRepeat(b,v,Q,U))):n.type===Ce.RADIAL_GRADIENT&&(m=Ho(t,e,[null,null,null]),b=m[0],w=m[1],_=m[2],C=m[4],Q=oe((E=0===n.position.length?[ne]:n.position)[0],B=m[3]),U=oe(E[E.length-1],C),O=function(t,e,n,r,i){var o=0,s=0;switch(t.size){case Qe.CLOSEST_SIDE:t.shape===Ee.CIRCLE?o=s=Math.min(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-i)):t.shape===Ee.ELLIPSE&&(o=Math.min(Math.abs(e),Math.abs(e-r)),s=Math.min(Math.abs(n),Math.abs(n-i)));break;case Qe.CLOSEST_CORNER:if(t.shape===Ee.CIRCLE)o=s=Math.min(Fe(e,n),Fe(e,n-i),Fe(e-r,n),Fe(e-r,n-i));else if(t.shape===Ee.ELLIPSE){var a=Math.min(Math.abs(n),Math.abs(n-i))/Math.min(Math.abs(e),Math.abs(e-r)),u=Ne(r,i,e,n,!0);s=a*(o=Fe(u[0]-e,(u[1]-n)/a))}break;case Qe.FARTHEST_SIDE:t.shape===Ee.CIRCLE?o=s=Math.max(Math.abs(e),Math.abs(e-r),Math.abs(n),Math.abs(n-i)):t.shape===Ee.ELLIPSE&&(o=Math.max(Math.abs(e),Math.abs(e-r)),s=Math.max(Math.abs(n),Math.abs(n-i)));break;case Qe.FARTHEST_CORNER:if(t.shape===Ee.CIRCLE)o=s=Math.max(Fe(e,n),Fe(e,n-i),Fe(e-r,n),Fe(e-r,n-i));else if(t.shape===Ee.ELLIPSE){a=Math.max(Math.abs(n),Math.abs(n-i))/Math.max(Math.abs(e),Math.abs(e-r));var c=Ne(r,i,e,n,!1);s=a*(o=Fe(c[0]-e,(c[1]-n)/a))}}return Array.isArray(t.size)&&(o=oe(t.size[0],r),s=2===t.size.length?oe(t.size[1],i):o),[o,s]}(n,Q,U,B,C),T=O[1],(I=O[0])>0&&I>0&&(F=r.ctx.createRadialGradient(w+Q,_+U,0,w+Q,_+U,I),Te(n.stops,2*I).forEach(function(t){return F.addColorStop(t.stop,de(t.color))}),r.path(b),r.ctx.fillStyle=F,I!==T?(N=t.bounds.left+.5*t.bounds.width,S=t.bounds.top+.5*t.bounds.height,R=1/(H=T/I),r.ctx.save(),r.ctx.translate(N,S),r.ctx.transform(1,0,0,H,0,0),r.ctx.translate(-N,-S),r.ctx.fillRect(w,R*(_-S)+S,B,C*R),r.ctx.restore()):r.ctx.fill())),i.label=6;case 6:return e--,[2]}})},r=this,o=0,s=t.styles.backgroundImage.slice(0).reverse(),a.label=1;case 1:return o<s.length?[5,n(s[o])]:[3,4];case 2:a.sent(),a.label=3;case 3:return o++,[3,1];case 4:return[2]}})})},t.prototype.renderBorder=function(t,e,n){return r(this,void 0,void 0,function(){return i(this,function(r){return this.path(function(t,e){switch(e){case 0:return Fo(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Fo(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Fo(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Fo(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}}(n,e)),this.ctx.fillStyle=de(t),this.ctx.fill(),[2]})})},t.prototype.renderNodeBackgroundAndBorders=function(t){return r(this,void 0,void 0,function(){var e,n,r,o,s,a,u,c,A=this;return i(this,function(i){switch(i.label){case 0:return this.applyEffects(t.effects,2),n=!fe((e=t.container.styles).backgroundColor)||e.backgroundImage.length,r=[{style:e.borderTopStyle,color:e.borderTopColor},{style:e.borderRightStyle,color:e.borderRightColor},{style:e.borderBottomStyle,color:e.borderBottomColor},{style:e.borderLeftStyle,color:e.borderLeftColor}],o=Vo(Po(e.backgroundClip,0),t.curves),n||e.boxShadow.length?(this.ctx.save(),this.path(o),this.ctx.clip(),fe(e.backgroundColor)||(this.ctx.fillStyle=de(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:i.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach(function(e){A.ctx.save();var n,r,i,o,s=Bo(t.curves),a=e.inset?0:1e4,u=(n=(e.inset?1:-1)*e.spread.number-a,r=(e.inset?1:-1)*e.spread.number,i=e.spread.number*(e.inset?-2:2),o=e.spread.number*(e.inset?-2:2),s.map(function(t,e){switch(e){case 0:return t.add(n,r);case 1:return t.add(n+i,r);case 2:return t.add(n+i,r+o);case 3:return t.add(n,r+o)}return t}));e.inset?(A.path(s),A.ctx.clip(),A.mask(u)):(A.mask(s),A.ctx.clip(),A.path(u)),A.ctx.shadowOffsetX=e.offsetX.number+a,A.ctx.shadowOffsetY=e.offsetY.number,A.ctx.shadowColor=de(e.color),A.ctx.shadowBlur=e.blur.number,A.ctx.fillStyle=e.inset?de(e.color):"rgba(0,0,0,1)",A.ctx.fill(),A.ctx.restore()}),i.label=2;case 2:s=0,a=0,u=r,i.label=3;case 3:return a<u.length?(c=u[a]).style===dn.NONE||fe(c.color)?[3,5]:[4,this.renderBorder(c.color,s,t.curves)]:[3,7];case 4:i.sent(),i.label=5;case 5:s++,i.label=6;case 6:return a++,[3,3];case 7:return[2]}})})},t.prototype.render=function(t){return r(this,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=de(this.options.backgroundColor),this.ctx.fillRect(this.options.x-this.options.scrollX,this.options.y-this.options.scrollY,this.options.width,this.options.height)),n=new Oo(t,[]),r=new Uo(n),Io(n,r,r,i=[]),To(n.container,i),[4,this.renderStack(r)];case 1:return e.sent(),this.applyEffects([],2),[2,this.canvas]}var n,r,i})})},t}(),Ko=function(t){return t instanceof di||t instanceof fi||t instanceof hi&&t.type!==Ai&&t.type!==ci},Vo=function(t,e){switch(t){case be.BORDER_BOX:return Bo(e);case be.CONTENT_BOX:return function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]}(e);case be.PADDING_BOX:default:return Co(e)}},zo=function(t){switch(t){case or.CENTER:return"center";case or.RIGHT:return"right";case or.LEFT:default:return"left"}},Go=function(){function t(t){this.canvas=t.canvas?t.canvas:document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.options=t,this.canvas.width=Math.floor(t.width*t.scale),this.canvas.height=Math.floor(t.height*t.scale),this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-t.x+t.scrollX,-t.y+t.scrollY),Pe.getInstance(t.id).debug("EXPERIMENTAL ForeignObject renderer initialized ("+t.width+"x"+t.height+" at "+t.x+","+t.y+") with scale "+t.scale)}return t.prototype.render=function(t){return r(this,void 0,void 0,function(){var e,n;return i(this,function(r){switch(r.label){case 0:return e=Re(Math.max(this.options.windowWidth,this.options.width)*this.options.scale,Math.max(this.options.windowHeight,this.options.height)*this.options.scale,this.options.scrollX*this.options.scale,this.options.scrollY*this.options.scale,t),[4,qo(e)];case 1:return n=r.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=de(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(),qo=function(t){return new Promise(function(e,n){var r=new Image;r.onload=function(){e(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))})},Wo=function(t){return he(jt.create(t).parseComponentValue())};"undefined"!=typeof window&&ke.setContext(window);return function(t,e){return void 0===e&&(e={}),function(t,e){return r(void 0,void 0,void 0,function(){var r,a,u,c,A,l,h,f,d,p,g,y,v,m,b,w,_,B,C,E,Q,U,O;return i(this,function(i){switch(i.label){case 0:if(!(r=t.ownerDocument))throw new Error("Element is not attached to a Document");if(!(a=r.defaultView))throw new Error("Document is not attached to a Window");return u=(Math.round(1e3*Math.random())+Date.now()).toString(16),c=Fi(t)||"HTML"===t.tagName?function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),i=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new o(0,0,r,i)}(r):s(t),A=c.width,l=c.height,h=c.left,f=c.top,d=n({},{allowTaint:!1,imageTimeout:15e3,proxy:void 0,useCORS:!1},e),p={backgroundColor:"#ffffff",cache:e.cache?e.cache:ke.create(u,d),logging:!0,removeContainer:!0,foreignObjectRendering:!1,scale:a.devicePixelRatio||1,windowWidth:a.innerWidth,windowHeight:a.innerHeight,scrollX:a.pageXOffset,scrollY:a.pageYOffset,x:h,y:f,width:Math.ceil(A),height:Math.ceil(l),id:u},g=n({},p,d,e),y=new o(g.scrollX,g.scrollY,g.windowWidth,g.windowHeight),Pe.create({id:u,enabled:g.logging}),Pe.getInstance(u).debug("Starting document clone"),v=new eo(t,{id:u,onclone:g.onclone,ignoreElements:g.ignoreElements,inlineImages:g.foreignObjectRendering,copyStyles:g.foreignObjectRendering}),(m=v.clonedReferenceElement)?[4,v.toIFrame(r,y)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return b=i.sent(),w=r.documentElement?Wo(getComputedStyle(r.documentElement).backgroundColor):Be.TRANSPARENT,_=r.body?Wo(getComputedStyle(r.body).backgroundColor):Be.TRANSPARENT,C="string"==typeof(B=e.backgroundColor)?Wo(B):null===B?Be.TRANSPARENT:4294967295,E=t===r.documentElement?fe(w)?fe(_)?C:_:w:C,Q={id:u,cache:g.cache,canvas:g.canvas,backgroundColor:E,scale:g.scale,x:g.x,y:g.y,scrollX:g.scrollX,scrollY:g.scrollY,width:g.width,height:g.height,windowWidth:g.windowWidth,windowHeight:g.windowHeight},g.foreignObjectRendering?(Pe.getInstance(u).debug("Document cloned, using foreign object rendering"),[4,new Go(Q).render(m)]):[3,3];case 2:return U=i.sent(),[3,5];case 3:return Pe.getInstance(u).debug("Document cloned, using computed rendering"),ke.attachInstance(g.cache),Pe.getInstance(u).debug("Starting DOM parsing"),O=bi(m),ke.detachInstance(),E===O.styles.backgroundColor&&(O.styles.backgroundColor=Be.TRANSPARENT),Pe.getInstance(u).debug("Starting renderer"),[4,new jo(Q).render(O)];case 4:U=i.sent(),i.label=5;case 5:return!0===g.removeContainer&&(eo.destroy(b)||Pe.getInstance(u).error("Cannot detach cloned iframe as it is not in the DOM anymore")),Pe.getInstance(u).debug("Finished rendering"),Pe.destroy(u),ke.destroy(u),[2,U]}})})}(t,e)}}()},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mAIw"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),A=new s.b("app","Firebase",c),l="@firebase/app",h="[DEFAULT]",f=((i={})[l]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),d=new u.b("@firebase/app"),p=function(){function t(t,e,n){var r,i,u=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.k)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return u},"PUBLIC"));try{for(var c=Object(o.h)(this.firebase_.INTERNAL.components.values()),A=c.next();!A.done;A=c.next())this._addComponent(A.value)}catch(l){r={error:l}}finally{try{A&&!A.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=h),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=h),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){d.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw A.create("app-deleted",{appName:this.name_})},t}();p.prototype.name&&p.prototype.options||p.prototype.delete||console.log("dc");var g=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=h);var a=o.name;if("string"!=typeof a||!a)throw A.create("bad-app-name",{appName:String(a)});if(Object(s.i)(e,a))throw A.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void d.warn(u.join(" "))}c(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw A.create("invalid-log-argument",{appName:name});Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.0.1",INTERNAL:{registerComponent:c,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||h,!Object(s.i)(e,t))throw A.create("no-app",{appName:t});return e[t]}function c(a){var u,c,l=a.name;if(n.has(l))return d.debug("There were multiple attempts to register component "+l+"."),"PUBLIC"===a.type?r[l]:null;if(n.set(l,a),"PUBLIC"===a.type){var h=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[l])throw A.create("invalid-app-argument",{appName:l});return t[l]()};void 0!==a.serviceProps&&Object(s.l)(h,a.serviceProps),r[l]=h,t.prototype[l]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,l).apply(this,a.multipleInstances?t:[])}}try{for(var f=Object(o.h)(Object.keys(e)),p=f.next();!p.done;p=f.next())e[p.value]._addComponent(a)}catch(g){u={error:g}}finally{try{p&&!p.done&&(c=f.return)&&c.call(f)}finally{if(u)throw u.error}}return"PUBLIC"===a.type?r[l]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(p);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.l)(e,t)},createSubscribe:s.j,ErrorFactory:s.b,deepExtend:s.l}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.p)()&&void 0!==self.firebase){d.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&d.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var m=g.initializeApp;g.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.v)()&&d.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),m.apply(void 0,t)};var b=g;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(l,"0.6.13",void 0),t.registerVersion("fire-js","")}(b),e.a=b},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");const i={apiKey:"AIzaSyCW-GSZG2ODAw6QbDDAbJ9ePEJP05sV_dE",authDomain:"score-machine-a7750.firebaseapp.com",databaseURL:"https://score-machine-a7750.firebaseio.com",projectId:"score-machine-a7750",storageBucket:"score-machine-a7750.appspot.com",messagingSenderId:"124300952239",appId:"1:124300952239:web:9a7714c468fa1e5675ca5a",measurementId:"G-BZ04SXL0W2"};let o=null;function s(){return o}const a=new r.l("DocumentToken");var u=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const c=r.bb;class A{}let l=(()=>{class t extends A{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(c(e||this.locale)(t)){case u.Zero:return"zero";case u.One:return"one";case u.Two:return"two";case u.Few:return"few";case u.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Db(r.p))},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac}),t})();function h(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let f=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.eb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got "+Object(r.jb)(t.item));this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.xb(r.n),r.xb(r.o),r.xb(r.h),r.xb(r.w))},t.\u0275dir=r.sb({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class d{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let p=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){Object(r.K)()&&null!=t&&"function"!=typeof t&&console&&console.warn&&console.warn(`trackBy must be a function, but received ${JSON.stringify(t)}. See https://angular.io/api/common/NgForOf#change-propagation for more information.`),this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new d(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new g(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new g(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.xb(r.F),r.xb(r.B),r.xb(r.n))},t.\u0275dir=r.sb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class g{constructor(t,e){this.record=t,this.view=e}}let y=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new v,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){m("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){m("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.xb(r.F),r.xb(r.B))},t.\u0275dir=r.sb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class v{constructor(){this.$implicit=null,this.ngIf=null}}function m(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.jb)(e)}'.`)}let b=(()=>{class t{}return t.\u0275mod=r.vb({type:t}),t.\u0275inj=r.ub({factory:function(e){return new(e||t)},providers:[{provide:A,useClass:l}]}),t})();function w(t){return"server"===t}class _ extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new _,o||(o=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=C||(C=document.querySelector("base"),C)?C.getAttribute("href"):null;return null==e?null:(n=e,B||(B=document.createElement("a")),B.setAttribute("href",n),"/"===B.pathname.charAt(0)?B.pathname:"/"+B.pathname);var n}resetBaseElement(){C=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return h(document.cookie,t)}}let B,C=null;const E=new r.l("TRANSITION_ID"),Q=[{provide:r.b,useFactory:function(t,e,n){return()=>{n.get(r.c).donePromise.then(()=>{const n=s();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[E,a,r.m],multi:!0}];class U{static init(){Object(r.M)(new U)}addToWindow(t){r.db.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.db.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.db.getAllAngularRootElements=()=>t.getAllRootElements(),r.db.frameworkStabilizers||(r.db.frameworkStabilizers=[]),r.db.frameworkStabilizers.push(t=>{const e=r.db.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?s().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const O=new r.l("EventManagerPlugins");let I=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error("No event manager plugin found for event "+t)}}return t.\u0275fac=function(e){return new(e||t)(r.Db(O),r.Db(r.s))},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac}),t})();class T{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=s().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let F=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac}),t})(),N=(()=>{class t extends F{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>s().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Db(a))},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac}),t})();const S={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},H=/%COMP%/g;function R(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?R(t,i,n):(i=i.replace(H,t),n.push(i))}return n}function x(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let D=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new P(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.G.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new k(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.G.ShadowDom:return new L(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=R(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Db(I),r.Db(N),r.Db(r.a))},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac}),t})();class P{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(S[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=S[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=S[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&r.y.DashCase?t.style.setProperty(e,n,i&r.y.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.y.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,x(n)):this.eventManager.addEventListener(t,e,x(n))}}class k extends P{constructor(t,e,n,r){super(t),this.component=n;const i=R(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(H,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(H,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class L extends P{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=R(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let M=(()=>{class t extends T{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Db(a))},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac}),t})();const j=["alt","control","meta","shift"],K={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},V={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},z={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let G=(()=>{class t extends T{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),o=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(e,i.domEventName,o))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(j.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&V.hasOwnProperty(e)&&(e=V[e]))}return K[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),j.forEach(r=>{r!=n&&(0,z[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Db(a))},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac}),t})();const q=[{provide:r.u,useValue:"browser"},{provide:r.v,useValue:function(){_.makeCurrent(),U.init()},multi:!0},{provide:a,useFactory:function(){return Object(r.ib)(document),document},deps:[]}],W=Object(r.H)(r.L,"browser",q),X=[[],{provide:r.O,useValue:"root"},{provide:r.i,useFactory:function(){return new r.i},deps:[]},{provide:O,useClass:M,multi:!0,deps:[a,r.s,r.u]},{provide:O,useClass:G,multi:!0,deps:[a]},[],{provide:D,useClass:D,deps:[I,N,r.a]},{provide:r.x,useExisting:D},{provide:F,useExisting:N},{provide:N,useClass:N,deps:[a]},{provide:r.C,useClass:r.C,deps:[r.s]},{provide:I,useClass:I,deps:[O,r.s]},[]];let J=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.a,useValue:e.appId},{provide:E,useExisting:r.a},Q]}}}return t.\u0275mod=r.vb({type:t}),t.\u0275inj=r.ub({factory:function(e){return new(e||t)(r.Db(t,12))},providers:X,imports:[b,r.d]}),t})();"undefined"!=typeof window&&window;var Y=n("XNiG"),$=n("LRne"),Z=n("HDdC"),tt=n("5+tZ"),et=n("7o/Q");function nt(t,e){return function(n){return n.lift(new rt(t,e))}}class rt{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new it(t,this.predicate,this.thisArg))}}class it extends et.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}var ot=n("lJxs");class st{}class at{}class ut{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof ut?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new ut;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof ut?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class ct{encodeKey(t){return At(t)}encodeValue(t){return At(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function At(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class lt{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new ct,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new lt({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat([t]),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function ht(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function ft(t){return"undefined"!=typeof Blob&&t instanceof Blob}function dt(t){return"undefined"!=typeof FormData&&t instanceof FormData}class pt{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new ut),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new lt,this.urlWithParams=e}serializeBody(){return null===this.body?null:ht(this.body)||ft(this.body)||dt(this.body)||"string"==typeof this.body?this.body:this.body instanceof lt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||dt(this.body)?null:ft(this.body)?this.body.type||null:ht(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof lt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new pt(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var gt=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class yt{constructor(t,e=200,n="OK"){this.headers=t.headers||new ut,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class vt extends yt{constructor(t={}){super(t),this.type=gt.ResponseHeader}clone(t={}){return new vt({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class mt extends yt{constructor(t={}){super(t),this.type=gt.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new mt({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class bt extends yt{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for "+(t.url||"(unknown url)"):`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function wt(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let _t=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof pt)r=t;else{let i=void 0;i=n.headers instanceof ut?n.headers:new ut(n.headers);let o=void 0;n.params&&(o=n.params instanceof lt?n.params:new lt({fromObject:n.params})),r=new pt(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object($.a)(r).pipe((o=t=>this.handler.handle(t),Object(tt.a)(o,void 0,1)));var o;if(t instanceof pt||"events"===n.observe)return i;const s=i.pipe(nt(t=>t instanceof mt));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return s.pipe(Object(ot.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return s.pipe(Object(ot.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return s.pipe(Object(ot.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return s.pipe(Object(ot.a)(t=>t.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new lt).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,wt(n,e))}post(t,e,n={}){return this.request("POST",t,wt(n,e))}put(t,e,n={}){return this.request("PUT",t,wt(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Db(st))},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac}),t})();class Bt{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const Ct=new r.l("HTTP_INTERCEPTORS");let Et=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac}),t})();const Qt=/^\)\]\}',?\n/;class Ut{}let Ot=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac}),t})(),It=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Z.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new ut(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new vt({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(Qt,"");try{u=""!==u?JSON.parse(u):null}catch(A){u=t,c&&(c=!1,u={error:A,text:u})}}c?(e.next(new mt({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new bt({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new bt({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:gt.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},A=t=>{let n={type:gt.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",A)),n.send(r),e.next({type:gt.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("load",s),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",A)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Db(Ut))},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac}),t})();const Tt=new r.l("XSRF_COOKIE_NAME"),Ft=new r.l("XSRF_HEADER_NAME");class Nt{}let St=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=h(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Db(a),r.Db(r.u),r.Db(Tt))},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac}),t})(),Ht=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Db(Nt),r.Db(Ft))},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac}),t})(),Rt=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(Ct,[]);this.chain=t.reduceRight((t,e)=>new Bt(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Db(at),r.Db(r.m))},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac}),t})(),xt=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Ht,useClass:Et}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:Tt,useValue:e.cookieName}:[],e.headerName?{provide:Ft,useValue:e.headerName}:[]]}}}return t.\u0275mod=r.vb({type:t}),t.\u0275inj=r.ub({factory:function(e){return new(e||t)},providers:[Ht,{provide:Ct,useExisting:Ht,multi:!0},{provide:Nt,useClass:St},{provide:Tt,useValue:"XSRF-TOKEN"},{provide:Ft,useValue:"X-XSRF-TOKEN"}]}),t})(),Dt=(()=>{class t{}return t.\u0275mod=r.vb({type:t}),t.\u0275inj=r.ub({factory:function(e){return new(e||t)},providers:[_t,{provide:st,useClass:Rt},It,{provide:at,useExisting:It},Ot,{provide:Ut,useExisting:Ot}],imports:[[xt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),Pt=(()=>{class t{constructor(t){this.http=t,this.user={name:"August",password:"57016308"},this.isAuthenticated=!1,this.authenticationChanged=new Y.a}getStatus(){return console.log("Auth Service: ",this.isAuthenticated),this.isAuthenticated}onLogin(t,e){t===this.user.name&&e===this.user.password&&(this.isAuthenticated=!0,this.authenticationChanged.next())}onLogout(){this.isAuthenticated&&(this.isAuthenticated=!1,this.authenticationChanged.next())}}return t.\u0275fac=function(e){return new(e||t)(r.Db(_t))},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var kt=n("DH7j"),Lt=n("XoHu"),Mt=n("Cfvw");function jt(t,e){return new Z.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(Mt.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}const Kt=new r.l("NgValueAccessor"),Vt={provide:Kt,useExisting:Object(r.J)(()=>zt),multi:!0};let zt=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"checked",t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.xb(r.w),r.xb(r.h))},t.\u0275dir=r.sb({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,e){1&t&&r.Gb("change",function(t){return e.onChange(t.target.checked)})("blur",function(){return e.onTouched()})},features:[r.nb([Vt])]}),t})();const Gt={provide:Kt,useExisting:Object(r.J)(()=>Wt),multi:!0},qt=new r.l("CompositionEventMode");let Wt=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=s()?s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.xb(r.w),r.xb(r.h),r.xb(qt,8))},t.\u0275dir=r.sb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Gb("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.nb([Gt])]}),t})();function Xt(t){return null==t||0===t.length}function Jt(t){return null!=t&&"number"==typeof t.length}const Yt=new r.l("NgValidators"),$t=new r.l("NgAsyncValidators"),Zt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class te{static min(t){return e=>{if(Xt(e.value)||Xt(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}static max(t){return e=>{if(Xt(e.value)||Xt(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}static required(t){return Xt(t.value)?{required:!0}:null}static requiredTrue(t){return!0===t.value?null:{required:!0}}static email(t){return Xt(t.value)||Zt.test(t.value)?null:{email:!0}}static minLength(t){return e=>Xt(e.value)||!Jt(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}static maxLength(t){return e=>Jt(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}static pattern(t){if(!t)return te.nullValidator;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Xt(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}static nullValidator(t){return null}static compose(t){if(!t)return null;const e=t.filter(ee);return 0==e.length?null:function(t){return re(ie(t,e))}}static composeAsync(t){if(!t)return null;const e=t.filter(ee);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(kt.a)(e))return jt(e,null);if(Object(Lt.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return jt(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return jt(t=1===t.length&&Object(kt.a)(t[0])?t[0]:t,null).pipe(Object(ot.a)(t=>e(...t)))}return jt(t,null)}(ie(t,e).map(ne)).pipe(Object(ot.a)(re))}}}function ee(t){return null!=t}function ne(t){const e=Object(r.gb)(t)?Object(Mt.a)(t):t;return Object(r.fb)(e),e}function re(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function ie(t,e){return e.map(e=>e(t))}function oe(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function se(t){return null!=t?te.compose(oe(t)):null}function ae(t){return null!=t?te.composeAsync(oe(t)):null}function ue(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function ce(t){return t._rawValidators}function Ae(t){return t._rawAsyncValidators}let le=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=se(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=ae(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.sb({type:t}),t})(),he=(()=>{class t extends le{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return fe(e||t)},t.\u0275dir=r.sb({type:t,features:[r.lb]}),t})();const fe=r.Cb(he);class de extends le{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class pe{constructor(t){this._cd=t}get ngClassUntouched(){return!!this._cd.control&&this._cd.control.untouched}get ngClassTouched(){return!!this._cd.control&&this._cd.control.touched}get ngClassPristine(){return!!this._cd.control&&this._cd.control.pristine}get ngClassDirty(){return!!this._cd.control&&this._cd.control.dirty}get ngClassValid(){return!!this._cd.control&&this._cd.control.valid}get ngClassInvalid(){return!!this._cd.control&&this._cd.control.invalid}get ngClassPending(){return!!this._cd.control&&this._cd.control.pending}}let ge=(()=>{class t extends pe{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.xb(de,2))},t.\u0275dir=r.sb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.qb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.lb]}),t})(),ye=(()=>{class t extends pe{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.xb(he,2))},t.\u0275dir=r.sb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.qb("ng-untouched",e.ngClassUntouched)("ng-touched",e.ngClassTouched)("ng-pristine",e.ngClassPristine)("ng-dirty",e.ngClassDirty)("ng-valid",e.ngClassValid)("ng-invalid",e.ngClassInvalid)("ng-pending",e.ngClassPending)},features:[r.lb]}),t})();const ve="VALID",me="INVALID",be="PENDING",we="DISABLED";function _e(t){return(Qe(t)?t.validators:t)||null}function Be(t){return Array.isArray(t)?se(t):t||null}function Ce(t,e){return(Qe(e)?e.asyncValidators:t)||null}function Ee(t){return Array.isArray(t)?ae(t):t||null}function Qe(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Ue{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=Be(this._rawValidators),this._composedAsyncValidatorFn=Ee(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===ve}get invalid(){return this.status===me}get pending(){return this.status==be}get disabled(){return this.status===we}get enabled(){return this.status!==we}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=Be(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=Ee(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=be,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=we,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ve,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==ve&&this.status!==be||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?we:ve}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=be,this._hasOwnPendingAsyncValidator=!0;const e=ne(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Ie?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Te&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.j,this.statusChanges=new r.j}_calculateStatus(){return this._allControlsDisabled()?we:this.errors?me:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(be)?be:this._anyControlsHaveStatus(me)?me:ve}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Qe(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Oe extends Ue{constructor(t=null,e,n){super(_e(e),Ce(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_clearChangeFns(){this._onChange=[],this._onDisabledChange=[],this._onCollectionChange=()=>{}}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Ie extends Ue{constructor(t,e,n){super(_e(e),Ce(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Oe?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>t(this.controls[e],e))}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Te extends Ue{constructor(t,e,n){super(_e(e),Ce(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Oe?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Fe={provide:Kt,useExisting:Object(r.J)(()=>Ne),multi:!0};let Ne=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.xb(r.w),r.xb(r.h))},t.\u0275dir=r.sb({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,e){1&t&&r.Gb("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.nb([Fe])]}),t})();const Se={provide:Kt,useExisting:Object(r.J)(()=>Re),multi:!0};let He=(()=>{class t{constructor(){this._accessors=[]}add(t,e){this._accessors.push([t,e])}remove(t){for(let e=this._accessors.length-1;e>=0;--e)if(this._accessors[e][1]===t)return void this._accessors.splice(e,1)}select(t){this._accessors.forEach(e=>{this._isSameGroup(e,t)&&e[1]!==t&&e[1].fireUncheck(t.value)})}_isSameGroup(t,e){return!!t[0].control&&t[0]._parent===e._control._parent&&t[1].name===e.name}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac}),t})(),Re=(()=>{class t{constructor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=()=>{},this.onTouched=()=>{}}ngOnInit(){this._control=this._injector.get(de),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(t){this._state=t===this.value,this._renderer.setProperty(this._elementRef.nativeElement,"checked",this._state)}registerOnChange(t){this._fn=t,this.onChange=()=>{t(this.value),this._registry.select(this)}}fireUncheck(t){this.writeValue(t)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}}return t.\u0275fac=function(e){return new(e||t)(r.xb(r.w),r.xb(r.h),r.xb(He),r.xb(r.m))},t.\u0275dir=r.sb({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(t,e){1&t&&r.Gb("change",function(){return e.onChange()})("blur",function(){return e.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[r.nb([Se])]}),t})();const xe={provide:Kt,useExisting:Object(r.J)(()=>De),multi:!0};let De=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",parseFloat(t))}registerOnChange(t){this.onChange=e=>{t(""==e?null:parseFloat(e))}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(r.xb(r.w),r.xb(r.h))},t.\u0275dir=r.sb({type:t,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(t,e){1&t&&r.Gb("change",function(t){return e.onChange(t.target.value)})("input",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},features:[r.nb([xe])]}),t})();const Pe={provide:Kt,useExisting:Object(r.J)(()=>ke),multi:!0};let ke=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=function(t,e){return null==t?""+e:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.xb(r.w),r.xb(r.h))},t.\u0275dir=r.sb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Gb("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.nb([Pe])]}),t})();const Le={provide:Kt,useExisting:Object(r.J)(()=>Me),multi:!0};let Me=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.xb(r.w),r.xb(r.h))},t.\u0275dir=r.sb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Gb("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.nb([Le])]}),t})();function je(t,e){return[...e.path,t]}function Ke(t,e){ze(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&qe(t,e)})}(t,e),function(t,e){t.registerOnChange((t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&qe(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),e.valueAccessor.setDisabledState&&t.registerOnDisabledChange(t=>{e.valueAccessor.setDisabledState(t)})}function Ve(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ze(t,e,n){const r=ce(t);null!==e.validator?t.setValidators(ue(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=Ae(t);if(null!==e.asyncValidator?t.setAsyncValidators(ue(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();Ve(e._rawValidators,n),Ve(e._rawAsyncValidators,n)}}function Ge(t,e,n){if(null!==t){if(null!==e.validator){const n=ce(t);Array.isArray(n)&&n.length>0&&t.setValidators(n.filter(t=>t!==e.validator))}if(null!==e.asyncValidator){const n=Ae(t);Array.isArray(n)&&n.length>0&&t.setAsyncValidators(n.filter(t=>t!==e.asyncValidator))}}if(n){const t=()=>{};Ve(e._rawValidators,t),Ve(e._rawAsyncValidators,t)}}function qe(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function We(t,e){ze(t,e,!1)}function Xe(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}const Je=[zt,De,Ne,ke,Me,Re];function Ye(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function $e(t,e){if(!e)return null;Array.isArray(e);let n=void 0,r=void 0,i=void 0;return e.forEach(t=>{var e;t.constructor===Wt?n=t:(e=t,Je.some(t=>e.constructor===t)?r=t:i=t)}),i||r||n||null}function Ze(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const tn={provide:he,useExisting:Object(r.J)(()=>nn)},en=(()=>Promise.resolve(null))();let nn=(()=>{class t extends he{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.j,this.form=new Ie({},se(t),ae(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){en.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),Ke(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){en.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),Ze(this._directives,t)})}addFormGroup(t){en.then(()=>{const e=this._findContainer(t.path),n=new Ie({});We(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){en.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){en.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,Ye(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(r.xb(Yt,10),r.xb($t,10))},t.\u0275dir=r.sb({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&r.Gb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.nb([tn]),r.lb]}),t})();const rn={provide:de,useExisting:Object(r.J)(()=>sn)},on=(()=>Promise.resolve(null))();let sn=(()=>{class t extends de{constructor(t,e,n,i){super(),this.control=new Oe,this._registered=!1,this.update=new r.j,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=$e(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),Xe(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?je(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ke(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){on.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;on.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(r.xb(he,9),r.xb(Yt,10),r.xb($t,10),r.xb(Kt,10))},t.\u0275dir=r.sb({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r.nb([rn]),r.lb,r.mb]}),t})(),an=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.sb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})();const un=new r.l("NgModelWithFormControlWarning"),cn={provide:he,useExisting:Object(r.J)(()=>An)};let An=(()=>{class t extends he{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new r.j,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return Ke(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){Ze(this.directives,t)}addFormGroup(t){const e=this.form.get(t.path);We(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormGroup(t){}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){const e=this.form.get(t.path);We(e,t),e.updateValueAndValidity({emitEvent:!1})}removeFormArray(t){}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,Ye(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=this.form.get(t.path);t.control!==e&&(function(t,e){const n=()=>{};e.valueAccessor.registerOnChange(n),e.valueAccessor.registerOnTouched(n),Ge(t,e,!0),t&&t._clearChangeFns()}(t.control||null,t),e&&Ke(e,t),t.control=e)}),this.form._updateTreeValidity({emitEvent:!1})}_updateRegistrations(){this.form._registerOnCollectionChange(()=>this._updateDomValue()),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ze(this.form,this,!1),this._oldForm&&Ge(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.xb(Yt,10),r.xb($t,10))},t.\u0275dir=r.sb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Gb("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.nb([cn]),r.lb,r.mb]}),t})();const ln={provide:de,useExisting:Object(r.J)(()=>hn)};let hn=(()=>{class t extends de{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.j,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=$e(0,i)}set isDisabled(t){}ngOnChanges(e){this._added||this._setUpControl(),Xe(e,this.viewModel)&&(function(t,e,n,i){Object(r.K)()&&"never"!==i&&((null!==i&&"once"!==i||e._ngModelWarningSentOnce)&&("always"!==i||n._ngModelWarningSent)||(e._ngModelWarningSentOnce=!0,n._ngModelWarningSent=!0))}(0,t,this,this._ngModelWarningConfig),this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return je(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.xb(he,13),r.xb(Yt,10),r.xb($t,10),r.xb(Kt,10),r.xb(un,8))},t.\u0275dir=r.sb({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.nb([ln]),r.lb,r.mb]}),t._ngModelWarningSentOnce=!1,t})();const fn={provide:Yt,useExisting:Object(r.J)(()=>dn),multi:!0};let dn=(()=>{class t{constructor(){this._required=!1}get required(){return this._required}set required(t){this._required=null!=t&&!1!==t&&""+t!="false",this._onChange&&this._onChange()}validate(t){return this.required?te.required(t):null}registerOnValidatorChange(t){this._onChange=t}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.sb({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,e){2&t&&r.pb("required",e.required?"":null)},inputs:{required:"required"},features:[r.nb([fn])]}),t})(),pn=(()=>{class t{}return t.\u0275mod=r.vb({type:t}),t.\u0275inj=r.ub({factory:function(e){return new(e||t)}}),t})(),gn=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let r=null,i=null,o=void 0;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,i=null!=e.asyncValidators?e.asyncValidators:null,o=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,i=null!=e.asyncValidator?e.asyncValidator:null)),new Ie(n,{asyncValidators:i,updateOn:o,validators:r})}control(t,e,n){return new Oe(t,e,n)}array(t,e,n){const r=t.map(t=>this._createControl(t));return new Te(r,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Oe||t instanceof Ie||t instanceof Te?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac}),t})(),yn=(()=>{class t{}return t.\u0275mod=r.vb({type:t}),t.\u0275inj=r.ub({factory:function(e){return new(e||t)},providers:[He],imports:[pn]}),t})(),vn=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:un,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275mod=r.vb({type:t}),t.\u0275inj=r.ub({factory:function(e){return new(e||t)},providers:[gn,He],imports:[pn]}),t})();function mn(t,e){1&t&&(r.Ab(0,"button",30),r.Pb(1," login "),r.zb())}function bn(t,e){if(1&t){const t=r.Bb();r.Ab(0,"button",31),r.Gb("click",function(){return r.Lb(t),r.Hb().onLogout()}),r.Pb(1," logout "),r.zb()}}const wn=function(t,e){return{admin:t,client:e}};let _n=(()=>{class t{constructor(t){this.authService=t,this.isAuthenticated=!1}ngOnInit(){this.isAuthenticated=this.authService.getStatus(),this.authSubscription=this.authService.authenticationChanged.subscribe(()=>{this.isAuthenticated=this.authService.getStatus()})}ngOnDestroy(){this.authSubscription.unsubscribe()}onSubmit(t){this.authService.onLogin(t.value.name,t.value.password)}onLogout(){this.authService.onLogout()}}return t.\u0275fac=function(e){return new(e||t)(r.xb(Pt))},t.\u0275cmp=r.rb({type:t,selectors:[["app-navigation"]],decls:42,vars:7,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","fixed-top",3,"ngClass"],["href","#",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["href","#",1,"nav-link"],[1,"sr-only"],[1,"navbar-nav"],["class","nav-link w-100 text-left","style","background-color: transparent; border: none;","data-toggle","modal","data-target","#loginModal","data-whatever","@mdo",4,"ngIf"],["class","nav-link w-100 text-left","style","background-color: transparent; border: none;",3,"click",4,"ngIf"],["id","loginModal","tabindex","-1","role","dialog","aria-labelledby","loginLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","loginLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["closeModal",""],["aria-hidden","true"],[1,"modal-body"],["f","ngForm"],[1,"form-group"],["for","user-name",1,"col-form-label"],["type","text","id","user-name","name","name","ngModel","","required","",1,"form-control"],["for","user-password",1,"col-form-label"],["type","text","id","user-password","name","password","ngModel","","required","",1,"form-control"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-success",3,"disabled","click"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["data-toggle","modal","data-target","#loginModal","data-whatever","@mdo",1,"nav-link","w-100","text-left",2,"background-color","transparent","border","none"],[1,"nav-link","w-100","text-left",2,"background-color","transparent","border","none",3,"click"]],template:function(t,e){if(1&t){const t=r.Bb();r.Ab(0,"nav",0),r.Ab(1,"a",1),r.Pb(2,"August Club"),r.zb(),r.Ab(3,"button",2),r.yb(4,"span",3),r.zb(),r.Ab(5,"div",4),r.Ab(6,"ul",5),r.Ab(7,"li",6),r.Ab(8,"a",7),r.Pb(9,"Texas Poker"),r.Ab(10,"span",8),r.Pb(11,"(current)"),r.zb(),r.zb(),r.zb(),r.zb(),r.Ab(12,"ul",9),r.Ab(13,"li",6),r.Ob(14,mn,2,0,"button",10),r.Ob(15,bn,2,0,"button",11),r.zb(),r.zb(),r.zb(),r.Ab(16,"div",12),r.Ab(17,"div",13),r.Ab(18,"div",14),r.Ab(19,"div",15),r.Ab(20,"h5",16),r.Pb(21,"Log In"),r.zb(),r.Ab(22,"button",17,18),r.Ab(24,"span",19),r.Pb(25,"\xd7"),r.zb(),r.zb(),r.zb(),r.Ab(26,"div",20),r.Ab(27,"form",null,21),r.Ab(29,"div",22),r.Ab(30,"label",23),r.Pb(31,"Name:"),r.zb(),r.yb(32,"input",24),r.zb(),r.Ab(33,"div",22),r.Ab(34,"label",25),r.Pb(35,"Password:"),r.zb(),r.yb(36,"input",26),r.zb(),r.Ab(37,"div",27),r.Ab(38,"button",28),r.Gb("click",function(){r.Lb(t);const n=r.Kb(28);return e.onSubmit(n)}),r.Pb(39,"Log In"),r.zb(),r.Ab(40,"button",29),r.Pb(41,"Cancel"),r.zb(),r.zb(),r.zb(),r.zb(),r.zb(),r.zb(),r.zb(),r.zb()}if(2&t){const t=r.Kb(28);r.Ib("ngClass",r.Jb(4,wn,e.isAuthenticated,!e.isAuthenticated)),r.ob(14),r.Ib("ngIf",!e.isAuthenticated),r.ob(1),r.Ib("ngIf",e.isAuthenticated),r.ob(23),r.Ib("disabled",!t.valid)}},directives:[f,y,an,ye,nn,Wt,ge,sn,dn],styles:[".admin[_ngcontent-%COMP%]{background-color:#436c90!important}.client[_ngcontent-%COMP%]{background-color:#343a40!important}.fixed-top[_ngcontent-%COMP%]{position:fixed;top:0;right:0;left:0;z-index:1050}"]}),t})();var Bn=n("quSY");class Cn{constructor(t){this.callback=t}call(t,e){return e.subscribe(new En(t,this.callback))}}class En extends et.a{constructor(t,e){super(t),this.add(new Bn.a(e))}}var Qn=n("wOnQ"),Un=n.n(Qn),On=n("vkgz"),In=n("D0XW"),Tn=n("bHdf");function Fn(...t){return Object(Tn.a)(1)(Object($.a)(...t))}var Nn=n("z+Ro");function Sn(...t){const e=t[t.length-1];return Object(Nn.a)(e)?(t.pop(),n=>Fn(t,n,e)):e=>Fn(t,e)}function Hn(){return t=>t.lift(new Rn)}class Rn{call(t,e){return e.subscribe(new xn(t))}}class xn extends et.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function Dn(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Pn(t,e,n))}}class Pn{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new kn(t,this.accumulator,this.seed,this.hasSeed))}}class kn extends et.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Ln(t,e){return n=>n.lift(new Mn(t,e))}class Mn{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new jn(t,this.compare,this.keySelector))}}class jn extends et.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Kn=n("pxpQ"),Vn=n("spgP"),zn=n("Jgta"),Gn=n("mAIw"),qn=n("zIRd"),Wn=n("q/0M"),Xn=n("qOnz"),Jn=function(t,e){return(Jn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Yn(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var $n,Zn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},tr=tr||{},er=Zn||self;function nr(){}function rr(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function ir(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var or="closure_uid_"+(1e9*Math.random()>>>0),sr=0;function ar(t,e,n){return t.call.apply(t.bind,arguments)}function ur(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function cr(t,e,n){return(cr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ar:ur).apply(null,arguments)}function Ar(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function lr(){return Date.now()}function hr(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function fr(){this.j=this.j,this.i=this.i}fr.prototype.j=!1,fr.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,or)&&t[or]||(t[or]=++sr)}(this)},fr.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var dr=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},pr=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function gr(t){return Array.prototype.concat.apply([],arguments)}function yr(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function vr(t){return/^[\s\xa0]*$/.test(t)}var mr,br=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function wr(t,e){return-1!=t.indexOf(e)}function _r(t,e){return t<e?-1:t>e?1:0}t:{var Br=er.navigator;if(Br){var Cr=Br.userAgent;if(Cr){mr=Cr;break t}}mr=""}function Er(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Qr(t){var e={};for(var n in t)e[n]=t[n];return e}var Ur="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Or(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Ur.length;o++)n=Ur[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Ir(t){return Ir[" "](t),t}Ir[" "]=nr;var Tr,Fr,Nr=wr(mr,"Opera"),Sr=wr(mr,"Trident")||wr(mr,"MSIE"),Hr=wr(mr,"Edge"),Rr=Hr||Sr,xr=wr(mr,"Gecko")&&!(wr(mr.toLowerCase(),"webkit")&&!wr(mr,"Edge"))&&!(wr(mr,"Trident")||wr(mr,"MSIE"))&&!wr(mr,"Edge"),Dr=wr(mr.toLowerCase(),"webkit")&&!wr(mr,"Edge");function Pr(){var t=er.document;return t?t.documentMode:void 0}t:{var kr="",Lr=(Fr=mr,xr?/rv:([^\);]+)(\)|;)/.exec(Fr):Hr?/Edge\/([\d\.]+)/.exec(Fr):Sr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Fr):Dr?/WebKit\/(\S+)/.exec(Fr):Nr?/(?:Version)[ \/]?(\S+)/.exec(Fr):void 0);if(Lr&&(kr=Lr?Lr[1]:""),Sr){var Mr=Pr();if(null!=Mr&&Mr>parseFloat(kr)){Tr=String(Mr);break t}}Tr=kr}var jr={};function Kr(t){return function(t,e){var n=jr;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=br(String(Tr)).split("."),r=br(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=_r(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||_r(0==s[2].length,0==a[2].length)||_r(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Vr=er.document&&Sr&&(Pr()||parseInt(Tr,10))||void 0,zr=!Sr||9<=Number(Vr),Gr=Sr&&!Kr("9"),qr=function(){if(!er.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{er.addEventListener("test",nr,e),er.removeEventListener("test",nr,e)}catch(n){}return t}();function Wr(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Xr(t,e){if(Wr.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(xr){t:{try{Ir(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Jr[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Wr.prototype.b=function(){this.defaultPrevented=!0},hr(Xr,Wr);var Jr={2:"touch",3:"pen",4:"mouse"};Xr.prototype.b=function(){Xr.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Gr)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Yr="closure_listenable_"+(1e6*Math.random()|0),$r=0;function Zr(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++$r,this.Y=this.Z=!1}function ti(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function ei(t){this.src=t,this.a={},this.b=0}function ni(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=dr(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ti(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ri(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}ei.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ri(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Zr(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var ii="closure_lm_"+(1e6*Math.random()|0),oi={};function si(t,e,n,r,i){if(r&&r.once)return ui(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)si(t,e[o],n,r,i);return null}return n=gi(n),t&&t[Yr]?t.va(e,n,ir(r)?!!r.capture:!!r,i):ai(t,e,n,!1,r,i)}function ai(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=ir(i)?!!i.capture:!!i;if(s&&!zr)return null;var a=di(t);if(a||(t[ii]=a=new ei(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=fi,e=zr?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)qr||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(li(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function ui(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)ui(t,e[o],n,r,i);return null}return n=gi(n),t&&t[Yr]?t.wa(e,n,ir(r)?!!r.capture:!!r,i):ai(t,e,n,!0,r,i)}function ci(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ci(t,e[o],n,r,i);else r=ir(r)?!!r.capture:!!r,n=gi(n),t&&t[Yr]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=ri(o=t.a[e],n,r,i))&&(ti(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=di(t))&&(e=t.a[e.toString()],t=-1,e&&(t=ri(e,n,r,i)),(n=-1<t?e[t]:null)&&Ai(n))}function Ai(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Yr])ni(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(li(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=di(e))?(ni(n,t),0==n.b&&(n.src=null,e[ii]=null)):ti(t)}}}function li(t){return t in oi?oi[t]:oi[t]="on"+t}function hi(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Ai(t),n.call(r,e)}function fi(t,e){if(t.Y)return!0;if(!zr){if(!e)t:{e=["window","event"];for(var n=er,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return hi(t,e=new Xr(e,this))}return hi(t,new Xr(e,this))}function di(t){return(t=t[ii])instanceof ei?t:null}var pi="__closure_events_fn_"+(1e9*Math.random()>>>0);function gi(t){return"function"==typeof t?t:(t[pi]||(t[pi]=function(e){return t.handleEvent(e)}),t[pi])}function yi(){fr.call(this),this.c=new ei(this),this.J=this,this.C=null}function vi(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Wr(e,t);else if(e instanceof Wr)e.target=e.target||t;else{var i=e;Or(e=new Wr(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=mi(s,r,!0,e)&&i}if(i=mi(s=e.a=t,r,!0,e)&&i,i=mi(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=mi(s=e.a=n[o],r,!1,e)&&i}function mi(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&ni(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}hr(yi,fr),yi.prototype[Yr]=!0,($n=yi.prototype).addEventListener=function(t,e,n,r){si(this,t,e,n,r)},$n.removeEventListener=function(t,e,n,r){ci(this,t,e,n,r)},$n.G=function(){if(yi.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ti(n[r]);delete e.a[t],e.b--}}this.C=null},$n.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},$n.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var bi=er.JSON.stringify;function wi(){this.b=this.a=null}var _i,Bi=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new Ei},function(t){t.reset()});function Ci(){var t=Ii,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Ei(){this.next=this.b=this.a=null}function Qi(t){er.setTimeout(function(){throw t},0)}function Ui(t,e){_i||function(){var t=er.Promise.resolve(void 0);_i=function(){t.then(Ti)}}(),Oi||(_i(),Oi=!0),Ii.add(t,e)}wi.prototype.add=function(t,e){var n=Bi.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ei.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Ei.prototype.reset=function(){this.next=this.b=this.a=null};var Oi=!1,Ii=new wi;function Ti(){for(var t;t=Ci();){try{t.a.call(t.b)}catch(n){Qi(n)}var e=Bi;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Oi=!1}function Fi(t,e){yi.call(this),this.b=t||1,this.a=e||er,this.f=cr(this.Za,this),this.g=lr()}function Ni(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Si(t,e,n){if("function"==typeof t)n&&(t=cr(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=cr(t.handleEvent,t)}return 2147483647<Number(e)?-1:er.setTimeout(t,e||0)}function Hi(t){t.a=Si(function(){t.a=null,t.c&&(t.c=!1,Hi(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}hr(Fi,yi),($n=Fi.prototype).aa=!1,$n.M=null,$n.Za=function(){if(this.aa){var t=lr()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),vi(this,"tick"),this.aa&&(Ni(this),this.start()))}},$n.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=lr())},$n.G=function(){Fi.X.G.call(this),Ni(this),delete this.a};var Ri=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Jn(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Hi(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(er.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(fr);function xi(t){fr.call(this),this.b=t,this.a={}}hr(xi,fr);var Di=[];function Pi(t,e,n,r){Array.isArray(n)||(n&&(Di[0]=n.toString()),n=Di);for(var i=0;i<n.length;i++){var o=si(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ki(t){Er(t.a,function(t,e){this.a.hasOwnProperty(e)&&Ai(t)},t),t.a={}}function Li(){this.a=!0}function Mi(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return bi(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}xi.prototype.G=function(){xi.X.G.call(this),ki(this)},xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Li.prototype.info=function(){};var ji={},Ki=null;function Vi(){return Ki=Ki||new yi}function zi(t){Wr.call(this,ji.Fa,t)}function Gi(t){var e=Vi();vi(e,new zi(e,t))}function qi(t,e){Wr.call(this,ji.STAT_EVENT,t),this.stat=e}function Wi(t){var e=Vi();vi(e,new qi(e,t))}function Xi(t){Wr.call(this,ji.Ga,t)}function Ji(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return er.setTimeout(function(){t()},e)}ji.Fa="serverreachability",hr(zi,Wr),ji.STAT_EVENT="statevent",hr(qi,Wr),ji.Ga="timingevent",hr(Xi,Wr);var Yi={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},$i={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Zi(){}function to(){}Zi.prototype.a=null;var eo,no={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function ro(){Wr.call(this,"d")}function io(){Wr.call(this,"c")}function oo(){}function so(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new xi(this),this.P=ao,this.R=new Fi(t=Rr?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}hr(ro,Wr),hr(io,Wr),hr(oo,Zi),eo=new oo;var ao=45e3,uo={},co={};function Ao(t,e,n){t.H=1,t.i=So(Uo(e)),t.j=n,t.I=!0,lo(t,null)}function lo(t,e){t.u=lr(),po(t),t.l=Uo(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Go(n.b,"t",r),t.D=0,t.a=Ls(t.g,t.g.C?e:null),0<t.O&&(t.F=new Ri(cr(t.Ca,t,t.a),t.O)),Pi(t.J,t.a,"readystatechange",t.Xa),e=t.B?Qr(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Gi(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var A=c[0];c=c[1];var l=A.split("_");s=2<=l.length&&"type"==l[1]?s+(A+"=")+c+"&":s+(A+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function ho(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=fo(t,n);if(i==co){4==e&&(t.h=4,Wi(14),r=!1),Mi(t.c,t.f,null,"[Incomplete Response]");break}if(i==uo){t.h=4,Wi(15),Mi(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Mi(t.c,t.f,i,null),bo(t,i)}4==e&&0==n.length&&(t.h=1,Wi(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ns(e),e.F=!0,Wi(11))):(Mi(t.c,t.f,n,"[Invalid Chunked Response]"),mo(t),vo(t))}function fo(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?co:(n=Number(e.substring(n,r)),isNaN(n)?uo:(r+=1)+n>e.length?co:(e=e.substr(r,n),t.D=r+n,e))}function po(t){t.T=lr()+t.P,go(t,t.P)}function go(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Ji(cr(t.Va,t),e)}function yo(t){t.o&&(er.clearTimeout(t.o),t.o=null)}function vo(t){0==t.g.v||t.A||Rs(t.g,t)}function mo(t){yo(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ni(t.R),ki(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function bo(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Zo(n.b,t)))if(n.I=t.N,!t.C&&Zo(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Ig){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;Hs(n),Bs(n)}Fs(n),Wi(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Ji(cr(n.Sa,n),6e3));if(1>=$o(n.b)&&n.ea){try{n.ea()}catch(Ig){}n.ea=void 0}}else Ds(n,11)}else if((t.C||n.a==t)&&Hs(n),!vr(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var A=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(A){var l=u.b;!l.a&&(wr(A,"spdy")||wr(A,"quic")||wr(A,"h2"))&&(l.f=l.g,l.a=new Set,l.b&&(ts(l,l.b),l.b=null))}if(u.A){var h=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;h&&(u.na=h,No(u.B,u.A,h))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=lr()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=ks(u,u.C?u.ga:null,u.fa),f.C){es(u.b,f);var d=f,p=u.D;p&&d.setTimeout(p),d.o&&(yo(d),po(d)),u.a=f}else Ts(u);0<n.g.length&&Qs(n)}else"stop"!=i[0]&&"close"!=i[0]||Ds(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Ds(n,7):_s(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Gi(4)}catch(Ig){}}function wo(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(rr(t)||"string"==typeof t)pr(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(rr(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(rr(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function _o(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof _o)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Bo(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Co(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Co(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Co(t,e){return Object.prototype.hasOwnProperty.call(t,e)}($n=so.prototype).setTimeout=function(t){this.P=t},$n.Xa=function(t){t=t.target;var e=this.F;e&&3==vs(t)?e.f():this.Ca(t)},$n.Ca=function(t){try{if(t==this.a)t:{var e=vs(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Rr&&!this.a.$())){this.A||4!=e||7==n||Gi(8==n||0>=r?3:2),yo(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!vr(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Wi(12),mo(this),vo(this);break t}Mi(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,bo(this,u)}this.I?(ho(this,e,o),Rr&&this.b&&3==e&&(Pi(this.J,this.R,"tick",this.Wa),this.R.start())):(Mi(this.c,this.f,o,null),bo(this,o)),4==e&&mo(this),this.b&&!this.A&&(4==e?Rs(this.g,this):(this.b=!1,po(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Wi(12)):(this.h=0,Wi(13)),mo(this),vo(this)}}}catch(c){}},$n.Wa=function(){if(this.a){var t=vs(this.a),e=this.a.$();this.D<e.length&&(yo(this),ho(this,t,e),this.b&&4!=t&&po(this))}},$n.cancel=function(){this.A=!0,mo(this)},$n.Va=function(){this.o=null;var t=lr();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Gi(3),Wi(17)),mo(this),this.h=2,vo(this)):go(this,this.T-t)},($n=_o.prototype).K=function(){Bo(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},$n.L=function(){return Bo(this),this.a.concat()},$n.get=function(t,e){return Co(this.b,t)?this.b[t]:e},$n.set=function(t,e){Co(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},$n.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Eo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Qo(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof Qo){this.a=void 0!==e?e:t.a,Oo(this,t.f),this.j=t.j,Io(this,t.c),To(this,t.h),this.g=t.g,e=t.b;var n=new jo;n.c=e.c,e.a&&(n.a=new _o(e.a),n.b=e.b),Fo(this,n),this.i=t.i}else t&&(n=String(t).match(Eo))?(this.a=!!e,Oo(this,n[1]||"",!0),this.j=Ho(n[2]||""),Io(this,n[3]||"",!0),To(this,n[4]),this.g=Ho(n[5]||"",!0),Fo(this,n[6]||"",!0),this.i=Ho(n[7]||"")):(this.a=!!e,this.b=new jo(null,this.a))}function Uo(t){return new Qo(t)}function Oo(t,e,n){t.f=n?Ho(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Io(t,e,n){t.c=n?Ho(e,!0):e}function To(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function Fo(t,e,n){e instanceof jo?(t.b=e,function(t,e){e&&!t.f&&(Ko(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Vo(this,e),Go(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Ro(e,Lo)),t.b=new jo(e,t.a))}function No(t,e,n){t.b.set(e,n)}function So(t){return No(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^lr()).toString(36)),t}function Ho(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ro(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,xo),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function xo(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Qo.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ro(e,Do,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ro(e,Do,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ro(n,"/"==n.charAt(0)?ko:Po,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ro(n,Mo)),t.join("")};var Do=/[#\/\?@]/g,Po=/[#\?:]/g,ko=/[#\?]/g,Lo=/[#\?@]/g,Mo=/#/g;function jo(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ko(t){t.a||(t.a=new _o,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Vo(t,e){Ko(t),e=qo(t,e),Co(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Co((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Bo(t)))}function zo(t,e){return Ko(t),e=qo(t,e),Co(t.a.b,e)}function Go(t,e,n){Vo(t,e),0<n.length&&(t.c=null,t.a.set(qo(t,e),yr(n)),t.b+=n.length)}function qo(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}($n=jo.prototype).add=function(t,e){Ko(this),this.c=null,t=qo(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},$n.forEach=function(t,e){Ko(this),this.a.forEach(function(n,r){pr(n,function(n){t.call(e,n,r,this)},this)},this)},$n.L=function(){Ko(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},$n.K=function(t){Ko(this);var e=[];if("string"==typeof t)zo(this,t)&&(e=gr(e,this.a.get(qo(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=gr(e,t[n])}return e},$n.set=function(t,e){return Ko(this),this.c=null,zo(this,t=qo(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},$n.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},$n.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Wo=function(){return function(t,e){this.b=t,this.a=e}}();function Xo(t){this.g=t||Jo,t=er.PerformanceNavigationTiming?0<(t=er.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(er.ia&&er.ia.ya&&er.ia.ya()&&er.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Jo=10;function Yo(t){return!!t.b||!!t.a&&t.a.size>=t.f}function $o(t){return t.b?1:t.a?t.a.size:0}function Zo(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function ts(t,e){t.a?t.a.add(e):t.b=e}function es(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ns(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Yn(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return yr(t.c)}function rs(){}function is(){this.a=new rs}function os(t,e,n){var r=n||"";try{wo(t,function(t,n){var i=t;ir(t)&&(i=bi(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function ss(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Xo.prototype.cancel=function(){var t,e;if(this.c=ns(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Yn(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},rs.prototype.stringify=function(t){return er.JSON.stringify(t,void 0)},rs.prototype.parse=function(t){return er.JSON.parse(t,void 0)};var as=er.JSON.parse;function us(t){yi.call(this),this.headers=new _o,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=cs,this.D=this.F=!1}hr(us,yi);var cs="",As=/^https?$/i,ls=["POST","PUT"];function hs(t){return"content-type"==t.toLowerCase()}function fs(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,ds(t),gs(t)}function ds(t){t.u||(t.u=!0,vi(t,"complete"),vi(t,"error"))}function ps(t){if(t.b&&void 0!==tr&&(!t.s[1]||4!=vs(t)||2!=t.W()))if(t.l&&4==vs(t))Si(t.za,0,t);else if(vi(t,"readystatechange"),4==vs(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Eo)[1]||null;if(!o&&er.self&&er.self.location){var s=er.self.location.protocol;o=s.substr(0,s.length-1)}i=!As.test(o?o.toLowerCase():"")}e=i}if(e)vi(t,"complete"),vi(t,"success");else{t.h=6;try{var a=2<vs(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",ds(t)}}finally{gs(t)}}}function gs(t,e){if(t.a){ys(t);var n=t.a,r=t.s[0]?nr:null;t.a=null,t.s=null,e||vi(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function ys(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(er.clearTimeout(t.m),t.m=null)}function vs(t){return t.a?t.a.readyState:0}function ms(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Er(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):No(t,e,n))}function bs(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ws(t){this.pa=0,this.g=[],this.c=new Li,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=bs("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=bs("baseRetryDelayMs",5e3,t),this.Ra=bs("retryDelaySeedMs",1e4,t),this.Ma=bs("forwardChannelMaxRetries",2,t),this.ma=bs("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Xo(t&&t.concurrentRequestLimit),this.ka=new is,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function _s(t){if(Cs(t),3==t.v){var e=t.R++,n=Uo(t.B);No(n,"SID",t.J),No(n,"RID",e),No(n,"TYPE","terminate"),Os(t,n),(e=new so(t,t.c,e,void 0)).H=2,e.i=So(Uo(n)),n=!1,er.navigator&&er.navigator.sendBeacon&&(n=er.navigator.sendBeacon(e.i.toString(),"")),!n&&er.Image&&((new Image).src=e.i,n=!0),n||(e.a=Ls(e.g,null),e.a.ba(e.i)),e.u=lr(),po(e)}Ps(t)}function Bs(t){t.a&&(Ns(t),t.a.cancel(),t.a=null)}function Cs(t){Bs(t),t.j&&(er.clearTimeout(t.j),t.j=null),Hs(t),t.b.cancel(),t.h&&("number"==typeof t.h&&er.clearTimeout(t.h),t.h=null)}function Es(t,e){t.g.push(new Wo(t.Oa++,e)),3==t.v&&Qs(t)}function Qs(t){Yo(t.b)||t.h||(t.h=!0,Ui(t.Ba,t),t.u=0)}function Us(t,e){var n;n=e?e.f:t.R++;var r=Uo(t.B);No(r,"SID",t.J),No(r,"RID",n),No(r,"AID",t.P),Os(t,r),t.i&&t.l&&ms(r,t.i,t.l),n=new so(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Is(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),ts(t.b,n),Ao(n,r,e)}function Os(t,e){t.f&&wo({},function(t,n){No(e,n,t)})}function Is(t,e,n){n=Math.min(t.g.length,n);var r=t.f?cr(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,A=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{os(A,s,"req"+c+"_")}catch(ma){r&&r(A)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Ts(t){t.a||t.j||(t.T=1,Ui(t.Aa,t),t.o=0)}function Fs(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Ji(cr(t.Aa,t),xs(t,t.o)),t.o++,0))}function Ns(t){null!=t.s&&(er.clearTimeout(t.s),t.s=null)}function Ss(t){t.a=new so(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Uo(t.la);No(e,"RID","rpc"),No(e,"SID",t.J),No(e,"CI",t.H?"0":"1"),No(e,"AID",t.P),Os(t,e),No(e,"TYPE","xmlhttp"),t.i&&t.l&&ms(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=So(Uo(e)),n.j=null,n.I=!0,lo(n,t)}function Hs(t){null!=t.m&&(er.clearTimeout(t.m),t.m=null)}function Rs(t,e){var n=null;if(t.a==e){Hs(t),Ns(t),t.a=null;var r=2}else{if(!Zo(t.b,e))return;n=e.s,es(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=lr()-e.u;var i=t.u;vi(r=Vi(),new Xi(r,n,e,i)),Qs(t)}else Ts(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!($o(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Ji(cr(t.Ba,t,e),xs(t,t.u)),t.u++,0)))}(t,e)||2==r&&Fs(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Ds(t,5);break;case 4:Ds(t,10);break;case 3:Ds(t,6);break;default:Ds(t,2)}}function xs(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Ds(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=cr(t.Ya,t);n||(n=new Qo("//www.google.com/images/cleardot.gif"),er.location&&"http"==er.location.protocol||Oo(n,"https"),So(n)),function(t,e){var n=new Li;if(er.Image){var r=new Image;r.onload=Ar(ss,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ar(ss,n,r,"TestLoadImage: error",!1,e),r.onabort=Ar(ss,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ar(ss,n,r,"TestLoadImage: timeout",!1,e),er.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Wi(2);t.v=0,t.f&&t.f.ra(e),Ps(t),Cs(t)}function Ps(t){t.v=0,t.I=-1,t.f&&(0==ns(t.b).length&&0==t.g.length||(t.b.c.length=0,yr(t.g),t.g.length=0),t.f.qa())}function ks(t,e,n){var r=function(t){return t instanceof Qo?Uo(t):new Qo(t,void 0)}(n);if(""!=r.c)e&&Io(r,e+"."+r.c),To(r,r.h);else{var i=er.location;r=function(t,e,n,r){var i=new Qo(null,void 0);return t&&Oo(i,t),e&&Io(i,e),n&&To(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Er(t.V,function(t,e){No(r,e,t)}),n=t.na,(e=t.A)&&n&&No(r,e,n),No(r,"VER",t.ha),Os(t,r),r}function Ls(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new us(t.Na)).F=t.C,e}function Ms(){}function js(){if(Sr&&!(10<=Number(Vr)))throw Error("Environmental error: no available transport.")}function Ks(t,e){yi.call(this),this.a=new ws(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!vr(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!vr(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Gs(this)}function Vs(t){ro.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function zs(){io.call(this),this.status=1}function Gs(t){this.a=t}($n=us.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:eo),this.a.onreadystatechange=cr(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void fs(this,o)}t=n||"";var i=new _o(this.headers);r&&wo(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=hs,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=er.FormData&&t instanceof er.FormData,!(0<=dr(ls,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{ys(this),0<this.o&&((this.D=function(t){return Sr&&Kr(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=cr(this.xa,this)):this.m=Si(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){fs(this,o)}},$n.xa=function(){void 0!==tr&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,vi(this,"timeout"),this.abort(8))},$n.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,vi(this,"complete"),vi(this,"abort"),gs(this))},$n.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),gs(this,!0)),us.X.G.call(this)},$n.za=function(){this.j||(this.A||this.l||this.g?ps(this):this.Ua())},$n.Ua=function(){ps(this)},$n.W=function(){try{return 2<vs(this)?this.a.status:-1}catch(Fr){return-1}},$n.$=function(){try{return this.a?this.a.responseText:""}catch(Fr){return""}},$n.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),as(e)}},$n.ua=function(){return this.h},$n.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},($n=ws.prototype).ha=8,$n.v=1,$n.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new so(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Or(r=Qr(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Is(this,n,e),No(i=Uo(this.B),"RID",t),No(i,"CVER",22),this.A&&No(i,"X-HTTP-Session-Id",this.A),Os(this,i),this.i&&r&&ms(i,this.i,r),ts(this.b,n),this.Ia&&No(i,"TYPE","init"),this.da?(No(i,"$req",e),No(i,"SID","null"),n.U=!0,Ao(n,i,null)):Ao(n,i,e),this.v=2}}else 3==this.v&&(t?Us(this,t):0==this.g.length||Yo(this.b)||Us(this))},$n.Aa=function(){if(this.j=null,Ss(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Ji(cr(this.Ta,this),t)}},$n.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Wi(10),Bs(this),Ss(this))},$n.Sa=function(){null!=this.m&&(this.m=null,Bs(this),Fs(this),Wi(19))},$n.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Wi(2)):(this.c.info("Failed to ping google.com"),Wi(1))},($n=Ms.prototype).ta=function(){},$n.sa=function(){},$n.ra=function(){},$n.qa=function(){},$n.Ja=function(){},js.prototype.a=function(t,e){return new Ks(t,e)},hr(Ks,yi),Ks.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Wi(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=ks(t,null,t.fa),Qs(t)},Ks.prototype.close=function(){_s(this.a)},Ks.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Es(this.a,e)}else this.l?((e={}).__data__=bi(t),Es(this.a,e)):Es(this.a,t)},Ks.prototype.G=function(){this.a.f=null,delete this.f,_s(this.a),delete this.a,Ks.X.G.call(this)},hr(Vs,ro),hr(zs,io),hr(Gs,Ms),Gs.prototype.ta=function(){vi(this.a,"a")},Gs.prototype.sa=function(t){vi(this.a,new Vs(t))},Gs.prototype.ra=function(t){vi(this.a,new zs(t))},Gs.prototype.qa=function(){vi(this.a,"b")},js.prototype.createWebChannel=js.prototype.a,Ks.prototype.send=Ks.prototype.h,Ks.prototype.open=Ks.prototype.g,Ks.prototype.close=Ks.prototype.close,Yi.NO_ERROR=0,Yi.TIMEOUT=8,Yi.HTTP_ERROR=6,$i.COMPLETE="complete",to.EventType=no,no.OPEN="a",no.CLOSE="b",no.ERROR="c",no.MESSAGE="d",yi.prototype.listen=yi.prototype.va,us.prototype.listenOnce=us.prototype.wa,us.prototype.getLastError=us.prototype.Qa,us.prototype.getLastErrorCode=us.prototype.ua,us.prototype.getStatus=us.prototype.W,us.prototype.getResponseJson=us.prototype.Pa,us.prototype.getResponseText=us.prototype.$,us.prototype.send=us.prototype.ba;var qs=Yi,Ws=$i,Xs=ji,Js=to,Ys=us,$s=n("/6Yf"),Zs=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},ta=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),ea=function(){function t(t){this.uid=t}return t.prototype.u=function(){return null!=this.uid},t.prototype.h=function(){return this.u()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();ea.UNAUTHENTICATED=new ea(null),ea.l=new ea("google-credentials-uid"),ea._=new ea("first-party-uid");var na=new Wn.b("@firebase/firestore");function ra(){return na.logLevel}function ia(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(na.logLevel<=Wn.a.DEBUG){var r=e.map(aa);na.debug.apply(na,Object(Gn.g)(["Firestore (8.1.1): "+t],r))}}function oa(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(na.logLevel<=Wn.a.ERROR){var r=e.map(aa);na.error.apply(na,Object(Gn.g)(["Firestore (8.1.1): "+t],r))}}function sa(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(na.logLevel<=Wn.a.WARN){var r=e.map(aa);na.warn.apply(na,Object(Gn.g)(["Firestore (8.1.1): "+t],r))}}function aa(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(e){return t}}function ua(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.1.1) INTERNAL ASSERTION FAILED: "+t;throw oa(e),new Error(e)}function ca(t,e){t||ua()}function Aa(t,e){return t}var la={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ha=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Gn.c)(e,t),e}(Error),fa=function(t,e){this.user=e,this.type="OAuth",this.T={},this.T.Authorization="Bearer "+t},da=function(){function t(){this.I=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.m=function(){},t.prototype.A=function(t){this.I=t,t(ea.UNAUTHENTICATED)},t.prototype.R=function(){this.I=null},t}(),pa=function(){function t(t){var e=this;this.P=null,this.currentUser=ea.UNAUTHENTICATED,this.g=!1,this.V=0,this.I=null,this.forceRefresh=!1,this.P=function(){e.V++,e.currentUser=e.p(),e.g=!0,e.I&&e.I(e.currentUser)},this.V=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.P):(this.P(null),t.get().then(function(t){e.auth=t,e.P&&e.auth.addAuthTokenListener(e.P)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.V,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.V!==e?(ia("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(ca("string"==typeof n.accessToken),new fa(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.m=function(){this.forceRefresh=!0},t.prototype.A=function(t){this.I=t,this.g&&t(this.currentUser)},t.prototype.R=function(){this.auth&&this.auth.removeAuthTokenListener(this.P),this.P=null,this.I=null},t.prototype.p=function(){var t=this.auth&&this.auth.getUid();return ca(null===t||"string"==typeof t),new ea(t)},t}(),ga=function(){function t(t,e){this.v=t,this.S=e,this.type="FirstParty",this.user=ea._}return Object.defineProperty(t.prototype,"T",{get:function(){var t={"X-Goog-AuthUser":this.S},e=this.v.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),ya=function(){function t(t,e){this.v=t,this.S=e}return t.prototype.getToken=function(){return Promise.resolve(new ga(this.v,this.S))},t.prototype.A=function(t){t(ea._)},t.prototype.R=function(){},t.prototype.m=function(){},t}();function va(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var ma=function(){function t(){}return t.D=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=va(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function ba(t,e){return t<e?-1:t>e?1:0}function wa(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function _a(t){return t+"\0"}var Ba=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ha(la.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ha(la.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new ha(la.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ha(la.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype.C=function(t){return this.seconds===t.seconds?ba(this.nanoseconds,t.nanoseconds):ba(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Ca=function(){function t(t){this.timestamp=t}return t.N=function(e){return new t(e)},t.min=function(){return new t(new Ba(0,0))},t.prototype.F=function(t){return this.timestamp.C(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.O=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.M=function(){return this.timestamp},t}(),Ea=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ua(),void 0===n?n=t.length-e:n>t.length-e&&ua(),this.segments=t,this.offset=e,this.k=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.$(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.L(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.B=function(t){return this.L(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.q=function(){return this.L(this.segments,this.offset,this.length-1)},t.prototype.U=function(){return this.segments[this.offset]},t.prototype.K=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.W=function(){return 0===this.length},t.prototype.j=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.G=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.H=function(){return this.segments.slice(this.offset,this.limit())},t.$=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Qa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gn.c)(e,t),e.prototype.L=function(t,n,r){return new e(t,n,r)},e.prototype.J=function(){return this.H().join("/")},e.prototype.toString=function(){return this.J()},e.Y=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new ha(la.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.X=function(){return new e([])},e}(Ea),Ua=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Oa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gn.c)(e,t),e.prototype.L=function(t,n,r){return new e(t,n,r)},e.Z=function(t){return Ua.test(t)},e.prototype.J=function(){return this.H().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.Z(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.J()},e.prototype.tt=function(){return 1===this.length&&"__name__"===this.get(0)},e.et=function(){return new e(["__name__"])},e.nt=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new ha(la.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new ha(la.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new ha(la.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new ha(la.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.X=function(){return new e([])},e}(Ea),Ia=function(){function t(t){this.path=t}return t.st=function(e){return new t(Qa.Y(e))},t.it=function(e){return new t(Qa.Y(e).B(5))},t.prototype.rt=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Qa.$(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.$=function(t,e){return Qa.$(t.path,e.path)},t.ot=function(t){return t.length%2==0},t.ct=function(e){return new t(new Qa(e.slice()))},t}();function Ta(t){return null==t}function Fa(t){return 0===t&&1/t==-1/0}function Na(t){return"number"==typeof t&&Number.isInteger(t)&&!Fa(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Sa=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ut=null};function Ha(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Sa(t,e,n,r,i,o,s)}function Ra(t){var e=Aa(t);if(null===e.ut){var n=e.path.J();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.J()+t.op.toString()+Tu(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.J()+t.dir}(t)}).join(","),Ta(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=NA(e.startAt)),e.endAt&&(n+="|ub:",n+=NA(e.endAt)),e.ut=n}return e.ut}function xa(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!DA(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Qu(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!HA(t.startAt,e.startAt)&&HA(t.endAt,e.endAt)}function Da(t){return Ia.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Pa=function(){function t(t){this.at=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.at)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.at)},t.prototype.ht=function(){return 2*this.at.length},t.prototype.F=function(t){return ba(this.at,t.at)},t.prototype.isEqual=function(t){return this.at===t.at},t}();Pa.lt=new Pa("");var ka,La,Ma=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Ca.min()),void 0===o&&(o=Ca.min()),void 0===s&&(s=Pa.lt),this.target=t,this.targetId=e,this._t=n,this.sequenceNumber=r,this.ft=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.dt=function(e){return new t(this.target,this.targetId,this._t,e,this.ft,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.wt=function(e,n){return new t(this.target,this.targetId,this._t,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.Et=function(e){return new t(this.target,this.targetId,this._t,this.sequenceNumber,this.ft,e,this.resumeToken)},t}(),ja=function(t){this.count=t};function Ka(t){switch(t){case la.OK:return ua();case la.CANCELLED:case la.UNKNOWN:case la.DEADLINE_EXCEEDED:case la.RESOURCE_EXHAUSTED:case la.INTERNAL:case la.UNAVAILABLE:case la.UNAUTHENTICATED:return!1;case la.INVALID_ARGUMENT:case la.NOT_FOUND:case la.ALREADY_EXISTS:case la.PERMISSION_DENIED:case la.FAILED_PRECONDITION:case la.ABORTED:case la.OUT_OF_RANGE:case la.UNIMPLEMENTED:case la.DATA_LOSS:return!0;default:return ua()}}function Va(t){if(void 0===t)return oa("GRPC error has no .code"),la.UNKNOWN;switch(t){case ka.OK:return la.OK;case ka.CANCELLED:return la.CANCELLED;case ka.UNKNOWN:return la.UNKNOWN;case ka.DEADLINE_EXCEEDED:return la.DEADLINE_EXCEEDED;case ka.RESOURCE_EXHAUSTED:return la.RESOURCE_EXHAUSTED;case ka.INTERNAL:return la.INTERNAL;case ka.UNAVAILABLE:return la.UNAVAILABLE;case ka.UNAUTHENTICATED:return la.UNAUTHENTICATED;case ka.INVALID_ARGUMENT:return la.INVALID_ARGUMENT;case ka.NOT_FOUND:return la.NOT_FOUND;case ka.ALREADY_EXISTS:return la.ALREADY_EXISTS;case ka.PERMISSION_DENIED:return la.PERMISSION_DENIED;case ka.FAILED_PRECONDITION:return la.FAILED_PRECONDITION;case ka.ABORTED:return la.ABORTED;case ka.OUT_OF_RANGE:return la.OUT_OF_RANGE;case ka.UNIMPLEMENTED:return la.UNIMPLEMENTED;case ka.DATA_LOSS:return la.DATA_LOSS;default:return ua()}}(La=ka||(ka={}))[La.OK=0]="OK",La[La.CANCELLED=1]="CANCELLED",La[La.UNKNOWN=2]="UNKNOWN",La[La.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",La[La.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",La[La.NOT_FOUND=5]="NOT_FOUND",La[La.ALREADY_EXISTS=6]="ALREADY_EXISTS",La[La.PERMISSION_DENIED=7]="PERMISSION_DENIED",La[La.UNAUTHENTICATED=16]="UNAUTHENTICATED",La[La.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",La[La.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",La[La.ABORTED=10]="ABORTED",La[La.OUT_OF_RANGE=11]="OUT_OF_RANGE",La[La.UNIMPLEMENTED=12]="UNIMPLEMENTED",La[La.INTERNAL=13]="INTERNAL",La[La.UNAVAILABLE=14]="UNAVAILABLE",La[La.DATA_LOSS=15]="DATA_LOSS";var za=function(){function t(t,e){this.$=t,this.root=e||qa.EMPTY}return t.prototype.Tt=function(e,n){return new t(this.$,this.root.Tt(e,n,this.$).copy(null,null,qa.It,null,null))},t.prototype.remove=function(e){return new t(this.$,this.root.remove(e,this.$).copy(null,null,qa.It,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.W();){var n=this.$(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.W();){var r=this.$(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.W=function(){return this.root.W()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.At=function(){return this.root.At()},t.prototype.Rt=function(){return this.root.Rt()},t.prototype.Pt=function(t){return this.root.Pt(t)},t.prototype.forEach=function(t){this.Pt(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.Pt(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.gt=function(t){return this.root.gt(t)},t.prototype.yt=function(){return new Ga(this.root,null,this.$,!1)},t.prototype.Vt=function(t){return new Ga(this.root,t,this.$,!1)},t.prototype.vt=function(){return new Ga(this.root,null,this.$,!0)},t.prototype.bt=function(t){return new Ga(this.root,t,this.$,!0)},t}(),Ga=function(){function t(t,e,n,r){this.St=r,this.Dt=[];for(var i=1;!t.W();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.St?t.left:t.right;else{if(0===i){this.Dt.push(t);break}this.Dt.push(t),t=this.St?t.right:t.left}}return t.prototype.Ct=function(){var t=this.Dt.pop(),e={key:t.key,value:t.value};if(this.St)for(t=t.left;!t.W();)this.Dt.push(t),t=t.right;else for(t=t.right;!t.W();)this.Dt.push(t),t=t.left;return e},t.prototype.Nt=function(){return this.Dt.length>0},t.prototype.xt=function(){if(0===this.Dt.length)return null;var t=this.Dt[this.Dt.length-1];return{key:t.key,value:t.value}},t}(),qa=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.W=function(){return!1},t.prototype.Pt=function(t){return this.left.Pt(t)||t(this.key,this.value)||this.right.Pt(t)},t.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},t.prototype.min=function(){return this.left.W()?this:this.left.min()},t.prototype.At=function(){return this.min().key},t.prototype.Rt=function(){return this.right.W()?this.key:this.right.Rt()},t.prototype.Tt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Tt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Tt(t,e,n))).Ft()},t.prototype.Ot=function(){if(this.left.W())return t.EMPTY;var e=this;return e.left.Mt()||e.left.left.Mt()||(e=e.kt()),(e=e.copy(null,null,null,e.left.Ot(),null)).Ft()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.W()||i.left.Mt()||i.left.left.Mt()||(i=i.kt()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.Mt()&&(i=i.$t()),i.right.W()||i.right.Mt()||i.right.left.Mt()||(i=i.Lt()),0===n(e,i.key)){if(i.right.W())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.Ot())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.Ft()},t.prototype.Mt=function(){return this.color},t.prototype.Ft=function(){var t=this;return t.right.Mt()&&!t.left.Mt()&&(t=t.Bt()),t.left.Mt()&&t.left.left.Mt()&&(t=t.$t()),t.left.Mt()&&t.right.Mt()&&(t=t.qt()),t},t.prototype.kt=function(){var t=this.qt();return t.right.left.Mt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.$t())).Bt()).qt()),t},t.prototype.Lt=function(){var t=this.qt();return t.left.left.Mt()&&(t=(t=t.$t()).qt()),t},t.prototype.Bt=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.$t=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.qt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.Ut=function(){var t=this.Qt();return Math.pow(2,t)<=this.size+1},t.prototype.Qt=function(){if(this.Mt()&&this.left.Mt())throw ua();if(this.right.Mt())throw ua();var t=this.left.Qt();if(t!==this.right.Qt())throw ua();return t+(this.Mt()?0:1)},t}();qa.EMPTY=null,qa.RED=!0,qa.It=!1,qa.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ua()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ua()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ua()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ua()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ua()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.Tt=function(t,e,n){return new qa(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.W=function(){return!0},t.prototype.Pt=function(t){return!1},t.prototype.gt=function(t){return!1},t.prototype.At=function(){return null},t.prototype.Rt=function(){return null},t.prototype.Mt=function(){return!1},t.prototype.Ut=function(){return!0},t.prototype.Qt=function(){return 0},t}());var Wa=function(){function t(t){this.$=t,this.data=new za(this.$)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.At()},t.prototype.last=function(){return this.data.Rt()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.Pt(function(e,n){return t(e),!1})},t.prototype.Kt=function(t,e){for(var n=this.data.Vt(t[0]);n.Nt();){var r=n.Ct();if(this.$(r.key,t[1])>=0)return;e(r.key)}},t.prototype.Wt=function(t,e){var n;for(n=void 0!==e?this.data.Vt(e):this.data.yt();n.Nt();)if(!t(n.Ct().key))return},t.prototype.jt=function(t){var e=this.data.Vt(t);return e.Nt()?e.Ct().key:null},t.prototype.yt=function(){return new Xa(this.data.yt())},t.prototype.Vt=function(t){return new Xa(this.data.Vt(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).Tt(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.W=function(){return this.data.W()},t.prototype.Gt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.yt(),r=e.data.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(0!==this.$(i,o))return!1}return!0},t.prototype.H=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.$);return n.data=e,n},t}(),Xa=function(){function t(t){this.zt=t}return t.prototype.Ct=function(){return this.zt.Ct().key},t.prototype.Nt=function(){return this.zt.Nt()},t}(),Ja=new za(Ia.$);function Ya(){return Ja}function $a(){return Ya()}var Za=new za(Ia.$);function tu(){return Za}var eu=new za(Ia.$),nu=new Wa(Ia.$);function ru(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=nu,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var iu=new Wa(ba);function ou(){return iu}var su=function(){function t(t){this.$=t?function(e,n){return t(e,n)||Ia.$(e.key,n.key)}:function(t,e){return Ia.$(t.key,e.key)},this.Ht=tu(),this.Jt=new za(this.$)}return t.Yt=function(e){return new t(e.$)},t.prototype.has=function(t){return null!=this.Ht.get(t)},t.prototype.get=function(t){return this.Ht.get(t)},t.prototype.first=function(){return this.Jt.At()},t.prototype.last=function(){return this.Jt.Rt()},t.prototype.W=function(){return this.Jt.W()},t.prototype.indexOf=function(t){var e=this.Ht.get(t);return e?this.Jt.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.Jt.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.Jt.Pt(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ht.Tt(t.key,t),e.Jt.Tt(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ht.remove(t),this.Jt.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.Jt.yt(),r=e.Jt.yt();n.Nt();){var i=n.Ct().key,o=r.Ct().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.$=this.$,r.Ht=e,r.Jt=n,r},t}(),au=function(){function t(){this.Xt=new za(Ia.$)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Xt.get(e);n?0!==t.type&&3===n.type?this.Xt=this.Xt.Tt(e,t):3===t.type&&1!==n.type?this.Xt=this.Xt.Tt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Xt=this.Xt.Tt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Xt=this.Xt.remove(e):1===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):ua():this.Xt=this.Xt.Tt(e,t)},t.prototype.Zt=function(){var t=[];return this.Xt.Pt(function(e,n){t.push(n)}),t},t}(),uu=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.te=n,this.docChanges=r,this.ee=i,this.fromCache=o,this.ne=s,this.se=a}return t.ie=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,su.Yt(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.ee.W()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.ne===t.ne&&this.ee.isEqual(t.ee)&&yA(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.te.isEqual(t.te)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),cu=function(){function t(t,e,n,r,i){this.ft=t,this.re=e,this.oe=n,this.ce=r,this.ue=i}return t.ae=function(e,n){var r=new Map;return r.set(e,Au.he(e,n)),new t(Ca.min(),r,ou(),Ya(),ru())},t}(),Au=function(){function t(t,e,n,r,i){this.resumeToken=t,this.le=e,this._e=n,this.fe=r,this.de=i}return t.he=function(e,n){return new t(Pa.lt,n,ru(),ru(),ru())},t}(),lu=function(t,e,n,r){this.we=t,this.removedTargetIds=e,this.key=n,this.Ee=r},hu=function(t,e){this.targetId=t,this.Te=e},fu=function(t,e,n,r){void 0===n&&(n=Pa.lt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},du=function(){function t(){this.Ie=0,this.me=yu(),this.Ae=Pa.lt,this.Re=!1,this.Pe=!0}return Object.defineProperty(t.prototype,"le",{get:function(){return this.Re},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.Ae},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ge",{get:function(){return 0!==this.Ie},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ye",{get:function(){return this.Pe},enumerable:!1,configurable:!0}),t.prototype.Ve=function(t){t.ht()>0&&(this.Pe=!0,this.Ae=t)},t.prototype.pe=function(){var t=ru(),e=ru(),n=ru();return this.me.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ua()}}),new Au(this.Ae,this.Re,t,e,n)},t.prototype.ve=function(){this.Pe=!1,this.me=yu()},t.prototype.be=function(t,e){this.Pe=!0,this.me=this.me.Tt(t,e)},t.prototype.Se=function(t){this.Pe=!0,this.me=this.me.remove(t)},t.prototype.De=function(){this.Ie+=1},t.prototype.Ce=function(){this.Ie-=1},t.prototype.Ne=function(){this.Pe=!0,this.Re=!0},t}(),pu=function(){function t(t){this.xe=t,this.Fe=new Map,this.Oe=Ya(),this.Me=gu(),this.ke=new Wa(ba)}return t.prototype.$e=function(t){for(var e=0,n=t.we;e<n.length;e++){var r=n[e];t.Ee instanceof rA?this.Le(r,t.Ee):t.Ee instanceof iA&&this.Be(r,t.key,t.Ee)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.Be(o[i],t.key,t.Ee)},t.prototype.qe=function(t){var e=this;this.Ue(t,function(n){var r=e.Qe(n);switch(t.state){case 0:e.Ke(n)&&r.Ve(t.resumeToken);break;case 1:r.Ce(),r.ge||r.ve(),r.Ve(t.resumeToken);break;case 2:r.Ce(),r.ge||e.removeTarget(n);break;case 3:e.Ke(n)&&(r.Ne(),r.Ve(t.resumeToken));break;case 4:e.Ke(n)&&(e.We(n),r.Ve(t.resumeToken));break;default:ua()}})},t.prototype.Ue=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Fe.forEach(function(t,r){n.Ke(r)&&e(r)})},t.prototype.je=function(t){var e=t.targetId,n=t.Te.count,r=this.Ge(e);if(r){var i=r.target;if(Da(i))if(0===n){var o=new Ia(i.path);this.Be(e,o,new iA(o,Ca.min()))}else ca(1===n);else this.ze(e)!==n&&(this.We(e),this.ke=this.ke.add(e))}},t.prototype.He=function(t){var e=this,n=new Map;this.Fe.forEach(function(r,i){var o=e.Ge(i);if(o){if(r.le&&Da(o.target)){var s=new Ia(o.target.path);null!==e.Oe.get(s)||e.Je(i,s)||e.Be(i,s,new iA(s,t))}r.ye&&(n.set(i,r.pe()),r.ve())}});var r=ru();this.Me.forEach(function(t,n){var i=!0;n.Wt(function(t){var n=e.Ge(t);return!n||2===n._t||(i=!1,!1)}),i&&(r=r.add(t))});var i=new cu(t,n,this.ke,this.Oe,r);return this.Oe=Ya(),this.Me=gu(),this.ke=new Wa(ba),i},t.prototype.Le=function(t,e){if(this.Ke(t)){var n=this.Je(t,e.key)?2:0;this.Qe(t).be(e.key,n),this.Oe=this.Oe.Tt(e.key,e),this.Me=this.Me.Tt(e.key,this.Ye(e.key).add(t))}},t.prototype.Be=function(t,e,n){if(this.Ke(t)){var r=this.Qe(t);this.Je(t,e)?r.be(e,1):r.Se(e),this.Me=this.Me.Tt(e,this.Ye(e).delete(t)),n&&(this.Oe=this.Oe.Tt(e,n))}},t.prototype.removeTarget=function(t){this.Fe.delete(t)},t.prototype.ze=function(t){var e=this.Qe(t).pe();return this.xe.Xe(t).size+e._e.size-e.de.size},t.prototype.De=function(t){this.Qe(t).De()},t.prototype.Qe=function(t){var e=this.Fe.get(t);return e||(e=new du,this.Fe.set(t,e)),e},t.prototype.Ye=function(t){var e=this.Me.get(t);return e||(e=new Wa(ba),this.Me=this.Me.Tt(t,e)),e},t.prototype.Ke=function(t){var e=null!==this.Ge(t);return e||ia("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.Ge=function(t){var e=this.Fe.get(t);return e&&e.ge?null:this.xe.Ze(t)},t.prototype.We=function(t){var e=this;this.Fe.set(t,new du),this.xe.Xe(t).forEach(function(n){e.Be(t,n,null)})},t.prototype.Je=function(t,e){return this.xe.Xe(t).has(e)},t}();function gu(){return new za(Ia.$)}function yu(){return new za(Ia.$)}function vu(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function mu(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function bu(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wu(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function _u(t){var e=t.mapValue.fields.__previous_value__;return wu(e)?_u(e):e}function Bu(t){var e=Nu(t.mapValue.fields.__local_write_time__.timestampValue);return new Ba(e.seconds,e.nanos)}var Cu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Eu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wu(t)?4:10:ua()}function Qu(t,e){var n=Eu(t);if(n!==Eu(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Bu(t).isEqual(Bu(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Nu(t.timestampValue),r=Nu(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Hu(t.bytesValue).isEqual(Hu(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Su(t.geoPointValue.latitude)===Su(e.geoPointValue.latitude)&&Su(t.geoPointValue.longitude)===Su(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Su(t.integerValue)===Su(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Su(t.doubleValue),r=Su(e.doubleValue);return n===r?Fa(n)===Fa(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return wa(t.arrayValue.values||[],e.arrayValue.values||[],Qu);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(vu(n)!==vu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Qu(n[i],r[i])))return!1;return!0}(t,e);default:return ua()}}function Uu(t,e){return void 0!==(t.values||[]).find(function(t){return Qu(t,e)})}function Ou(t,e){var n=Eu(t),r=Eu(e);if(n!==r)return ba(n,r);switch(n){case 0:return 0;case 1:return ba(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Su(t.integerValue||t.doubleValue),r=Su(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Iu(t.timestampValue,e.timestampValue);case 4:return Iu(Bu(t),Bu(e));case 5:return ba(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Hu(t),r=Hu(e);return n.F(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=ba(n[i],r[i]);if(0!==o)return o}return ba(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=ba(Su(t.latitude),Su(e.latitude));return 0!==n?n:ba(Su(t.longitude),Su(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ou(n[i],r[i]);if(o)return o}return ba(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=ba(r[s],o[s]);if(0!==a)return a;var u=Ou(n[r[s]],i[o[s]]);if(0!==u)return u}return ba(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ua()}}function Iu(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ba(t,e);var n=Nu(t),r=Nu(e),i=ba(n.seconds,r.seconds);return 0!==i?i:ba(n.nanos,r.nanos)}function Tu(t){return Fu(t)}function Fu(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=Nu(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Hu(t.bytesValue).toBase64():"referenceValue"in t?Ia.it(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Fu(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Fu(t.fields[o])}return e+"}"}(t.mapValue):ua();var e}function Nu(t){if(ca(!!t),"string"==typeof t){var e=0,n=Cu.exec(t);if(ca(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Su(t.seconds),nanos:Su(t.nanos)}}function Su(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Hu(t){return"string"==typeof t?Pa.fromBase64String(t):Pa.fromUint8Array(t)}function Ru(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.J()}}function xu(t){return!!t&&"integerValue"in t}function Du(t){return!!t&&"arrayValue"in t}function Pu(t){return!!t&&"nullValue"in t}function ku(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lu(t){return!!t&&"mapValue"in t}var Mu={asc:"ASCENDING",desc:"DESCENDING"},ju={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ku=function(t,e){this.t=t,this.tn=e};function Vu(t){return{integerValue:""+t}}function zu(t,e){if(t.tn){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fa(e)?"-0":e}}function Gu(t,e){return Na(e)?Vu(e):zu(t,e)}function qu(t,e){return t.tn?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Wu(t,e){return t.tn?e.toBase64():e.toUint8Array()}function Xu(t,e){return qu(t,e.M())}function Ju(t){return ca(!!t),Ca.N(function(t){var e=Nu(t);return new Ba(e.seconds,e.nanos)}(t))}function Yu(t,e){return function(t){return new Qa(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).J()}function $u(t){var e=Qa.Y(t);return ca(wc(e)),e}function Zu(t,e){return Yu(t.t,e.path)}function tc(t,e){var n=$u(e);if(n.get(1)!==t.t.projectId)throw new ha(la.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.t.projectId);if(n.get(3)!==t.t.database)throw new ha(la.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.t.database);return new Ia(ic(n))}function ec(t,e){return Yu(t.t,e)}function nc(t){var e=$u(t);return 4===e.length?Qa.X():ic(e)}function rc(t){return new Qa(["projects",t.t.projectId,"databases",t.t.database]).J()}function ic(t){return ca(t.length>4&&"documents"===t.get(4)),t.B(5)}function oc(t,e,n){return{name:Zu(t,e),fields:n.proto.mapValue.fields}}function sc(t,e){var n;if(e instanceof zc)n={update:oc(t,e.key,e.value)};else if(e instanceof Yc)n={delete:Zu(t,e.key)};else if(e instanceof Gc)n={update:oc(t,e.key,e.data),updateMask:bc(e.en)};else if(e instanceof Wc)n={transform:{document:Zu(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Qc)return{fieldPath:e.field.J(),setToServerValue:"REQUEST_TIME"};if(n instanceof Uc)return{fieldPath:e.field.J(),appendMissingElements:{values:n.elements}};if(n instanceof Ic)return{fieldPath:e.field.J(),removeAllFromArray:{values:n.elements}};if(n instanceof Fc)return{fieldPath:e.field.J(),increment:n.nn};throw ua()}(0,t)})}};else{if(!(e instanceof $c))return ua();n={verify:Zu(t,e.key)}}return e.rn.sn||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Xu(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ua()}(t,e.rn)),n}function ac(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Dc.updateTime(Ju(t.updateTime)):void 0!==t.exists?Dc.exists(t.exists):Dc.on()}(e.currentDocument):Dc.on();if(e.update){var r=tc(t,e.update.name),i=new Zc({mapValue:{fields:e.update.fields}});if(e.updateMask){var o=function(t){return new Hc((t.fieldPaths||[]).map(function(t){return Oa.nt(t)}))}(e.updateMask);return new Gc(r,i,o,n)}return new zc(r,i,n)}if(e.delete){var s=tc(t,e.delete);return new Yc(s,n)}if(e.transform){var a=tc(t,e.transform.document),u=e.transform.fieldTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(ca("REQUEST_TIME"===e.setToServerValue),n=new Qc):"appendMissingElements"in e?n=new Uc(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Ic(e.removeAllFromArray.values||[]):"increment"in e?n=new Fc(t,e.increment):ua();var r=Oa.nt(e.fieldPath);return new Rc(r,n)}(t,e)});return ca(!0===n.exists),new Wc(a,u)}if(e.verify){var c=tc(t,e.verify);return new $c(c,n)}return ua()}function uc(t,e){return{documents:[ec(t,e.path)]}}function cc(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=ec(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=ec(t,r.q()),n.structuredQuery.from=[{collectionId:r.K()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(ku(t.value))return{unaryFilter:{field:gc(t.field),op:"IS_NAN"}};if(Pu(t.value))return{unaryFilter:{field:gc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(ku(t.value))return{unaryFilter:{field:gc(t.field),op:"IS_NOT_NAN"}};if(Pu(t.value))return{unaryFilter:{field:gc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gc(t.field),op:pc(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:gc(t.field),direction:dc(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.tn||Ta(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=hc(e.startAt)),e.endAt&&(n.structuredQuery.endAt=hc(e.endAt)),n}function Ac(t){var e=nc(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){ca(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=lc(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new RA(yc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Ta(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=fc(n.startAt));var A=null;return n.endAt&&(A=fc(n.endAt)),aA(e,i,a,s,u,"F",c,A)}function lc(t){return t?void 0!==t.unaryFilter?[mc(t)]:void 0!==t.fieldFilter?[vc(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return lc(t)}).reduce(function(t,e){return t.concat(e)}):ua():[]}function hc(t){return{before:t.before,values:t.position}}function fc(t){return new FA(t.values||[],!!t.before)}function dc(t){return Mu[t]}function pc(t){return ju[t]}function gc(t){return{fieldPath:t.J()}}function yc(t){return Oa.nt(t.fieldPath)}function vc(t){return _A.create(yc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return ua()}}(t.fieldFilter.op),t.fieldFilter.value)}function mc(t){switch(t.unaryFilter.op){case"IS_NAN":var e=yc(t.unaryFilter.field);return _A.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=yc(t.unaryFilter.field);return _A.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=yc(t.unaryFilter.field);return _A.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=yc(t.unaryFilter.field);return _A.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return ua()}}function bc(t){var e=[];return t.fields.forEach(function(t){return e.push(t.J())}),{fieldPaths:e}}function wc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}var _c=function(){this.cn=void 0};function Bc(t,e,n){return t instanceof Qc?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Uc?Oc(t,e):t instanceof Ic?Tc(t,e):function(t,e){var n=Ec(t,e),r=Nc(n)+Nc(t.nn);return xu(n)&&xu(t.nn)?Vu(r):zu(t.serializer,r)}(t,e)}function Cc(t,e,n){return t instanceof Uc?Oc(t,e):t instanceof Ic?Tc(t,e):n}function Ec(t,e){return t instanceof Fc?xu(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Qc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gn.c)(e,t),e}(_c),Uc=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Gn.c)(e,t),e}(_c);function Oc(t,e){for(var n=Sc(e),r=function(t){n.some(function(e){return Qu(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ic=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Gn.c)(e,t),e}(_c);function Tc(t,e){for(var n=Sc(e),r=function(t){n=n.filter(function(e){return!Qu(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Fc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).serializer=e,r.nn=n,r}return Object(Gn.c)(e,t),e}(_c);function Nc(t){return Su(t.integerValue||t.doubleValue)}function Sc(t){return Du(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Hc=function(){function t(t){this.fields=t,t.sort(Oa.$)}return t.prototype.un=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].j(t))return!0;return!1},t.prototype.isEqual=function(t){return wa(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),Rc=function(t,e){this.field=t,this.transform=e},xc=function(t,e){this.version=t,this.transformResults=e},Dc=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.on=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"sn",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Pc(t,e){return void 0!==t.updateTime?e instanceof rA&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof rA}var kc=function(){};function Lc(t,e,n){return t instanceof zc?function(t,e,n){return new rA(t.key,n.version,t.value,{hasCommittedMutations:!0})}(t,0,n):t instanceof Gc?function(t,e,n){if(!Pc(t.rn,e))return new oA(t.key,n.version);var r=qc(t,e);return new rA(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof Wc?function(t,e,n){if(ca(null!=n.transformResults),!Pc(t.rn,e))return new oA(t.key,n.version);var r=Xc(0,e),i=function(t,e,n){var r=[];ca(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof rA&&(a=e.field(o.field)),r.push(Cc(s,a,n[i]))}return r}(t.fieldTransforms,e,n.transformResults),o=n.version,s=Jc(t,r.data(),i);return new rA(t.key,o,s,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new iA(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Mc(t,e,n,r){return t instanceof zc?function(t,e){if(!Pc(t.rn,e))return e;var n=Vc(e);return new rA(t.key,n,t.value,{an:!0})}(t,e):t instanceof Gc?function(t,e){if(!Pc(t.rn,e))return e;var n=Vc(e),r=qc(t,e);return new rA(t.key,n,r,{an:!0})}(t,e):t instanceof Wc?function(t,e,n,r){if(!Pc(t.rn,e))return e;var i=Xc(0,e),o=function(t,e,n,r){for(var i=[],o=0,s=t;o<s.length;o++){var a=s[o],u=a.transform,c=null;n instanceof rA&&(c=n.field(a.field)),null===c&&r instanceof rA&&(c=r.field(a.field)),i.push(Bc(u,c,e))}return i}(t.fieldTransforms,n,e,r),s=Jc(t,i.data(),o);return new rA(t.key,i.version,s,{an:!0})}(t,e,r,n):function(t,e){return Pc(t.rn,e)?new iA(t.key,Ca.min()):e}(t,e)}function jc(t,e){return t instanceof Wc?function(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e instanceof rA?e.field(o.field):void 0,a=Ec(o.transform,s||null);null!=a&&(n=null==n?(new tA).set(o.field,a):n.set(o.field,a))}return n?n.hn():null}(t,e):null}function Kc(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.rn.isEqual(e.rn)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.en.isEqual(e.en):2!==t.type||wa(t.fieldTransforms,t.fieldTransforms,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Uc&&e instanceof Uc||t instanceof Ic&&e instanceof Ic?wa(t.elements,e.elements,Qu):t instanceof Fc&&e instanceof Fc?Qu(t.nn,e.nn):t instanceof Qc&&e instanceof Qc}(t.transform,e.transform)}(t,e)}))}function Vc(t){return t instanceof rA?t.version:Ca.min()}var zc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).key=e,i.value=n,i.rn=r,i.type=0,i}return Object(Gn.c)(e,t),e}(kc),Gc=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this)||this).key=e,o.data=n,o.en=r,o.rn=i,o.type=1,o}return Object(Gn.c)(e,t),e}(kc);function qc(t,e){return function(t,e){var n=new tA(e);return t.en.fields.forEach(function(e){if(!e.W()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.hn()}(t,e instanceof rA?e.data():Zc.empty())}var Wc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.fieldTransforms=n,r.type=2,r.rn=Dc.exists(!0),r}return Object(Gn.c)(e,t),e}(kc);function Xc(t,e){return e}function Jc(t,e,n){for(var r=new tA(e),i=0;i<t.fieldTransforms.length;i++)r.set(t.fieldTransforms[i].field,n[i]);return r.hn()}var Yc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=3,r}return Object(Gn.c)(e,t),e}(kc),$c=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.rn=n,r.type=4,r}return Object(Gn.c)(e,t),e}(kc),Zc=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.W())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Lu(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.K()])||null},t.prototype.isEqual=function(t){return Qu(this.proto,t.proto)},t}(),tA=function(){function t(t){void 0===t&&(t=Zc.empty()),this.ln=t,this._n=new Map}return t.prototype.set=function(t,e){return this.fn(t,e),this},t.prototype.delete=function(t){return this.fn(t,null),this},t.prototype.fn=function(t,e){for(var n=this._n,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Eu(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.K(),e)},t.prototype.hn=function(){var t=this.dn(Oa.X(),this._n);return null!=t?new Zc(t):this.ln},t.prototype.dn=function(t,e){var n=this,r=!1,i=this.ln.field(t),o=Lu(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.dn(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function eA(t){var e=[];return mu(t.fields||{},function(t,n){var r=new Oa([t]);if(Lu(n)){var i=eA(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new Hc(e)}var nA=function(t,e){this.key=t,this.version=e},rA=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).wn=r,o.an=!!i.an,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Gn.c)(e,t),e.prototype.field=function(t){return this.wn.field(t)},e.prototype.data=function(){return this.wn},e.prototype.En=function(){return this.wn.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.an===t.an&&this.hasCommittedMutations===t.hasCommittedMutations&&this.wn.isEqual(t.wn)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.wn.toString()+", {hasLocalMutations: "+this.an+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.an||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(nA),iA=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Gn.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(nA),oA=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gn.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(nA),sA=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.Tn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.In=null,this.mn=null};function aA(t,e,n,r,i,o,s,a){return new sA(t,e,n,r,i,o,s,a)}function uA(t){return new sA(t)}function cA(t){return!Ta(t.limit)&&"F"===t.limitType}function AA(t){return!Ta(t.limit)&&"L"===t.limitType}function lA(t){return t.Tn.length>0?t.Tn[0].field:null}function hA(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.An())return r.field}return null}function fA(t){return null!==t.collectionGroup}function dA(t){var e=Aa(t);if(null===e.In){e.In=[];var n=hA(e),r=lA(e);if(null!==n&&null===r)n.tt()||e.In.push(new RA(n)),e.In.push(new RA(Oa.et(),"asc"));else{for(var i=!1,o=0,s=e.Tn;o<s.length;o++){var a=s[o];e.In.push(a),a.field.tt()&&(i=!0)}if(!i){var u=e.Tn.length>0?e.Tn[e.Tn.length-1].dir:"asc";e.In.push(new RA(Oa.et(),u))}}}return e.In}function pA(t){var e=Aa(t);if(!e.mn)if("F"===e.limitType)e.mn=Ha(e.path,e.collectionGroup,dA(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=dA(e);r<i.length;r++){var o=i[r];n.push(new RA(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new FA(e.endAt.position,!e.endAt.before):null,a=e.startAt?new FA(e.startAt.position,!e.startAt.before):null;e.mn=Ha(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.mn}function gA(t,e,n){return new sA(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function yA(t,e){return xa(pA(t),pA(e))&&t.limitType===e.limitType}function vA(t){return Ra(pA(t))+"|lt:"+t.limitType}function mA(t){return"Query(target="+function(t){var e=t.path.J();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.J()+" "+e.op+" "+Tu(e.value);var e}).join(", ")+"]"),Ta(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.J()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+NA(t.startAt)),t.endAt&&(e+=", endAt: "+NA(t.endAt)),"Target("+e+")"}(pA(t))+"; limitType="+t.limitType+")"}function bA(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.rt(t.collectionGroup)&&t.path.j(n):Ia.ot(t.path)?t.path.isEqual(n):t.path.G(n)}(t,e)&&function(t,e){for(var n=0,r=t.Tn;n<r.length;n++){var i=r[n];if(!i.field.tt()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!SA(t.startAt,dA(t),e)||t.endAt&&SA(t.endAt,dA(t),e))}(t,e)}function wA(t){return function(e,n){for(var r=!1,i=0,o=dA(t);i<o.length;i++){var s=o[i],a=xA(s,e,n);if(0!==a)return a;r=r||s.field.tt()}return 0}}var _A=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Gn.c)(e,t),e.create=function(t,n,r){return t.tt()?"in"===n||"not-in"===n?this.Rn(t,n,r):new BA(t,n,r):"array-contains"===n?new UA(t,r):"in"===n?new OA(t,r):"not-in"===n?new IA(t,r):"array-contains-any"===n?new TA(t,r):new e(t,n,r)},e.Rn=function(t,e,n){return"in"===e?new CA(t,n):new EA(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.Pn(Ou(e,this.value)):null!==e&&Eu(this.value)===Eu(e)&&this.Pn(Ou(e,this.value))},e.prototype.Pn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ua()}},e.prototype.An=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),BA=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ia.it(r.referenceValue),i}return Object(Gn.c)(e,t),e.prototype.matches=function(t){var e=Ia.$(t.key,this.key);return this.Pn(e)},e}(_A),CA=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=QA(0,n),r}return Object(Gn.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(_A),EA=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=QA(0,n),r}return Object(Gn.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(_A);function QA(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Ia.it(t.referenceValue)})}var UA=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Gn.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return Du(e)&&Uu(e.arrayValue,this.value)},e}(_A),OA=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Gn.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&Uu(this.value.arrayValue,e)},e}(_A),IA=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Gn.c)(e,t),e.prototype.matches=function(t){if(Uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!Uu(this.value.arrayValue,e)},e}(_A),TA=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Gn.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!Du(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Uu(e.value.arrayValue,t)})},e}(_A),FA=function(t,e){this.position=t,this.before=e};function NA(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return Tu(t)}).join(",")}function SA(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.tt()?Ia.$(Ia.it(s.referenceValue),n.key):Ou(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function HA(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Qu(t.position[n],e.position[n]))return!1;return!0}var RA=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function xA(t,e,n){var r=t.field.tt()?Ia.$(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?Ou(r,i):ua()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ua()}}function DA(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var PA=function(){function t(t,e,n,r){this.batchId=t,this.gn=e,this.baseMutations=n,this.mutations=r}return t.prototype.yn=function(t,e,n){for(var r=n.Vn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Lc(o,e,r[i]))}return e},t.prototype.pn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Mc(i,e,e,this.gn))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=Mc(u,e,o,this.gn))}return e},t.prototype.vn=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.pn(r.key,t.get(r.key));i&&(n=n.Tt(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},ru())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&wa(this.mutations,t.mutations,function(t,e){return Kc(t,e)})&&wa(this.baseMutations,t.baseMutations,function(t,e){return Kc(t,e)})},t}(),kA=function(){function t(t,e,n,r){this.batch=t,this.bn=e,this.Vn=n,this.Sn=r}return t.from=function(e,n,r){ca(e.mutations.length===r.length);for(var i=eu,o=e.mutations,s=0;s<o.length;s++)i=i.Tt(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),LA=function(){function t(t,e){this.Dn=t,this.Cn=e,this.Nn={}}return t.prototype.get=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.Cn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.Dn(t),r=this.Nn[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.Cn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.Nn[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.Cn(n[r][0],t))return 1===n.length?delete this.Nn[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){mu(this.Nn,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.W=function(){return bu(this.Nn)},t}(),MA=function(){function t(t){var e=this;this.xn=null,this.Fn=null,this.result=void 0,this.error=void 0,this.On=!1,this.Mn=!1,t(function(t){e.On=!0,e.result=t,e.xn&&e.xn(t)},function(t){e.On=!0,e.error=t,e.Fn&&e.Fn(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.Mn&&ua(),this.Mn=!0,this.On?this.error?this.kn(n,this.error):this.$n(e,this.result):new t(function(t,i){r.xn=function(n){r.$n(e,n).next(t,i)},r.Fn=function(e){r.kn(n,e).next(t,i)}})},t.prototype.Ln=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.Bn=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.$n=function(e,n){return e?this.Bn(function(){return e(n)}):t.resolve(n)},t.prototype.kn=function(e,n){return e?this.Bn(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.qn=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.Un=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.qn(r)},t}(),jA=function(){function t(){this.Qn=new LA(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.Kn=!1}return t.prototype.Wn=function(t){var e=this.Qn.get(t);return e?e.readTime:Ca.min()},t.prototype.jn=function(t,e){this.Gn(),this.Qn.set(t.key,{zn:t,readTime:e})},t.prototype.Hn=function(t,e){void 0===e&&(e=null),this.Gn(),this.Qn.set(t,{zn:null,readTime:e})},t.prototype.Jn=function(t,e){this.Gn();var n=this.Qn.get(e);return void 0!==n?MA.resolve(n.zn):this.Yn(t,e)},t.prototype.getEntries=function(t,e){return this.Xn(t,e)},t.prototype.apply=function(t){return this.Gn(),this.Kn=!0,this.Zn(t)},t.prototype.Gn=function(){},t}(),KA=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})};function VA(t){return new Ku(t,!0)}function zA(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var GA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qA=function(){function t(){this.ts=[]}return t.prototype.es=function(t){this.ts.push(t)},t.prototype.ns=function(){this.ts.forEach(function(t){return t()})},t}(),WA=function(){function t(t,e,n){this.ss=t,this.rs=e,this.os=n}return t.prototype.cs=function(t,e){var n=this;return this.rs.us(t,e).next(function(r){return n.hs(t,e,r)})},t.prototype.hs=function(t,e,n){return this.ss.Jn(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].pn(e,t);return t})},t.prototype.ls=function(t,e,n){var r=$a();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].pn(t,e);r=r.Tt(t,e)}),r},t.prototype._s=function(t,e){var n=this;return this.ss.getEntries(t,e).next(function(e){return n.fs(t,e)})},t.prototype.fs=function(t,e){var n=this;return this.rs.ds(t,e).next(function(r){var i=n.ls(t,e,r),o=Ya();return i.forEach(function(t,e){e||(e=new iA(t,Ca.min())),o=o.Tt(t,e)}),o})},t.prototype.ws=function(t,e,n){return function(t){return Ia.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Es(t,e.path):fA(e)?this.Ts(t,e,n):this.Is(t,e,n)},t.prototype.Es=function(t,e){return this.cs(t,new Ia(e)).next(function(t){var e=tu();return t instanceof rA&&(e=e.Tt(t.key,t)),e})},t.prototype.Ts=function(t,e,n){var r=this,i=e.collectionGroup,o=tu();return this.os.As(t,i).next(function(s){return MA.forEach(s,function(s){var a=function(t,e){return new sA(e,null,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Is(t,a,n).next(function(t){t.forEach(function(t,e){o=o.Tt(t,e)})})}).next(function(){return o})})},t.prototype.Is=function(t,e,n){var r,i,o=this;return this.ss.ws(t,e,n).next(function(n){return r=n,o.rs.Rs(t,e)}).next(function(e){return o.Ps(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,A=r.get(c),l=Mc(u,A,A,o.gn);r=l instanceof rA?r.Tt(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){bA(e,n)||(r=r.remove(t))}),r})},t.prototype.Ps=function(t,e,n){for(var r=ru(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Gc&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ss.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof rA&&(c=c.Tt(t,e))}),c})},t}(),XA=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.gs=n,this.ys=r}return t.Vs=function(e,n){for(var r=ru(),i=ru(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),JA=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.ps=function(t){return n.vs(t)},this.bs=function(t){return e.Ss(t)})}return t.prototype.vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.bs&&this.bs(t),t},t}();JA.Ds=-1;var YA=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Cs=t,this.Ns=e,this.xs=n,this.Fs=r,this.Os=i,this.Ms=0,this.ks=null,this.$s=Date.now(),this.reset()}return t.prototype.reset=function(){this.Ms=0},t.prototype.Ls=function(){this.Ms=this.Os},t.prototype.Bs=function(t){var e=this;this.cancel();var n=Math.floor(this.Ms+this.qs()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);i>0&&ia("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ms+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.ks=this.Cs.Us(this.Ns,i,function(){return e.$s=Date.now(),t()}),this.Ms*=this.Fs,this.Ms<this.xs&&(this.Ms=this.xs),this.Ms>this.Os&&(this.Ms=this.Os)},t.prototype.Qs=function(){null!==this.ks&&(this.ks.Ks(),this.ks=null)},t.prototype.cancel=function(){null!==this.ks&&(this.ks.cancel(),this.ks=null)},t.prototype.qs=function(){return(Math.random()-.5)*this.Ms},t}(),$A=function(){function t(e,n,r){this.name=e,this.version=n,this.Ws=r,12.2===t.js(Object(Xn.n)())&&oa("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return ia("SimpleDb","Removing database:",t),il(window.indexedDB.deleteDatabase(t)).Ln()},t.Gs=function(){if("undefined"==typeof indexedDB)return!1;if(t.zs())return!0;var e=Object(Xn.n)(),n=t.js(e),r=0<n&&n<10,i=t.Hs(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.zs=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Js)},t.Ys=function(t,e){return t.store(e)},t.js=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Hs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Xs=function(t){return Object(Gn.b)(this,void 0,void 0,function(){var e,n=this;return Object(Gn.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(ia("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new tl(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new ha(la.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new tl(t,n))},i.onupgradeneeded=function(t){ia("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Ws.createOrUpgrade(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){ia("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Zs&&(this.db.onversionchange=function(t){return n.Zs(t)}),this.db)]}})})},t.prototype.ti=function(t){this.Zs=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Gn.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Gn.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,A;return Object(Gn.d)(this,function(l){switch(l.label){case 0:++o,l.label=1;case 1:return l.trys.push([1,4,,5]),[4,a.Xs(t)];case 2:return a.db=l.sent(),e=nl.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),MA.reject(t)}).Ln(),u={},s.catch(function(){}),[4,e.ei];case 3:return[2,(u.value=(l.sent(),s),u)];case 4:return ia("SimpleDb","Transaction failed with error:",(c=l.sent()).message,"Retrying:",A="FirebaseError"!==c.name&&o<3),a.close(),A?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ZA=function(){function t(t){this.ni=t,this.si=!1,this.ii=null}return Object.defineProperty(t.prototype,"On",{get:function(){return this.si},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ri",{get:function(){return this.ii},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.ni=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.si=!0},t.prototype.oi=function(t){this.ii=t},t.prototype.delete=function(){return il(this.ni.delete())},t}(),tl=function(t){function e(e,n){var r=this;return(r=t.call(this,la.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Gn.c)(e,t),e}(ha);function el(t){return"IndexedDbTransactionError"===t.name}var nl=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ci=new KA,this.transaction.oncomplete=function(){n.ci.resolve()},this.transaction.onabort=function(){e.error?n.ci.reject(new tl(t,e.error)):n.ci.resolve()},this.transaction.onerror=function(e){var r=sl(e.target.error);n.ci.reject(new tl(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new tl(n,e)}},Object.defineProperty(t.prototype,"ei",{get:function(){return this.ci.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ci.reject(t),this.aborted||(ia("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new rl(e)},t}(),rl=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(ia("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ia("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),il(n)},t.prototype.add=function(t){return ia("SimpleDb","ADD",this.store.name,t,t),il(this.store.add(t))},t.prototype.get=function(t){var e=this;return il(this.store.get(t)).next(function(n){return void 0===n&&(n=null),ia("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return ia("SimpleDb","DELETE",this.store.name,t),il(this.store.delete(t))},t.prototype.count=function(){return ia("SimpleDb","COUNT",this.store.name),il(this.store.count())},t.prototype.ui=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.ai(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.hi=function(t,e){ia("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.li=!1;var r=this.cursor(n);return this.ai(r,function(t,e,n){return n.delete()})},t.prototype._i=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.ai(r,e)},t.prototype.fi=function(t){var e=this.cursor({});return new MA(function(n,r){e.onerror=function(t){var e=sl(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.ai=function(t,e){var n=[];return new MA(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ZA(i),s=e(i.primaryKey,i.value,o);if(s instanceof MA){var a=s.catch(function(t){return o.done(),MA.reject(t)});n.push(a)}o.On?r():null===o.ri?i.continue():i.continue(o.ri)}else r()}}).next(function(){return MA.qn(n)})},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.li?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function il(t){return new MA(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=sl(t.target.error);n(e)}})}var ol=!1;function sl(t){var e=$A.js(Object(Xn.n)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new ha("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return ol||(ol=!0,setTimeout(function(){throw r},0)),r}}return t}function al(){return"undefined"!=typeof window?window:null}function ul(){return"undefined"!=typeof document?document:null}var cl=function(){function t(t,e,n,r,i){this.di=t,this.Ns=e,this.wi=n,this.op=r,this.Ei=i,this.Ti=new KA,this.then=this.Ti.promise.then.bind(this.Ti.promise),this.Ti.promise.catch(function(t){})}return t.Ii=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.mi=setTimeout(function(){return e.Ai()},t)},t.prototype.Ks=function(){return this.Ai()},t.prototype.cancel=function(t){null!==this.mi&&(this.clearTimeout(),this.Ti.reject(new ha(la.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.Ai=function(){var t=this;this.di.Ri(function(){return null!==t.mi?(t.clearTimeout(),t.op().then(function(e){return t.Ti.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.mi&&(this.Ei(this),clearTimeout(this.mi),this.mi=null)},t}(),Al=function(){function t(){var t=this;this.Pi=Promise.resolve(),this.gi=[],this.yi=!1,this.Vi=[],this.pi=null,this.vi=!1,this.bi=[],this.Si=new YA(this,"async_queue_retry"),this.Di=function(){var e=ul();e&&ia("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Si.Qs()};var e=ul();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Di)}return Object.defineProperty(t.prototype,"Ci",{get:function(){return this.yi},enumerable:!1,configurable:!0}),t.prototype.Ri=function(t){this.enqueue(t)},t.prototype.Ni=function(t){this.xi(),this.Fi(t)},t.prototype.Oi=function(){if(!this.yi){this.yi=!0;var t=ul();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Di)}},t.prototype.enqueue=function(t){return this.xi(),this.yi?new Promise(function(t){}):this.Fi(t)},t.prototype.Mi=function(t){var e=this;this.Ri(function(){return e.gi.push(t),e.ki()})},t.prototype.ki=function(){return Object(Gn.b)(this,void 0,void 0,function(){var t,e=this;return Object(Gn.d)(this,function(n){switch(n.label){case 0:if(0===this.gi.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gi[0]()];case 2:return n.sent(),this.gi.shift(),this.Si.reset(),[3,4];case 3:if(!el(t=n.sent()))throw t;return ia("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gi.length>0&&this.Si.Bs(function(){return e.ki()}),n.label=5;case 5:return[2]}})})},t.prototype.Fi=function(t){var e=this,n=this.Pi.then(function(){return e.vi=!0,t().catch(function(t){throw e.pi=t,e.vi=!1,oa("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.vi=!1,t})});return this.Pi=n,n},t.prototype.Us=function(t,e,n){var r=this;this.xi(),this.bi.indexOf(t)>-1&&(e=0);var i=cl.Ii(this,t,e,n,function(t){return r.$i(t)});return this.Vi.push(i),i},t.prototype.xi=function(){this.pi&&ua()},t.prototype.Li=function(){},t.prototype.Bi=function(){return Object(Gn.b)(this,void 0,void 0,function(){var t;return Object(Gn.d)(this,function(e){switch(e.label){case 0:return[4,t=this.Pi];case 1:e.sent(),e.label=2;case 2:if(t!==this.Pi)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.qi=function(t){for(var e=0,n=this.Vi;e<n.length;e++)if(n[e].Ns===t)return!0;return!1},t.prototype.Ui=function(t){var e=this;return this.Bi().then(function(){e.Vi.sort(function(t,e){return t.wi-e.wi});for(var n=0,r=e.Vi;n<r.length;n++){var i=r[n];if(i.Ks(),"all"!==t&&i.Ns===t)break}return e.Bi()})},t.prototype.Qi=function(t){this.bi.push(t)},t.prototype.$i=function(t){var e=this.Vi.indexOf(t);this.Vi.splice(e,1)},t}();function ll(t,e){if(oa("AsyncQueue",e+": "+t),el(t))return new ha(la.UNAVAILABLE,e+": "+t);throw t}function hl(t,e){var n=t[1],r=e[1],i=ba(t[0],e[0]);return 0===i?ba(n,r):i}var fl=function(){function t(t){this.Ki=t,this.buffer=new Wa(hl),this.Wi=0}return t.prototype.ji=function(){return++this.Wi},t.prototype.Gi=function(t){var e=[t,this.ji()];if(this.buffer.size<this.Ki)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();hl(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),dl={zi:!1,Hi:0,Ji:0,Yi:0},pl=function(){function t(t,e,n){this.Xi=t,this.Zi=e,this.tr=n}return t.er=function(e){return new t(e,t.nr,t.sr)},t}();pl.nr=10,pl.sr=1e3,pl.ir=new pl(41943040,pl.nr,pl.sr),pl.rr=new pl(-1,0,0);var gl=function(){function t(t,e){this.cr=t,this.di=e,this.ur=!1,this.ar=null}return t.prototype.start=function(t){-1!==this.cr.params.Xi&&this.hr(t)},t.prototype.stop=function(){this.ar&&(this.ar.cancel(),this.ar=null)},Object.defineProperty(t.prototype,"lr",{get:function(){return null!==this.ar},enumerable:!1,configurable:!0}),t.prototype.hr=function(t){var e=this,n=this.ur?3e5:6e4;ia("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ar=this.di.Us("lru_garbage_collection",n,function(){return Object(Gn.b)(e,void 0,void 0,function(){var e;return Object(Gn.d)(this,function(n){switch(n.label){case 0:this.ar=null,this.ur=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t._r(this.cr)];case 2:return n.sent(),[3,7];case 3:return el(e=n.sent())?(ia("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Kh(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.hr(t)];case 8:return n.sent(),[2]}})})})},t}(),yl=function(){function t(t,e){this.dr=t,this.params=e}return t.prototype.wr=function(t,e){return this.dr.Er(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.Tr=function(t,e){var n=this;if(0===e)return MA.resolve(JA.Ds);var r=new fl(e);return this.dr.Ue(t,function(t){return r.Gi(t.sequenceNumber)}).next(function(){return n.dr.Ir(t,function(t){return r.Gi(t)})}).next(function(){return r.maxValue})},t.prototype.mr=function(t,e,n){return this.dr.mr(t,e,n)},t.prototype.Ar=function(t,e){return this.dr.Ar(t,e)},t.prototype.Rr=function(t,e){var n=this;return-1===this.params.Xi?(ia("LruGarbageCollector","Garbage collection skipped; disabled"),MA.resolve(dl)):this.Pr(t).next(function(r){return r<n.params.Xi?(ia("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.Xi),dl):n.gr(t,e)})},t.prototype.Pr=function(t){return this.dr.Pr(t)},t.prototype.gr=function(t,e){var n,r,i,o,s,a,u,c=this,A=Date.now();return this.wr(t,this.params.Zi).next(function(e){return e>c.params.tr?(ia("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.tr+" from "+e),r=c.params.tr):r=e,o=Date.now(),c.Tr(t,r)}).next(function(r){return n=r,s=Date.now(),c.mr(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.Ar(t,n)}).next(function(t){return u=Date.now(),ra()<=Wn.a.DEBUG&&ia("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-A)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-A)+"ms"),MA.resolve({zi:!0,Hi:r,Ji:i,Yi:t})})},t}();function vl(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=bl(e)),e=ml(t.get(n),e);return bl(e)}function ml(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function bl(t){return t+"\x01\x01"}function wl(t){var e=t.length;if(ca(e>=2),2===e)return ca("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Qa.X();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&ua(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:ua()}o=s+2}return new Qa(r)}var _l=function(t){this.yr=t};function Bl(t,e){if(e.document)return function(t,e,n){var r=tc(t,e.name),i=Ju(e.updateTime),o=new Zc({mapValue:{fields:e.fields}});return new rA(r,i,o,{hasCommittedMutations:!!n})}(t.yr,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ia.ct(e.noDocument.path),r=Ol(e.noDocument.readTime);return new iA(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=Ia.ct(e.unknownDocument.path),o=Ol(e.unknownDocument.version);return new oA(i,o)}return ua()}function Cl(t,e,n){var r=El(n),i=e.key.path.q().H();if(e instanceof rA){var o=function(t,e){return{name:Zu(t,e.key),fields:e.En().mapValue.fields,updateTime:qu(t,e.version.M())}}(t.yr,e);return new eh(null,null,o,e.hasCommittedMutations,r,i)}if(e instanceof iA){var s=e.key.path.H(),a=Ul(e.version),u=e.hasCommittedMutations;return new eh(null,new Zl(s,a),null,u,r,i)}if(e instanceof oA){var c=e.key.path.H(),A=Ul(e.version);return new eh(new th(c,A),null,null,!0,r,i)}return ua()}function El(t){var e=t.M();return[e.seconds,e.nanoseconds]}function Ql(t){var e=new Ba(t[0],t[1]);return Ca.N(e)}function Ul(t){var e=t.M();return new Wl(e.seconds,e.nanoseconds)}function Ol(t){var e=new Ba(t.seconds,t.nanoseconds);return Ca.N(e)}function Il(t,e){var n=(e.baseMutations||[]).map(function(e){return ac(t.yr,e)}),r=e.mutations.map(function(e){return ac(t.yr,e)}),i=Ba.fromMillis(e.localWriteTimeMs);return new PA(e.batchId,i,n,r)}function Tl(t){var e,n,r=Ol(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Ol(t.lastLimboFreeSnapshotVersion):Ca.min();return void 0!==t.query.documents?(ca(1===(n=t.query).documents.length),e=pA(uA(nc(n.documents[0])))):e=function(t){return pA(Ac(t))}(t.query),new Ma(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Pa.fromBase64String(t.resumeToken))}function Fl(t,e){var n,r=Ul(e.ft),i=Ul(e.lastLimboFreeSnapshotVersion);n=Da(e.target)?uc(t.yr,e.target):cc(t.yr,e.target);var o=e.resumeToken.toBase64();return new rh(e.targetId,Ra(e.target),r,o,e.sequenceNumber,i,n)}function Nl(t){var e=Ac({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?gA(e,e.limit,"L"):e}var Sl=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.os=n,this.Vr=r,this.pr={}}return t.vr=function(e,n,r,i){return ca(""!==e.uid),new t(e.u()?e.uid:"",n,r,i)},t.prototype.br=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xl(t)._i({index:Yl.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.Sr=function(t,e,n,r){var i=this,o=Dl(t),s=xl(t);return s.add({}).next(function(a){ca("number"==typeof a);for(var u=new PA(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return sc(t.yr,e)}),i=n.mutations.map(function(e){return sc(t.yr,e)});return new Yl(e,n.batchId,n.gn.toMillis(),r,i)}(i.serializer,i.userId,u),A=[],l=new Wa(function(t,e){return ba(t.J(),e.J())}),h=0,f=r;h<f.length;h++){var d=f[h],p=$l.key(i.userId,d.key.path,a);l=l.add(d.key.path.q()),A.push(s.put(c)),A.push(o.put(p,$l.PLACEHOLDER))}return l.forEach(function(e){A.push(i.os.Dr(t,e))}),t.es(function(){i.pr[a]=u.keys()}),MA.qn(A).next(function(){return u})})},t.prototype.Cr=function(t,e){var n=this;return xl(t).get(e).next(function(t){return t?(ca(t.userId===n.userId),Il(n.serializer,t)):null})},t.prototype.Nr=function(t,e){var n=this;return this.pr[e]?MA.resolve(this.pr[e]):this.Cr(t,e).next(function(t){if(t){var r=t.keys();return n.pr[e]=r,r}return null})},t.prototype.Fr=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return xl(t)._i({index:Yl.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(ca(e.batchId>=r),o=Il(n.serializer,e)),i.done()}).next(function(){return o})},t.prototype.Or=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return xl(t)._i({index:Yl.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.Mr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xl(t).ui(Yl.userMutationsIndex,n).next(function(t){return t.map(function(t){return Il(e.serializer,t)})})},t.prototype.us=function(t,e){var n=this,r=$l.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Dl(t)._i({range:i},function(r,i,s){var a=r[0],u=r[2],c=wl(r[1]);if(a===n.userId&&e.path.isEqual(c))return xl(t).get(u).next(function(t){if(!t)throw ua();ca(t.userId===n.userId),o.push(Il(n.serializer,t))});s.done()}).next(function(){return o})},t.prototype.ds=function(t,e){var n=this,r=new Wa(ba),i=[];return e.forEach(function(e){var o=$l.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Dl(t)._i({range:s},function(t,i,o){var s=t[0],a=t[2],u=wl(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),MA.qn(i).next(function(){return n.kr(t,r)})},t.prototype.Rs=function(t,e){var n=this,r=e.path,i=r.length+1,o=$l.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Wa(ba);return Dl(t)._i({range:s},function(t,e,o){var s=t[0],u=t[2],c=wl(t[1]);s===n.userId&&r.j(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.kr(t,a)})},t.prototype.kr=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(xl(t).get(e).next(function(t){if(null===t)throw ua();ca(t.userId===n.userId),r.push(Il(n.serializer,t))}))}),MA.qn(i).next(function(){return r})},t.prototype.$r=function(t,e){var n=this;return Rl(t.Lr,this.userId,e).next(function(r){return t.es(function(){n.Br(e.batchId)}),MA.forEach(r,function(e){return n.Vr.qr(t,e)})})},t.prototype.Br=function(t){delete this.pr[t]},t.prototype.Ur=function(t){var e=this;return this.br(t).next(function(n){if(!n)return MA.resolve();var r=IDBKeyRange.lowerBound($l.prefixForUser(e.userId)),i=[];return Dl(t)._i({range:r},function(t,n,r){if(t[0]===e.userId){var o=wl(t[1]);i.push(o)}else r.done()}).next(function(){ca(0===i.length)})})},t.prototype.Qr=function(t,e){return Hl(t,this.userId,e)},t.prototype.Kr=function(t){var e=this;return Pl(t).get(this.userId).next(function(t){return t||new Jl(e.userId,-1,"")})},t}();function Hl(t,e,n){var r=$l.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Dl(t)._i({range:o,li:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Rl(t,e,n){var r=t.store(Yl.store),i=t.store($l.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r._i({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){ca(1===a)}));for(var c=[],A=0,l=n.mutations;A<l.length;A++){var h=l[A],f=$l.key(e,h.key.path,n.batchId);o.push(i.delete(f)),c.push(h.key)}return MA.qn(o).next(function(){return c})}function xl(t){return Ch.Ys(t,Yl.store)}function Dl(t){return Ch.Ys(t,$l.store)}function Pl(t){return Ch.Ys(t,Jl.store)}var kl=function(){function t(t,e){this.serializer=t,this.os=e}return t.prototype.jn=function(t,e,n){return jl(t).put(Kl(e),n)},t.prototype.Hn=function(t,e){var n=jl(t),r=Kl(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Wr(t,r)})},t.prototype.Jn=function(t,e){var n=this;return jl(t).get(Kl(e)).next(function(t){return n.jr(t)})},t.prototype.Gr=function(t,e){var n=this;return jl(t).get(Kl(e)).next(function(t){var e=n.jr(t);return e?{zn:e,size:Vl(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=$a();return this.zr(t,e,function(t,e){var i=n.jr(e);r=r.Tt(t,i)}).next(function(){return r})},t.prototype.Hr=function(t,e){var n=this,r=$a(),i=new za(Ia.$);return this.zr(t,e,function(t,e){var o=n.jr(e);o?(r=r.Tt(t,o),i=i.Tt(t,Vl(e))):(r=r.Tt(t,null),i=i.Tt(t,0))}).next(function(){return{Jr:r,Yr:i}})},t.prototype.zr=function(t,e,n){if(e.W())return MA.resolve();var r=IDBKeyRange.bound(e.first().path.H(),e.last().path.H()),i=e.yt(),o=i.Ct();return jl(t)._i({range:r},function(t,e,r){for(var s=Ia.ct(t);o&&Ia.$(o,s)<0;)n(o,null),o=i.Ct();o&&o.isEqual(s)&&(n(o,e),o=i.Nt()?i.Ct():null),o?r.oi(o.path.H()):r.done()}).next(function(){for(;o;)n(o,null),o=i.Nt()?i.Ct():null})},t.prototype.ws=function(t,e,n){var r=this,i=tu(),o=e.path.length+1,s={};if(n.isEqual(Ca.min())){var a=e.path.H();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.H(),c=El(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=eh.collectionReadTimeIndex}return jl(t)._i(s,function(t,n,s){if(t.length===o){var a=Bl(r.serializer,n);e.path.j(a.key.path)?a instanceof rA&&bA(e,a)&&(i=i.Tt(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.Xr=function(t){return new Ll(this,!!t&&t.Zr)},t.prototype.eo=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Ml(t).get(nh.key).next(function(t){return ca(!!t),t})},t.prototype.Wr=function(t,e){return Ml(t).put(nh.key,e)},t.prototype.jr=function(t){if(t){var e=Bl(this.serializer,t);return e instanceof iA&&e.version.isEqual(Ca.min())?null:e}return null},t}(),Ll=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).no=e,r.Zr=n,r.so=new LA(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Gn.c)(e,t),e.prototype.Zn=function(t){var e=this,n=[],r=0,i=new Wa(function(t,e){return ba(t.J(),e.J())});return this.Qn.forEach(function(o,s){var a=e.so.get(o);if(s.zn){var u=Cl(e.no.serializer,s.zn,e.Wn(o));i=i.add(o.path.q());var c=Vl(u);r+=c-a,n.push(e.no.jn(t,o,u))}else if(r-=a,e.Zr){var A=Cl(e.no.serializer,new iA(o,Ca.min()),e.Wn(o));n.push(e.no.jn(t,o,A))}else n.push(e.no.Hn(t,o))}),i.forEach(function(r){n.push(e.no.os.Dr(t,r))}),n.push(this.no.updateMetadata(t,r)),MA.qn(n)},e.prototype.Yn=function(t,e){var n=this;return this.no.Gr(t,e).next(function(t){return null===t?(n.so.set(e,0),null):(n.so.set(e,t.size),t.zn)})},e.prototype.Xn=function(t,e){var n=this;return this.no.Hr(t,e).next(function(t){var e=t.Jr;return t.Yr.forEach(function(t,e){n.so.set(t,e)}),e})},e}(jA);function Ml(t){return Ch.Ys(t,nh.store)}function jl(t){return Ch.Ys(t,eh.store)}function Kl(t){return t.path.H()}function Vl(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ua();e=t.noDocument}return JSON.stringify(e).length}var zl=function(){function t(){this.io=new Gl}return t.prototype.Dr=function(t,e){return this.io.add(e),MA.resolve()},t.prototype.As=function(t,e){return MA.resolve(this.io.getEntries(e))},t}(),Gl=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.K(),n=t.q(),r=this.index[e]||new Wa(Qa.$),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.K(),n=t.q(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Wa(Qa.$)).H()},t}(),ql=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;ca(n<r&&n>=0&&r<=11);var o=new nl("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Xl.store)}(t),function(t){t.createObjectStore(Jl.store,{keyPath:Jl.keyPath}),t.createObjectStore(Yl.store,{keyPath:Yl.keyPath,autoIncrement:!0}).createIndex(Yl.userMutationsIndex,Yl.userMutationsKeyPath,{unique:!0}),t.createObjectStore($l.store)}(t),ah(t),function(t){t.createObjectStore(eh.store)}(t));var s=MA.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(ih.store),t.deleteObjectStore(rh.store),t.deleteObjectStore(oh.store)}(t),ah(t)),s=s.next(function(){return function(t){var e=t.store(oh.store),n=new oh(0,0,Ca.min().M(),0);return e.put(oh.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(Yl.store).ui().next(function(n){t.deleteObjectStore(Yl.store),t.createObjectStore(Yl.store,{keyPath:Yl.keyPath,autoIncrement:!0}).createIndex(Yl.userMutationsIndex,Yl.userMutationsKeyPath,{unique:!0});var r=e.store(Yl.store),i=n.map(function(t){return r.put(t)});return MA.qn(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(uh.store,{keyPath:uh.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.removeAcknowledgedMutations(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(nh.store)}(t),i.addDocumentGlobal(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ensureSequenceNumbers(o)})),n<8&&r>=8&&(s=s.next(function(){return i.createCollectionParentIndex(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(eh.store);e.createIndex(eh.readTimeIndex,eh.readTimeIndexPath,{unique:!1}),e.createIndex(eh.collectionReadTimeIndex,eh.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.rewriteCanonicalIds(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(ch.store,{keyPath:ch.keyPath})}(t),function(t){t.createObjectStore(Ah.store,{keyPath:Ah.keyPath})}(t)})),s},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(eh.store)._i(function(t,n){e+=Vl(n)}).next(function(){var n=new nh(e);return t.store(nh.store).put(nh.key,n)})},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(Jl.store),r=t.store(Yl.store);return n.ui().next(function(n){return MA.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.ui(Yl.userMutationsIndex,i).next(function(r){return MA.forEach(r,function(r){ca(r.userId===n.userId);var i=Il(e.serializer,r);return Rl(t,n.userId,i).next(function(){})})})})})},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(ih.store),n=t.store(eh.store);return t.store(oh.store).get(oh.key).next(function(t){var r=[];return n._i(function(n,i){var o=new Qa(n),s=function(t){return[0,vl(t)]}(o);r.push(e.get(s).next(function(n){return n?MA.resolve():function(n){return e.put(new ih(0,vl(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return MA.qn(r)})})},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(sh.store,{keyPath:sh.keyPath});var n=e.store(sh.store),r=new Gl,i=function(t){if(r.add(t)){var e=t.K(),i=t.q();return n.put({collectionId:e,parent:vl(i)})}};return e.store(eh.store)._i({li:!0},function(t,e){var n=new Qa(t);return i(n.q())}).next(function(){return e.store($l.store)._i({li:!0},function(t,e){var n=wl(t[1]);return i(n.q())})})},t.prototype.rewriteCanonicalIds=function(t){var e=this,n=t.store(rh.store);return n._i(function(t,r){var i=Tl(r),o=Fl(e.serializer,i);return n.put(o)})},t}(),Wl=function(t,e){this.seconds=t,this.nanoseconds=e},Xl=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Xl.store="owner",Xl.key="owner";var Jl=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Jl.store="mutationQueues",Jl.keyPath="userId";var Yl=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Yl.store="mutations",Yl.keyPath="batchId",Yl.userMutationsIndex="userMutationsIndex",Yl.userMutationsKeyPath=["userId","batchId"];var $l=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,vl(e)]},t.key=function(t,e,n){return[t,vl(e),n]},t}();$l.store="documentMutations",$l.PLACEHOLDER=new $l;var Zl=function(t,e){this.path=t,this.readTime=e},th=function(t,e){this.path=t,this.version=e},eh=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};eh.store="remoteDocuments",eh.readTimeIndex="readTimeIndex",eh.readTimeIndexPath="readTime",eh.collectionReadTimeIndex="collectionReadTimeIndex",eh.collectionReadTimeIndexPath=["parentPath","readTime"];var nh=function(t){this.byteSize=t};nh.store="remoteDocumentGlobal",nh.key="remoteDocumentGlobalKey";var rh=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};rh.store="targets",rh.keyPath="targetId",rh.queryTargetsIndexName="queryTargetsIndex",rh.queryTargetsKeyPath=["canonicalId","targetId"];var ih=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};ih.store="targetDocuments",ih.keyPath=["targetId","path"],ih.documentTargetsIndex="documentTargetsIndex",ih.documentTargetsKeyPath=["path","targetId"];var oh=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};oh.key="targetGlobalKey",oh.store="targetGlobal";var sh=function(t,e){this.collectionId=t,this.parent=e};function ah(t){t.createObjectStore(ih.store,{keyPath:ih.keyPath}).createIndex(ih.documentTargetsIndex,ih.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(rh.store,{keyPath:rh.keyPath}).createIndex(rh.queryTargetsIndexName,rh.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(oh.store)}sh.store="collectionParents",sh.keyPath=["collectionId","parent"];var uh=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};uh.store="clientMetadata",uh.keyPath="clientId";var ch=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};ch.store="bundles",ch.keyPath="bundleId";var Ah=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ah.store="namedQueries",Ah.keyPath="name";var lh=Object(Gn.g)(Object(Gn.g)(Object(Gn.g)(Object(Gn.g)([Jl.store,Yl.store,$l.store,eh.store,rh.store,Xl.store,oh.store,ih.store],[uh.store]),[nh.store]),[sh.store]),[ch.store,Ah.store]),hh=function(){function t(t){this.serializer=t}return t.prototype.ro=function(t,e){return fh(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Ol(e.createTime),version:e.version};var e})},t.prototype.oo=function(t,e){return fh(t).put({bundleId:(n=e).id,createTime:Ul(Ju(n.createTime)),version:n.version});var n},t.prototype.co=function(t,e){return dh(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Nl(e.bundledQuery),readTime:Ol(e.readTime)};var e})},t.prototype.uo=function(t,e){return dh(t).put(function(t){return{name:t.name,readTime:Ul(Ju(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function fh(t){return Ch.Ys(t,ch.store)}function dh(t){return Ch.Ys(t,Ah.store)}var ph=function(){function t(){this.ao=new Gl}return t.prototype.Dr=function(t,e){var n=this;if(!this.ao.has(e)){var r=e.K(),i=e.q();t.es(function(){n.ao.add(e)});var o={collectionId:r,parent:vl(i)};return gh(t).put(o)}return MA.resolve()},t.prototype.As=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[_a(e),""],!1,!0);return gh(t).ui(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(wl(o.parent))}return n})},t}();function gh(t){return Ch.Ys(t,sh.store)}var yh=function(){function t(t){this.ho=t}return t.prototype.next=function(){return this.ho+=2,this.ho},t.lo=function(){return new t(0)},t._o=function(){return new t(-1)},t}(),vh=function(){function t(t,e){this.Vr=t,this.serializer=e}return t.prototype.fo=function(t){var e=this;return this.wo(t).next(function(n){var r=new yh(n.highestTargetId);return n.highestTargetId=r.next(),e.Eo(t,n).next(function(){return n.highestTargetId})})},t.prototype.To=function(t){return this.wo(t).next(function(t){return Ca.N(new Ba(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.Io=function(t){return this.wo(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.mo=function(t,e,n){var r=this;return this.wo(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.M()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Eo(t,i)})},t.prototype.Ao=function(t,e){var n=this;return this.Ro(t,e).next(function(){return n.wo(t).next(function(r){return r.targetCount+=1,n.Po(e,r),n.Eo(t,r)})})},t.prototype.yo=function(t,e){return this.Ro(t,e)},t.prototype.Vo=function(t,e){var n=this;return this.po(t,e.targetId).next(function(){return mh(t).delete(e.targetId)}).next(function(){return n.wo(t)}).next(function(e){return ca(e.targetCount>0),e.targetCount-=1,n.Eo(t,e)})},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return mh(t)._i(function(s,a){var u=Tl(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.Vo(t,u)))}).next(function(){return MA.qn(o)}).next(function(){return i})},t.prototype.Ue=function(t,e){return mh(t)._i(function(t,n){var r=Tl(n);e(r)})},t.prototype.wo=function(t){return bh(t).get(oh.key).next(function(t){return ca(null!==t),t})},t.prototype.Eo=function(t,e){return bh(t).put(oh.key,e)},t.prototype.Ro=function(t,e){return mh(t).put(Fl(this.serializer,e))},t.prototype.Po=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.vo=function(t){return this.wo(t).next(function(t){return t.targetCount})},t.prototype.bo=function(t,e){var n=Ra(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return mh(t)._i({range:r,index:rh.queryTargetsIndexName},function(t,n,r){var o=Tl(n);xa(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.So=function(t,e,n){var r=this,i=[],o=wh(t);return e.forEach(function(e){var s=vl(e.path);i.push(o.put(new ih(n,s))),i.push(r.Vr.Do(t,n,e))}),MA.qn(i)},t.prototype.Co=function(t,e,n){var r=this,i=wh(t);return MA.forEach(e,function(e){var o=vl(e.path);return MA.qn([i.delete([n,o]),r.Vr.No(t,n,e)])})},t.prototype.po=function(t,e){var n=wh(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.xo=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=wh(t),i=ru();return r._i({range:n,li:!0},function(t,e,n){var r=wl(t[1]),o=new Ia(r);i=i.add(o)}).next(function(){return i})},t.prototype.Qr=function(t,e){var n=vl(e.path),r=IDBKeyRange.bound([n],[_a(n)],!1,!0),i=0;return wh(t)._i({index:ih.documentTargetsIndex,li:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.Ze=function(t,e){return mh(t).get(e).next(function(t){return t?Tl(t):null})},t}();function mh(t){return Ch.Ys(t,rh.store)}function bh(t){return Ch.Ys(t,oh.store)}function wh(t){return Ch.Ys(t,ih.store)}var _h="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Bh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Lr=e,r.Fo=n,r}return Object(Gn.c)(e,t),e}(qA),Ch=function(){function t(e,n,r,i,o,s,a,u,c,A){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Cs=o,this.window=s,this.document=a,this.Oo=c,this.Mo=A,this.ko=null,this.$o=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Lo=null,this.inForeground=!1,this.Bo=null,this.qo=null,this.Uo=Number.NEGATIVE_INFINITY,this.Qo=function(t){return Promise.resolve()},!t.Gs())throw new ha(la.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Vr=new Uh(this,i),this.Ko=n+"main",this.serializer=new _l(u),this.Wo=new $A(this.Ko,11,new ql(this.serializer)),this.jo=new vh(this.Vr,this.serializer),this.os=new ph,this.ss=function(t,e){return new kl(t,e)}(this.serializer,this.os),this.Go=new hh(this.serializer),this.window&&this.window.localStorage?this.zo=this.window.localStorage:(this.zo=null,!1===A&&oa("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.Ys=function(t,e){if(t instanceof Bh)return $A.Ys(t.Lr,e);throw ua()},t.prototype.start=function(){var t=this;return this.Ho().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new ha(la.FAILED_PRECONDITION,_h);return t.Jo(),t.Yo(),t.Xo(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.jo.Io(e)})}).then(function(e){t.ko=new JA(e,t.Oo)}).then(function(){t.$o=!0}).catch(function(e){return t.Wo&&t.Wo.close(),Promise.reject(e)})},t.prototype.Zo=function(t){var e=this;return this.Qo=function(n){return Object(Gn.b)(e,void 0,void 0,function(){return Object(Gn.d)(this,function(e){return this.lr?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.tc=function(t){var e=this;this.Wo.ti(function(n){return Object(Gn.b)(e,void 0,void 0,function(){return Object(Gn.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.ec=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Cs.Ri(function(){return Object(Gn.b)(e,void 0,void 0,function(){return Object(Gn.d)(this,function(t){switch(t.label){case 0:return this.lr?[4,this.Ho()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Ho=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Qh(e).put(new uh(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.nc(e).next(function(e){e||(t.isPrimary=!1,t.Cs.Mi(function(){return t.Qo(!1)}))})}).next(function(){return t.sc(e)}).next(function(n){return t.isPrimary&&!n?t.ic(e).next(function(){return!1}):!!n&&t.rc(e).next(function(){return!0})})}).catch(function(e){if(el(e))return ia("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return ia("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Cs.Mi(function(){return t.Qo(e)}),t.isPrimary=e})},t.prototype.nc=function(t){var e=this;return Eh(t).get(Xl.key).next(function(t){return MA.resolve(e.oc(t))})},t.prototype.cc=function(t){return Qh(t).delete(this.clientId)},t.prototype.uc=function(){return Object(Gn.b)(this,void 0,void 0,function(){var e,n,r,i=this;return Object(Gn.d)(this,function(o){switch(o.label){case 0:return!this.isPrimary||this.ac(this.Uo,18e5)?[3,2]:(this.Uo=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(e){var n=t.Ys(e,uh.store);return n.ui().next(function(t){var e=i.hc(t,18e5),r=t.filter(function(t){return-1===e.indexOf(t)});return MA.forEach(r,function(t){return n.delete(t.clientId)}).next(function(){return r})})}).catch(function(){return[]})]);case 1:if(e=o.sent(),this.zo)for(n=0,r=e;n<r.length;n++)this.zo.removeItem(this.lc(r[n].clientId));o.label=2;case 2:return[2]}})})},t.prototype.Xo=function(){var t=this;this.qo=this.Cs.Us("client_metadata_refresh",4e3,function(){return t.Ho().then(function(){return t.uc()}).then(function(){return t.Xo()})})},t.prototype.oc=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sc=function(t){var e=this;return this.Mo?MA.resolve(!0):Eh(t).get(Xl.key).next(function(n){if(null!==n&&e.ac(n.leaseTimestampMs,5e3)&&!e._c(n.ownerId)){if(e.oc(n)&&e.networkEnabled)return!0;if(!e.oc(n)){if(!n.allowTabSynchronization)throw new ha(la.FAILED_PRECONDITION,_h);return!1}}return!(!e.networkEnabled||!e.inForeground)||Qh(t).ui().next(function(t){return void 0===e.hc(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&ia("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.fc=function(){return Object(Gn.b)(this,void 0,void 0,function(){var t=this;return Object(Gn.d)(this,function(e){switch(e.label){case 0:return this.$o=!1,this.dc(),this.qo&&(this.qo.cancel(),this.qo=null),this.wc(),this.Ec(),[4,this.Wo.runTransaction("shutdown","readwrite",[Xl.store,uh.store],function(e){var n=new Bh(e,JA.Ds);return t.ic(n).next(function(){return t.cc(n)})})];case 1:return e.sent(),this.Wo.close(),this.Tc(),[2]}})})},t.prototype.hc=function(t,e){var n=this;return t.filter(function(t){return n.ac(t.updateTimeMs,e)&&!n._c(t.clientId)})},t.prototype.Ic=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Qh(e).ui().next(function(e){return t.hc(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"lr",{get:function(){return this.$o},enumerable:!1,configurable:!0}),t.prototype.mc=function(t){return Sl.vr(t,this.serializer,this.os,this.Vr)},t.prototype.Ac=function(){return this.jo},t.prototype.Rc=function(){return this.ss},t.prototype.Pc=function(){return this.os},t.prototype.gc=function(){return this.Go},t.prototype.runTransaction=function(t,e,n){var r,i=this;return ia("IndexedDbPersistence","Starting transaction:",t),this.Wo.runTransaction(t,"readonly"===e?"readonly":"readwrite",lh,function(o){return r=new Bh(o,i.ko?i.ko.next():JA.Ds),"readwrite-primary"===e?i.nc(r).next(function(t){return!!t||i.sc(r)}).next(function(e){if(!e)throw oa("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Cs.Mi(function(){return i.Qo(!1)}),new ha(la.FAILED_PRECONDITION,GA);return n(r)}).next(function(t){return i.rc(r).next(function(){return t})}):i.yc(r).next(function(){return n(r)})}).then(function(t){return r.ns(),t})},t.prototype.yc=function(t){var e=this;return Eh(t).get(Xl.key).next(function(t){if(null!==t&&e.ac(t.leaseTimestampMs,5e3)&&!e._c(t.ownerId)&&!e.oc(t)&&!(e.Mo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new ha(la.FAILED_PRECONDITION,_h)})},t.prototype.rc=function(t){var e=new Xl(this.clientId,this.allowTabSynchronization,Date.now());return Eh(t).put(Xl.key,e)},t.Gs=function(){return $A.Gs()},t.prototype.ic=function(t){var e=this,n=Eh(t);return n.get(Xl.key).next(function(t){return e.oc(t)?(ia("IndexedDbPersistence","Releasing primary lease."),n.delete(Xl.key)):MA.resolve()})},t.prototype.ac=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(oa("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Jo=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Bo=function(){t.Cs.Ri(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ho()})},this.document.addEventListener("visibilitychange",this.Bo),this.inForeground="visible"===this.document.visibilityState)},t.prototype.wc=function(){this.Bo&&(this.document.removeEventListener("visibilitychange",this.Bo),this.Bo=null)},t.prototype.Yo=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Lo=function(){e.dc(),e.Cs.Ri(function(){return e.fc()})},this.window.addEventListener("unload",this.Lo))},t.prototype.Ec=function(){this.Lo&&(this.window.removeEventListener("unload",this.Lo),this.Lo=null)},t.prototype._c=function(t){var e;try{var n=null!==(null===(e=this.zo)||void 0===e?void 0:e.getItem(this.lc(t)));return ia("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return oa("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.dc=function(){if(this.zo)try{this.zo.setItem(this.lc(this.clientId),String(Date.now()))}catch(t){oa("Failed to set zombie client id.",t)}},t.prototype.Tc=function(){if(this.zo)try{this.zo.removeItem(this.lc(this.clientId))}catch(t){}},t.prototype.lc=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Eh(t){return Ch.Ys(t,Xl.store)}function Qh(t){return Ch.Ys(t,uh.store)}var Uh=function(){function t(t,e){this.db=t,this.cr=new yl(this,e)}return t.prototype.Er=function(t){var e=this.Vc(t);return this.db.Ac().vo(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.Vc=function(t){var e=0;return this.Ir(t,function(t){e++}).next(function(){return e})},t.prototype.Ue=function(t,e){return this.db.Ac().Ue(t,e)},t.prototype.Ir=function(t,e){return this.vc(t,function(t,n){return e(n)})},t.prototype.Do=function(t,e,n){return Oh(t,n)},t.prototype.No=function(t,e,n){return Oh(t,n)},t.prototype.mr=function(t,e,n){return this.db.Ac().mr(t,e,n)},t.prototype.qr=function(t,e){return Oh(t,e)},t.prototype.bc=function(t,e){return function(t,e){var n=!1;return Pl(t).fi(function(r){return Hl(t,r,e).next(function(t){return t&&(n=!0),MA.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.Ar=function(t,e){var n=this,r=this.db.Rc().Xr(),i=[],o=0;return this.vc(t,function(s,a){if(a<=e){var u=n.bc(t,s).next(function(e){if(!e)return o++,r.Jn(t,s).next(function(){return r.Hn(s),wh(t).delete([0,vl(s.path)])})});i.push(u)}}).next(function(){return MA.qn(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.dt(t.Fo);return this.db.Ac().yo(t,n)},t.prototype.Sc=function(t,e){return Oh(t,e)},t.prototype.vc=function(t,e){var n,r=wh(t),i=JA.Ds;return r._i({index:ih.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==JA.Ds&&e(new Ia(wl(n)),i),i=s,n=o):i=JA.Ds}).next(function(){i!==JA.Ds&&e(new Ia(wl(n)),i)})},t.prototype.Pr=function(t){return this.db.Rc().eo(t)},t}();function Oh(t,e){return wh(t).put(function(t,e){return new ih(0,vl(t.path),e)}(e,t.Fo))}function Ih(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Th=function(){function t(t,e,n,r){this.persistence=t,this.Dc=e,this.serializer=r,this.Cc=new za(ba),this.Nc=new LA(function(t){return Ra(t)},xa),this.xc=Ca.min(),this.rs=t.mc(n),this.Fc=t.Rc(),this.jo=t.Ac(),this.Oc=new WA(this.Fc,this.rs,this.persistence.Pc()),this.Go=t.gc(),this.Dc.Mc(this.Oc)}return t.prototype._r=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.Rr(n,e.Cc)})},t}();function Fh(t,e,n,r){return new Th(t,e,n,r)}function Nh(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Gn.d)(this,function(s){switch(s.label){case 0:return n=Aa(t),r=n.rs,i=n.Oc,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.rs.Mr(t).next(function(s){return o=s,r=n.persistence.mc(e),i=new WA(n.Fc,r,n.persistence.Pc()),r.Mr(t)}).next(function(e){for(var n=[],r=[],s=ru(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var A=0,l=c.mutations;A<l.length;A++)s=s.add(l[A].key)}for(var h=0,f=e;h<f.length;h++){var d=f[h];r.push(d.batchId);for(var p=0,g=d.mutations;p<g.length;p++)s=s.add(g[p].key)}return i._s(t,s).next(function(t){return{kc:t,$c:n,Lc:r}})})})];case 1:return o=s.sent(),[2,(n.rs=r,n.Oc=i,n.Dc.Mc(n.Oc),o)]}})})}function Sh(t,e){var n=Aa(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Fc.Xr({Zr:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=MA.resolve();return o.forEach(function(t){s=s.next(function(){return r.Jn(e,t)}).next(function(e){var o=e,s=n.Sn.get(t);ca(null!==s),(!o||o.version.F(s)<0)&&(o=i.yn(t,o,n))&&r.jn(o,n.bn)})}),s.next(function(){return t.rs.$r(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.rs.Ur(t)}).next(function(){return n.Oc._s(t,r)})})}function Hh(t){var e=Aa(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.jo.To(t)})}function Rh(t,e){var n=Aa(t),r=e.ft,i=n.Cc;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Fc.Xr({Zr:!0});i=n.Cc;var s=[];e.re.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.jo.Co(t,e.de,o).next(function(){return n.jo.So(t,e._e,o)}));var u=e.resumeToken;if(u.ht()>0){var c=a.wt(u,r).dt(t.Fo);i=i.Tt(o,c),function(t,e,n){return ca(e.resumeToken.ht()>0),0===t.resumeToken.ht()||e.ft.O()-t.ft.O()>=3e8||n._e.size+n.fe.size+n.de.size>0}(a,c,e)&&s.push(n.jo.yo(t,c))}}});var a=Ya();if(e.ce.forEach(function(r,i){e.ue.has(r)&&s.push(n.persistence.Vr.Sc(t,r))}),s.push(function(t,e,n,r,i){var o=ru();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var i=Ya();return n.forEach(function(n,o){var s=t.get(n),a=r;o instanceof iA&&o.version.isEqual(Ca.min())?(e.Hn(n,a),i=i.Tt(n,o)):null==s||o.version.F(s.version)>0||0===o.version.F(s.version)&&s.hasPendingWrites?(e.jn(o,a),i=i.Tt(n,o)):ia("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",o.version)}),i})}(t,o,e.ce,r).next(function(t){a=t})),!r.isEqual(Ca.min())){var u=n.jo.To(t).next(function(e){return n.jo.mo(t,t.Fo,r)});s.push(u)}return MA.qn(s).next(function(){return o.apply(t)}).next(function(){return n.Oc.fs(t,a)})}).then(function(t){return n.Cc=i,t})}function xh(t,e){var n=Aa(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.rs.Fr(t,e)})}function Dh(t,e){var n=Aa(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.jo.bo(t,e).next(function(i){return i?MA.resolve(r=i):n.jo.fo(t).next(function(i){return r=new Ma(e,i,0,t.Fo),n.jo.Ao(t,r).next(function(){return r})})})}).then(function(t){var r=n.Cc.get(t.targetId);return(null===r||t.ft.F(r.ft)>0)&&(n.Cc=n.Cc.Tt(t.targetId,t),n.Nc.set(e,t.targetId)),t})}function Ph(t,e,n){return Object(Gn.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Gn.d)(this,function(a){switch(a.label){case 0:r=Aa(t),i=r.Cc.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.Vr.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!el(s=a.sent()))throw s;return ia("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Cc=r.Cc.remove(e),r.Nc.delete(i.target),[2]}})})}function kh(t,e,n){var r=Aa(t),i=Ca.min(),o=ru();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Aa(t),i=r.Nc.get(n);return void 0!==i?MA.resolve(r.Cc.get(i)):r.jo.bo(e,n)}(r,t,pA(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.jo.xo(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Dc.ws(t,e,n?i:Ca.min(),n?o:ru())}).next(function(t){return{documents:t,Bc:o}})})}function Lh(t,e){var n=Aa(t),r=Aa(n.jo),i=n.Cc.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Ze(t,e).next(function(t){return t?t.target:null})})}function Mh(t){var e=Aa(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Aa(t),i=Ya(),o=El(n),s=jl(e),a=IDBKeyRange.lowerBound(o,!0);return s._i({index:eh.readTimeIndex,range:a},function(t,e){var n=Bl(r.serializer,e);i=i.Tt(n.key,n),o=e.readTime}).next(function(){return{qc:i,readTime:Ql(o)}})}(e.Fc,t,e.xc)}).then(function(t){var n=t.qc;return e.xc=t.readTime,n})}function jh(t){return Object(Gn.b)(this,void 0,void 0,function(){var e;return Object(Gn.d)(this,function(n){return[2,(e=Aa(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=jl(t),n=Ca.min();return e._i({index:eh.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Ql(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.xc=t})]})})}function Kh(t){return Object(Gn.b)(this,void 0,void 0,function(){return Object(Gn.d)(this,function(e){if(t.code!==la.FAILED_PRECONDITION||t.message!==GA)throw t;return ia("LocalStore","Unexpectedly lost primary lease"),[2]})})}var Vh=function(){function t(t,e,n,r,i,o){this.Cs=t,this.Uc=n,this.Qc=r,this.Kc=i,this.listener=o,this.state=0,this.Wc=0,this.jc=null,this.stream=null,this.Si=new YA(t,e)}return t.prototype.Gc=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.zc=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.Hc()},t.prototype.stop=function(){return Object(Gn.b)(this,void 0,void 0,function(){return Object(Gn.d)(this,function(t){switch(t.label){case 0:return this.Gc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.Jc=function(){this.state=0,this.Si.reset()},t.prototype.Yc=function(){var t=this;this.zc()&&null===this.jc&&(this.jc=this.Cs.Us(this.Uc,6e4,function(){return t.Xc()}))},t.prototype.Zc=function(t){this.tu(),this.stream.send(t)},t.prototype.Xc=function(){return Object(Gn.b)(this,void 0,void 0,function(){return Object(Gn.d)(this,function(t){return this.zc()?[2,this.close(0)]:[2]})})},t.prototype.tu=function(){this.jc&&(this.jc.cancel(),this.jc=null)},t.prototype.close=function(t,e){return Object(Gn.b)(this,void 0,void 0,function(){return Object(Gn.d)(this,function(n){switch(n.label){case 0:return this.tu(),this.Si.cancel(),this.Wc++,3!==t?this.Si.reset():e&&e.code===la.RESOURCE_EXHAUSTED?(oa(e.toString()),oa("Using maximum backoff delay to prevent overloading the backend."),this.Si.Ls()):e&&e.code===la.UNAUTHENTICATED&&this.Kc.m(),null!==this.stream&&(this.eu(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.nu(e)];case 1:return n.sent(),[2]}})})},t.prototype.eu=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.su(this.Wc),n=this.Wc;this.Kc.getToken().then(function(e){t.Wc===n&&t.iu(e)},function(n){e(function(){var e=new ha(la.UNKNOWN,"Fetching auth token failed: "+n.message);return t.ru(e)})})},t.prototype.iu=function(t){var e=this,n=this.su(this.Wc);this.stream=this.ou(t),this.stream.cu(function(){n(function(){return e.state=2,e.listener.cu()})}),this.stream.nu(function(t){n(function(){return e.ru(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.Hc=function(){var t=this;this.state=4,this.Si.Bs(function(){return Object(Gn.b)(t,void 0,void 0,function(){return Object(Gn.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.ru=function(t){return ia("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.su=function(t){var e=this;return function(n){e.Cs.Ri(function(){return e.Wc===t?n():(ia("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),zh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).serializer=i,s}return Object(Gn.c)(e,t),e.prototype.ou=function(t){return this.Qc.uu("Listen",t)},e.prototype.onMessage=function(t){this.Si.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ua()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.tn?(ca(void 0===e||"string"==typeof e),Pa.fromBase64String(e||"")):(ca(void 0===e||e instanceof Uint8Array),Pa.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(t){var e=void 0===t.code?la.UNKNOWN:Va(t.code);return new ha(e,t.message||"")}(s);n=new fu(r,i,o,a||null)}else if("documentChange"in e){var u=e.documentChange,c=tc(t,u.document.name),A=Ju(u.document.updateTime),l=new Zc({mapValue:{fields:u.document.fields}}),h=new rA(c,A,l,{});n=new lu(u.targetIds||[],u.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){var f=e.documentDelete,d=tc(t,f.document),p=f.readTime?Ju(f.readTime):Ca.min(),g=new iA(d,p);n=new lu([],f.removedTargetIds||[],g.key,g)}else if("documentRemove"in e){var y=e.documentRemove,v=tc(t,y.document);n=new lu([],y.removedTargetIds||[],v,null)}else{if(!("filter"in e))return ua();var m=e.filter,b=new ja(m.count||0);n=new hu(m.targetId,b)}return n}(this.serializer,t),n=function(t){if(!("targetChange"in t))return Ca.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ca.min():e.readTime?Ju(e.readTime):Ca.min()}(t);return this.listener.au(e,n)},e.prototype.hu=function(t){var e={};e.database=rc(this.serializer),e.addTarget=function(t,e){var n,r=e.target;return(n=Da(r)?{documents:uc(t,r)}:{query:cc(t,r)}).targetId=e.targetId,e.resumeToken.ht()>0?n.resumeToken=Wu(t,e.resumeToken):e.ft.F(Ca.min())>0&&(n.readTime=qu(t,e.ft.M())),n}(this.serializer,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ua()}}(0,e._t);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.Zc(e)},e.prototype.lu=function(t){var e={};e.database=rc(this.serializer),e.removeTarget=t,this.Zc(e)},e}(Vh),Gh=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).serializer=i,s._u=!1,s}return Object(Gn.c)(e,t),Object.defineProperty(e.prototype,"fu",{get:function(){return this._u},enumerable:!1,configurable:!0}),e.prototype.start=function(){this._u=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.eu=function(){this._u&&this.du([])},e.prototype.ou=function(t){return this.Qc.uu("Write",t)},e.prototype.onMessage=function(t){if(ca(!!t.streamToken),this.lastStreamToken=t.streamToken,this._u){this.Si.reset();var e=function(t,e){return t&&t.length>0?(ca(void 0!==e),t.map(function(t){return function(t,e){var n=Ju(t.updateTime?t.updateTime:e);n.isEqual(Ca.min())&&(n=Ju(e));var r=null;return t.transformResults&&t.transformResults.length>0&&(r=t.transformResults),new xc(n,r)}(t,e)})):[]}(t.writeResults,t.commitTime),n=Ju(t.commitTime);return this.listener.wu(n,e)}return ca(!t.writeResults||0===t.writeResults.length),this._u=!0,this.listener.Eu()},e.prototype.Tu=function(){var t={};t.database=rc(this.serializer),this.Zc(t)},e.prototype.du=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return sc(e.serializer,t)})};this.Zc(n)},e}(Vh),qh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Qc=n,i.serializer=r,i.Iu=!1,i}return Object(Gn.c)(e,t),e.prototype.mu=function(){if(this.Iu)throw new ha(la.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Au=function(t,e,n){var r=this;return this.mu(),this.credentials.getToken().then(function(i){return r.Qc.Au(t,e,n,i)}).catch(function(t){throw t.code===la.UNAUTHENTICATED&&r.credentials.m(),t})},e.prototype.Ru=function(t,e,n){var r=this;return this.mu(),this.credentials.getToken().then(function(i){return r.Qc.Ru(t,e,n,i)}).catch(function(t){throw t.code===la.UNAUTHENTICATED&&r.credentials.m(),t})},e.prototype.terminate=function(){this.Iu=!1},e}(function(){}),Wh=function(){function t(t,e){this.di=t,this.Pu=e,this.state="Unknown",this.gu=0,this.yu=null,this.Vu=!0}return t.prototype.pu=function(){var t=this;0===this.gu&&(this.vu("Unknown"),this.yu=this.di.Us("online_state_timeout",1e4,function(){return t.yu=null,t.bu("Backend didn't respond within 10 seconds."),t.vu("Offline"),Promise.resolve()}))},t.prototype.Su=function(t){"Online"===this.state?this.vu("Unknown"):(this.gu++,this.gu>=1&&(this.Du(),this.bu("Connection failed 1 times. Most recent error: "+t.toString()),this.vu("Offline")))},t.prototype.set=function(t){this.Du(),this.gu=0,"Online"===t&&(this.Vu=!1),this.vu(t)},t.prototype.vu=function(t){t!==this.state&&(this.state=t,this.Pu(t))},t.prototype.bu=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vu?(oa(e),this.Vu=!1):ia("OnlineStateTracker",e)},t.prototype.Du=function(){null!==this.yu&&(this.yu.cancel(),this.yu=null)},t}(),Xh=function(t,e,n,r,i){var o=this;this.Cu=t,this.Nu=e,this.di=n,this.xu={},this.Fu=[],this.Ou=new Map,this.Mu=new Set,this.ku=[],this.$u=i,this.$u.Lu(function(t){n.Ri(function(){return Object(Gn.b)(o,void 0,void 0,function(){return Object(Gn.d)(this,function(t){switch(t.label){case 0:return of(this)?(ia("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Gn.b)(this,void 0,void 0,function(){var e;return Object(Gn.d)(this,function(n){switch(n.label){case 0:return(e=Aa(t)).Mu.add(4),[4,Yh(e)];case 1:return n.sent(),e.Bu.set("Unknown"),e.Mu.delete(4),[4,Jh(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Bu=new Wh(n,r)};function Jh(t){return Object(Gn.b)(this,void 0,void 0,function(){var e,n;return Object(Gn.d)(this,function(r){switch(r.label){case 0:if(!of(t))return[3,4];e=0,n=t.ku,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Yh(t){return Object(Gn.b)(this,void 0,void 0,function(){var e,n;return Object(Gn.d)(this,function(r){switch(r.label){case 0:e=0,n=t.ku,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function $h(t,e){var n=Aa(t);n.Ou.has(e.targetId)||(n.Ou.set(e.targetId,e),rf(n)?nf(n):bf(n).zc()&&tf(n,e))}function Zh(t,e){var n=Aa(t),r=bf(n);n.Ou.delete(e),r.zc()&&ef(n,e),0===n.Ou.size&&(r.zc()?r.Yc():of(n)&&n.Bu.set("Unknown"))}function tf(t,e){t.qu.De(e.targetId),bf(t).hu(e)}function ef(t,e){t.qu.De(e),bf(t).lu(e)}function nf(t){t.qu=new pu({Xe:function(e){return t.xu.Xe(e)},Ze:function(e){return t.Ou.get(e)||null}}),bf(t).start(),t.Bu.pu()}function rf(t){return of(t)&&!bf(t).Gc()&&t.Ou.size>0}function of(t){return 0===Aa(t).Mu.size}function sf(t){t.qu=void 0}function af(t){return Object(Gn.b)(this,void 0,void 0,function(){return Object(Gn.d)(this,function(e){return t.Ou.forEach(function(e,n){tf(t,e)}),[2]})})}function uf(t,e){return Object(Gn.b)(this,void 0,void 0,function(){return Object(Gn.d)(this,function(n){return sf(t),rf(t)?(t.Bu.Su(e),nf(t)):t.Bu.set("Unknown"),[2]})})}function cf(t,e,n){return Object(Gn.b)(this,void 0,void 0,function(){var r,i,o;return Object(Gn.d)(this,function(s){switch(s.label){case 0:if(t.Bu.set("Online"),!(e instanceof fu&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Gn.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Ou.has(o=i[r])?[4,t.xu.Uu(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Ou.delete(o),t.qu.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),ia("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Af(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof lu?t.qu.$e(e):e instanceof hu?t.qu.je(e):t.qu.qe(e),n.isEqual(Ca.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Hh(t.Cu)];case 8:return i=s.sent(),n.F(i)>=0?[4,function(t,e){var n=t.qu.He(e);return n.re.forEach(function(n,r){if(n.resumeToken.ht()>0){var i=t.Ou.get(r);i&&t.Ou.set(r,i.wt(n.resumeToken,e))}}),n.oe.forEach(function(e){var n=t.Ou.get(e);if(n){t.Ou.set(e,n.wt(Pa.lt,n.ft)),ef(t,e);var r=new Ma(n.target,e,1,n.sequenceNumber);tf(t,r)}}),t.xu.Qu(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return ia("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,Af(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function Af(t,e,n){return Object(Gn.b)(this,void 0,void 0,function(){var r=this;return Object(Gn.d)(this,function(i){switch(i.label){case 0:if(!el(e))throw e;return t.Mu.add(1),[4,Yh(t)];case 1:return i.sent(),t.Bu.set("Offline"),n||(n=function(){return Hh(t.Cu)}),t.di.Mi(function(){return Object(Gn.b)(r,void 0,void 0,function(){return Object(Gn.d)(this,function(e){switch(e.label){case 0:return ia("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Mu.delete(1),[4,Jh(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function lf(t,e){return e().catch(function(n){return Af(t,n,e)})}function hf(t){return Object(Gn.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Gn.d)(this,function(s){switch(s.label){case 0:e=Aa(t),n=wf(e),r=e.Fu.length>0?e.Fu[e.Fu.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return of(t)&&t.Fu.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,xh(e.Cu,r)];case 3:return null===(i=s.sent())?(0===e.Fu.length&&n.Yc(),[3,7]):(r=i.batchId,function(t,e){t.Fu.push(e);var n=wf(t);n.zc()&&n.fu&&n.du(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,Af(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return ff(e)&&df(e),[2]}})})}function ff(t){return of(t)&&!wf(t).Gc()&&t.Fu.length>0}function df(t){wf(t).start()}function pf(t){return Object(Gn.b)(this,void 0,void 0,function(){return Object(Gn.d)(this,function(e){return wf(t).Tu(),[2]})})}function gf(t){return Object(Gn.b)(this,void 0,void 0,function(){var e,n,r;return Object(Gn.d)(this,function(i){for(e=wf(t),n=0,r=t.Fu;n<r.length;n++)e.du(r[n].mutations);return[2]})})}function yf(t,e,n){return Object(Gn.b)(this,void 0,void 0,function(){var r,i;return Object(Gn.d)(this,function(o){switch(o.label){case 0:return r=t.Fu.shift(),i=kA.from(r,e,n),[4,lf(t,function(){return t.xu.Ku(i)})];case 1:return o.sent(),[4,hf(t)];case 2:return o.sent(),[2]}})})}function vf(t,e){return Object(Gn.b)(this,void 0,void 0,function(){return Object(Gn.d)(this,function(n){switch(n.label){case 0:return e&&wf(t).fu?[4,function(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r;return Object(Gn.d)(this,function(i){switch(i.label){case 0:return Ka(r=e.code)&&r!==la.ABORTED?(n=t.Fu.shift(),wf(t).Jc(),[4,lf(t,function(){return t.xu.Wu(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,hf(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return ff(t)&&df(t),[2]}})})}function mf(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n;return Object(Gn.d)(this,function(r){switch(r.label){case 0:return n=Aa(t),e?(n.Mu.delete(2),[4,Jh(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Mu.add(2),[4,Yh(n)]);case 3:r.sent(),n.Bu.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function bf(t){var e=this;return t.ju||(t.ju=function(t,e,n){var r=Aa(t);return r.mu(),new zh(e,r.Qc,r.credentials,r.serializer,n)}(t.Nu,t.di,{cu:af.bind(null,t),nu:uf.bind(null,t),au:cf.bind(null,t)}),t.ku.push(function(n){return Object(Gn.b)(e,void 0,void 0,function(){return Object(Gn.d)(this,function(e){switch(e.label){case 0:return n?(t.ju.Jc(),rf(t)?nf(t):t.Bu.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.ju.stop()];case 2:e.sent(),sf(t),e.label=3;case 3:return[2]}})})})),t.ju}function wf(t){var e=this;return t.Gu||(t.Gu=function(t,e,n){var r=Aa(t);return r.mu(),new Gh(e,r.Qc,r.credentials,r.serializer,n)}(t.Nu,t.di,{cu:pf.bind(null,t),nu:vf.bind(null,t),Eu:gf.bind(null,t),wu:yf.bind(null,t)}),t.ku.push(function(n){return Object(Gn.b)(e,void 0,void 0,function(){return Object(Gn.d)(this,function(e){switch(e.label){case 0:return n?(t.Gu.Jc(),[4,hf(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Gu.stop()];case 3:e.sent(),t.Fu.length>0&&(ia("RemoteStore","Stopping write stream with "+t.Fu.length+" pending writes"),t.Fu=[]),e.label=4;case 4:return[2]}})})})),t.Gu}var _f=function(){this.zu=void 0,this.listeners=[]},Bf=function(){this.queries=new LA(function(t){return vA(t)},yA),this.onlineState="Unknown",this.Hu=new Set};function Cf(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Gn.d)(this,function(c){switch(c.label){case 0:if(n=Aa(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new _f),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.Ju(r)];case 2:return s.zu=c.sent(),[3,4];case 3:return a=c.sent(),u=ll(a,"Initialization of query '"+mA(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.Yu(n.onlineState),o.zu&&e.Xu(o.zu)&&Of(n),[2]}})})}function Ef(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Gn.d)(this,function(a){return n=Aa(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.Zu(r))]:[2]})})}function Qf(t,e){for(var n=Aa(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Xu(s)&&(r=!0);a.zu=s}}r&&Of(n)}function Uf(t,e,n){var r=Aa(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Of(t){t.Hu.forEach(function(t){t.next()})}var If=function(){function t(t,e,n){this.query=t,this.ta=e,this.ea=!1,this.na=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Xu=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new uu(t.query,t.docs,t.te,e,t.ee,t.fromCache,t.ne,!0)}var o=!1;return this.ea?this.sa(t)&&(this.ta.next(t),o=!0):this.ia(t,this.onlineState)&&(this.ra(t),o=!0),this.na=t,o},t.prototype.onError=function(t){this.ta.error(t)},t.prototype.Yu=function(t){this.onlineState=t;var e=!1;return this.na&&!this.ea&&this.ia(this.na,t)&&(this.ra(this.na),e=!0),e},t.prototype.ia=function(t,e){return!t.fromCache||!(this.options.oa&&"Offline"!==e||t.docs.W()&&"Offline"!==e)},t.prototype.sa=function(t){return t.docChanges.length>0||!!(t.ne||this.na&&this.na.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ra=function(t){t=uu.ie(t.query,t.docs,t.ee,t.fromCache),this.ea=!0,this.ta.next(t)},t}(),Tf=function(){function t(){this.ca=new Wa(Ff.ua),this.aa=new Wa(Ff.ha)}return t.prototype.W=function(){return this.ca.W()},t.prototype.Do=function(t,e){var n=new Ff(t,e);this.ca=this.ca.add(n),this.aa=this.aa.add(n)},t.prototype.la=function(t,e){var n=this;t.forEach(function(t){return n.Do(t,e)})},t.prototype.No=function(t,e){this._a(new Ff(t,e))},t.prototype.fa=function(t,e){var n=this;t.forEach(function(t){return n.No(t,e)})},t.prototype.da=function(t){var e=this,n=new Ia(new Qa([])),r=new Ff(n,t),i=new Ff(n,t+1),o=[];return this.aa.Kt([r,i],function(t){e._a(t),o.push(t.key)}),o},t.prototype.wa=function(){var t=this;this.ca.forEach(function(e){return t._a(e)})},t.prototype._a=function(t){this.ca=this.ca.delete(t),this.aa=this.aa.delete(t)},t.prototype.Ea=function(t){var e=new Ia(new Qa([])),n=new Ff(e,t),r=new Ff(e,t+1),i=ru();return this.aa.Kt([n,r],function(t){i=i.add(t.key)}),i},t.prototype.Qr=function(t){var e=new Ff(t,0),n=this.ca.jt(e);return null!==n&&t.isEqual(n.key)},t}(),Ff=function(){function t(t,e){this.key=t,this.Ta=e}return t.ua=function(t,e){return Ia.$(t.key,e.key)||ba(t.Ta,e.Ta)},t.ha=function(t,e){return ba(t.Ta,e.Ta)||Ia.$(t.key,e.key)},t}();function Nf(t,e){return"firestore_clients_"+t+"_"+e}function Sf(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.u()&&(r+="_"+e.uid),r}function Hf(t,e){return"firestore_targets_"+t+"_"+e}var Rf=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Ia=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),s=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(s=new ha(i.error.code,i.error.message)),o?new t(e,n,i.state,s):(oa("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.ma=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),xf=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Ia=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new ha(r.error.code,r.error.message)),i?new t(e,r.state,o):(oa("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.ma=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Df=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Ia=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ou(),s=0;i&&s<r.activeTargetIds.length;++s)i=Na(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(oa("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Pf=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Ia=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(oa("SharedClientState","Failed to parse online state: "+e),null)},t}(),kf=function(){function t(){this.activeTargetIds=ou()}return t.prototype.Aa=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Ra=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.ma=function(){var t={activeTargetIds:this.activeTargetIds.H(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Lf=function(){function t(t,e,n,r,i){this.window=t,this.Cs=e,this.persistenceKey=n,this.Pa=r,this.ga=null,this.Pu=null,this.ps=null,this.ya=this.Va.bind(this),this.pa=new za(ba),this.lr=!1,this.va=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ba=Nf(this.persistenceKey,this.Pa),this.Sa=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.pa=this.pa.Tt(this.Pa,new kf),this.Da=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Ca=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Na=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.xa=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Fa=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.ya)}return t.Gs=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Gn.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,A=this;return Object(Gn.d)(this,function(l){switch(l.label){case 0:return[4,this.ga.Ic()];case 1:for(t=l.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Pa&&(i=this.getItem(Nf(this.persistenceKey,r)))&&(o=Df.Ia(r,i))&&(this.pa=this.pa.Tt(o.clientId,o));for(this.Oa(),(s=this.storage.getItem(this.xa))&&(a=this.Ma(s))&&this.ka(a),u=0,c=this.va;u<c.length;u++)this.Va(c[u]);return this.va=[],this.window.addEventListener("unload",function(){return A.fc()}),this.lr=!0,[2]}})})},t.prototype.Ss=function(t){this.setItem(this.Sa,JSON.stringify(t))},t.prototype.$a=function(){return this.La(this.pa)},t.prototype.Ba=function(t){var e=!1;return this.pa.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.qa=function(t){this.Ua(t,"pending")},t.prototype.Qa=function(t,e,n){this.Ua(t,e,n),this.Ka(t)},t.prototype.Wa=function(t){var e="not-current";if(this.Ba(t)){var n=this.storage.getItem(Hf(this.persistenceKey,t));if(n){var r=xf.Ia(t,n);r&&(e=r.state)}}return this.ja.Aa(t),this.Oa(),e},t.prototype.Ga=function(t){this.ja.Ra(t),this.Oa()},t.prototype.za=function(t){return this.ja.activeTargetIds.has(t)},t.prototype.Ha=function(t){this.removeItem(Hf(this.persistenceKey,t))},t.prototype.Ja=function(t,e,n){this.Ya(t,e,n)},t.prototype.Xa=function(t,e,n){var r=this;e.forEach(function(t){r.Ka(t)}),this.currentUser=t,n.forEach(function(t){r.qa(t)})},t.prototype.Za=function(t){this.th(t)},t.prototype.eh=function(){this.nh()},t.prototype.fc=function(){this.lr&&(this.window.removeEventListener("storage",this.ya),this.removeItem(this.ba),this.lr=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return ia("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){ia("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){ia("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Va=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(ia("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ba)return void oa("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Cs.Mi(function(){return Object(Gn.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Gn.d)(this,function(a){if(this.lr){if(null!==n.key)if(this.Da.test(n.key)){if(null==n.newValue)return t=this.sh(n.key),[2,this.ih(t,null)];if(e=this.rh(n.key,n.newValue))return[2,this.ih(e.clientId,e)]}else if(this.Ca.test(n.key)){if(null!==n.newValue&&(r=this.oh(n.key,n.newValue)))return[2,this.uh(r)]}else if(this.Na.test(n.key)){if(null!==n.newValue&&(i=this.ah(n.key,n.newValue)))return[2,this.hh(i)]}else if(n.key===this.xa){if(null!==n.newValue&&(o=this.Ma(n.newValue)))return[2,this.ka(o)]}else if(n.key===this.Sa)(s=function(t){var e=JA.Ds;if(null!=t)try{var n=JSON.parse(t);ca("number"==typeof n),e=n}catch(t){oa("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==JA.Ds&&this.ps(s);else if(n.key===this.Fa)return[2,this.ga.lh()]}else this.va.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"ja",{get:function(){return this.pa.get(this.Pa)},enumerable:!1,configurable:!0}),t.prototype.Oa=function(){this.setItem(this.ba,this.ja.ma())},t.prototype.Ua=function(t,e,n){var r=new Rf(this.currentUser,t,e,n),i=Sf(this.persistenceKey,this.currentUser,t);this.setItem(i,r.ma())},t.prototype.Ka=function(t){var e=Sf(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.th=function(t){this.storage.setItem(this.xa,JSON.stringify({clientId:this.Pa,onlineState:t}))},t.prototype.Ya=function(t,e,n){var r=Hf(this.persistenceKey,t),i=new xf(t,e,n);this.setItem(r,i.ma())},t.prototype.nh=function(){this.setItem(this.Fa,"value-not-used")},t.prototype.sh=function(t){var e=this.Da.exec(t);return e?e[1]:null},t.prototype.rh=function(t,e){var n=this.sh(t);return Df.Ia(n,e)},t.prototype.oh=function(t,e){var n=this.Ca.exec(t),r=Number(n[1]);return Rf.Ia(new ea(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ah=function(t,e){var n=this.Na.exec(t),r=Number(n[1]);return xf.Ia(r,e)},t.prototype.Ma=function(t){return Pf.Ia(t)},t.prototype.uh=function(t){return Object(Gn.b)(this,void 0,void 0,function(){return Object(Gn.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.ga._h(t.batchId,t.state,t.error)]:(ia("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.hh=function(t){return this.ga.fh(t.targetId,t.state,t.error)},t.prototype.ih=function(t,e){var n=this,r=e?this.pa.Tt(t,e):this.pa.remove(t),i=this.La(this.pa),o=this.La(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.ga.dh(s,a).then(function(){n.pa=r})},t.prototype.ka=function(t){this.pa.get(t.clientId)&&this.Pu(t.onlineState)},t.prototype.La=function(t){var e=ou();return t.forEach(function(t,n){e=e.Gt(n.activeTargetIds)}),e},t}(),Mf=function(){function t(){this.wh=new kf,this.Eh={},this.Pu=null,this.ps=null}return t.prototype.qa=function(t){},t.prototype.Qa=function(t,e,n){},t.prototype.Wa=function(t){return this.wh.Aa(t),this.Eh[t]||"not-current"},t.prototype.Ja=function(t,e,n){this.Eh[t]=e},t.prototype.Ga=function(t){this.wh.Ra(t)},t.prototype.za=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.Ha=function(t){delete this.Eh[t]},t.prototype.$a=function(){return this.wh.activeTargetIds},t.prototype.Ba=function(t){return this.wh.activeTargetIds.has(t)},t.prototype.start=function(){return this.wh=new kf,Promise.resolve()},t.prototype.Xa=function(t,e,n){},t.prototype.Za=function(t){},t.prototype.fc=function(){},t.prototype.Ss=function(t){},t.prototype.eh=function(){},t}(),jf=function(t){this.key=t},Kf=function(t){this.key=t},Vf=function(){function t(t,e){this.query=t,this.Th=e,this.Ih=null,this.le=!1,this.mh=ru(),this.ee=ru(),this.Ah=wA(t),this.Rh=new su(this.Ah)}return Object.defineProperty(t.prototype,"Ph",{get:function(){return this.Th},enumerable:!1,configurable:!0}),t.prototype.gh=function(t,e){var n=this,r=e?e.yh:new au,i=e?e.Rh:this.Rh,o=e?e.ee:this.ee,s=i,a=!1,u=cA(this.query)&&i.size===this.query.limit?i.last():null,c=AA(this.query)&&i.size===this.query.limit?i.first():null;if(t.Pt(function(t,e){var A=i.get(t),l=e instanceof rA?e:null;l&&(l=bA(n.query,l)?l:null);var h=!!A&&n.ee.has(A.key),f=!!l&&(l.an||n.ee.has(l.key)&&l.hasCommittedMutations),d=!1;A&&l?A.data().isEqual(l.data())?h!==f&&(r.track({type:3,doc:l}),d=!0):n.Vh(A,l)||(r.track({type:2,doc:l}),d=!0,(u&&n.Ah(l,u)>0||c&&n.Ah(l,c)<0)&&(a=!0)):!A&&l?(r.track({type:0,doc:l}),d=!0):A&&!l&&(r.track({type:1,doc:A}),d=!0,(u||c)&&(a=!0)),d&&(l?(s=s.add(l),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),cA(this.query)||AA(this.query))for(;s.size>this.query.limit;){var A=cA(this.query)?s.last():s.first();s=s.delete(A.key),o=o.delete(A.key),r.track({type:1,doc:A})}return{Rh:s,yh:r,ph:a,ee:o}},t.prototype.Vh=function(t,e){return t.an&&e.hasCommittedMutations&&!e.an},t.prototype.Zn=function(t,e,n){var r=this,i=this.Rh;this.Rh=t.Rh,this.ee=t.ee;var o=t.yh.Zt();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ua()}};return n(t)-n(e)}(t.type,e.type)||r.Ah(t.doc,e.doc)}),this.bh(n);var s=e?this.Sh():[],a=0===this.mh.size&&this.le?1:0,u=a!==this.Ih;return this.Ih=a,0!==o.length||u?{snapshot:new uu(this.query,t.Rh,i,o,t.ee,0===a,u,!1),Dh:s}:{Dh:s}},t.prototype.Yu=function(t){return this.le&&"Offline"===t?(this.le=!1,this.Zn({Rh:this.Rh,yh:new au,ee:this.ee,ph:!1},!1)):{Dh:[]}},t.prototype.Ch=function(t){return!this.Th.has(t)&&!!this.Rh.has(t)&&!this.Rh.get(t).an},t.prototype.bh=function(t){var e=this;t&&(t._e.forEach(function(t){return e.Th=e.Th.add(t)}),t.fe.forEach(function(t){}),t.de.forEach(function(t){return e.Th=e.Th.delete(t)}),this.le=t.le)},t.prototype.Sh=function(){var t=this;if(!this.le)return[];var e=this.mh;this.mh=ru(),this.Rh.forEach(function(e){t.Ch(e.key)&&(t.mh=t.mh.add(e.key))});var n=[];return e.forEach(function(e){t.mh.has(e)||n.push(new Kf(e))}),this.mh.forEach(function(t){e.has(t)||n.push(new jf(t))}),n},t.prototype.Nh=function(t){this.Th=t.Bc,this.mh=ru();var e=this.gh(t.documents);return this.Zn(e,!0)},t.prototype.xh=function(){return uu.ie(this.query,this.Rh,this.ee,0===this.Ih)},t}(),zf=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Gf=function(t){this.key=t,this.Fh=!1},qf=function(){function t(t,e,n,r,i,o){this.Cu=t,this.Oh=e,this.Mh=n,this.kh=r,this.currentUser=i,this.$h=o,this.Lh={},this.Bh=new LA(function(t){return vA(t)},yA),this.qh=new Map,this.Uh=[],this.Qh=new za(Ia.$),this.Kh=new Map,this.Wh=new Tf,this.jh={},this.Gh=new Map,this.zh=yh._o(),this.onlineState="Unknown",this.Hh=void 0}return Object.defineProperty(t.prototype,"Jh",{get:function(){return!0===this.Hh},enumerable:!1,configurable:!0}),t}();function Wf(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Gn.d)(this,function(a){switch(a.label){case 0:return n=Bd(t),(i=n.Bh.get(e))?(n.kh.Wa(i.targetId),r=i.view.xh(),[3,4]):[3,1];case 1:return[4,Dh(n.Cu,pA(e))];case 2:return o=a.sent(),s=n.kh.Wa(o.targetId),[4,Xf(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.Jh&&$h(n.Oh,o),a.label=4;case 4:return[2,r]}})})}function Xf(t,e,n,r){return Object(Gn.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Gn.d)(this,function(A){switch(A.label){case 0:return t.Yh=function(e,n,r){return function(t,e,n,r){return Object(Gn.b)(this,void 0,void 0,function(){var i,o,s;return Object(Gn.d)(this,function(a){switch(a.label){case 0:return(i=e.view.gh(n)).ph?[4,kh(t.Cu,e.query,!1).then(function(t){return e.view.gh(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.re.get(e.targetId),s=e.view.Zn(i,t.Jh,o),[2,(ud(t,e.targetId,s.Dh),s.snapshot)]}})})}(t,e,n,r)},[4,kh(t.Cu,e,!0)];case 1:return i=A.sent(),o=new Vf(e,i.Bc),s=o.gh(i.documents),a=Au.he(n,r&&"Offline"!==t.onlineState),u=o.Zn(s,t.Jh,a),ud(t,n,u.Dh),c=new zf(e,n,o),[2,(t.Bh.set(e,c),t.qh.has(n)?t.qh.get(n).push(e):t.qh.set(n,[e]),u.snapshot)]}})})}function Jf(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r,i;return Object(Gn.d)(this,function(o){switch(o.label){case 0:return n=Aa(t),r=n.Bh.get(e),(i=n.qh.get(r.targetId)).length>1?[2,(n.qh.set(r.targetId,i.filter(function(t){return!yA(t,e)})),void n.Bh.delete(e))]:n.Jh?(n.kh.Ga(r.targetId),n.kh.Ba(r.targetId)?[3,2]:[4,Ph(n.Cu,r.targetId,!1).then(function(){n.kh.Ha(r.targetId),Zh(n.Oh,r.targetId),sd(n,r.targetId)}).catch(Kh)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return sd(n,r.targetId),[4,Ph(n.Cu,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Yf(t,e,n){return Object(Gn.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Gn.d)(this,function(a){switch(a.label){case 0:r=Cd(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Aa(t),i=Ba.now(),o=e.reduce(function(t,e){return t.add(e.key)},ru());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Oc._s(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],A=jc(c,n.get(c.key));null!=A&&s.push(new Gc(c.key,A,eA(A.proto.mapValue),Dc.exists(!0)))}return r.rs.Sr(t,i,s,e)})}).then(function(t){var e=t.vn(n);return{batchId:t.batchId,Qn:e}})}(r.Cu,e)];case 2:return i=a.sent(),r.kh.qa(i.batchId),function(t,e,n){var r=t.jh[t.currentUser.h()];r||(r=new za(ba)),r=r.Tt(e,n),t.jh[t.currentUser.h()]=r}(r,i.batchId,n),[4,ld(r,i.Qn)];case 3:return a.sent(),[4,hf(r.Oh)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=ll(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function $f(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r;return Object(Gn.d)(this,function(i){switch(i.label){case 0:n=Aa(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Rh(n.Cu,e)];case 2:return r=i.sent(),e.re.forEach(function(t,e){var r=n.Kh.get(e);r&&(ca(t._e.size+t.fe.size+t.de.size<=1),t._e.size>0?r.Fh=!0:t.fe.size>0?ca(r.Fh):t.de.size>0&&(ca(r.Fh),r.Fh=!1))}),[4,ld(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Kh(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Zf(t,e,n){var r=Aa(t);if(r.Jh&&0===n||!r.Jh&&1===n){var i=[];r.Bh.forEach(function(t,n){var r=n.view.Yu(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Aa(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].Yu(e)&&(r=!0)}),r&&Of(n)}(r.Mh,e),i.length&&r.Lh.au(i),r.onlineState=e,r.Jh&&r.kh.Za(e)}}function td(t,e,n){return Object(Gn.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Gn.d)(this,function(c){switch(c.label){case 0:return(r=Aa(t)).kh.Ja(e,"rejected",n),i=r.Kh.get(e),(o=i&&i.key)?(s=(s=new za(Ia.$)).Tt(o,new iA(o,Ca.min())),a=ru().add(o),u=new cu(Ca.min(),new Map,new Wa(ba),s,a),[4,$f(r,u)]):[3,2];case 1:return c.sent(),r.Qh=r.Qh.remove(o),r.Kh.delete(e),Ad(r),[3,4];case 2:return[4,Ph(r.Cu,e,!1).then(function(){return sd(r,e,n)}).catch(Kh)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function ed(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r,i;return Object(Gn.d)(this,function(o){switch(o.label){case 0:n=Aa(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Sh(n.Cu,e)];case 2:return i=o.sent(),od(n,r,null),id(n,r),n.kh.Qa(r,"acknowledged"),[4,ld(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Kh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function nd(t,e,n){return Object(Gn.b)(this,void 0,void 0,function(){var r,i;return Object(Gn.d)(this,function(o){switch(o.label){case 0:r=Aa(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Aa(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.rs.Cr(t,e).next(function(e){return ca(null!==e),r=e.keys(),n.rs.$r(t,e)}).next(function(){return n.rs.Ur(t)}).next(function(){return n.Oc._s(t,r)})})}(r.Cu,e)];case 2:return i=o.sent(),od(r,e,n),id(r,e),r.kh.Qa(e,"rejected",n),[4,ld(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Kh(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function rd(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Gn.d)(this,function(a){switch(a.label){case 0:of((n=Aa(t)).Oh)||ia("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Aa(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.rs.Or(t)})}(n.Cu)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Gh.get(r)||[]).push(e),n.Gh.set(r,i),[3,4]);case 3:return o=a.sent(),s=ll(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function id(t,e){(t.Gh.get(e)||[]).forEach(function(t){t.resolve()}),t.Gh.delete(e)}function od(t,e,n){var r=Aa(t),i=r.jh[r.currentUser.h()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.jh[r.currentUser.h()]=i}}function sd(t,e,n){void 0===n&&(n=null),t.kh.Ga(e);for(var r=0,i=t.qh.get(e);r<i.length;r++){var o=i[r];t.Bh.delete(o),n&&t.Lh.Xh(o,n)}t.qh.delete(e),t.Jh&&t.Wh.da(e).forEach(function(e){t.Wh.Qr(e)||ad(t,e)})}function ad(t,e){var n=t.Qh.get(e);null!==n&&(Zh(t.Oh,n),t.Qh=t.Qh.remove(e),t.Kh.delete(n),Ad(t))}function ud(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof jf?(t.Wh.Do(o.key,e),cd(t,o)):o instanceof Kf?(ia("SyncEngine","Document no longer in limbo: "+o.key),t.Wh.No(o.key,e),t.Wh.Qr(o.key)||ad(t,o.key)):ua()}}function cd(t,e){var n=e.key;t.Qh.get(n)||(ia("SyncEngine","New document in limbo: "+n),t.Uh.push(n),Ad(t))}function Ad(t){for(;t.Uh.length>0&&t.Qh.size<t.$h;){var e=t.Uh.shift(),n=t.zh.next();t.Kh.set(n,new Gf(e)),t.Qh=t.Qh.Tt(e,n),$h(t.Oh,new Ma(pA(uA(e.path)),n,2,JA.Ds))}}function ld(t,e,n){return Object(Gn.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Gn.d)(this,function(a){switch(a.label){case 0:return r=Aa(t),i=[],o=[],s=[],r.Bh.W()?[3,3]:(r.Bh.forEach(function(t,a){s.push(r.Yh(a,e,n).then(function(t){if(t){r.Jh&&r.kh.Ja(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=XA.Vs(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.Lh.au(i),[4,function(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Gn.d)(this,function(A){switch(A.label){case 0:n=Aa(t),A.label=1;case 1:return A.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return MA.forEach(e,function(e){return MA.forEach(e.gs,function(r){return n.persistence.Vr.Do(t,e.targetId,r)}).next(function(){return MA.forEach(e.ys,function(r){return n.persistence.Vr.No(t,e.targetId,r)})})})})];case 2:return A.sent(),[3,4];case 3:if(!el(r=A.sent()))throw r;return ia("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Cc.get(a),c=u.Et(u.ft),n.Cc=n.Cc.Tt(a,c));return[2]}})})}(r.Cu,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function hd(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r;return Object(Gn.d)(this,function(i){switch(i.label){case 0:return(n=Aa(t)).currentUser.isEqual(e)?[3,3]:(ia("SyncEngine","User change. New user:",e.h()),[4,Nh(n.Cu,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Gh.forEach(function(t){t.forEach(function(t){t.reject(new ha(la.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Gh.clear()}(n),n.kh.Xa(e,r.$c,r.Lc),[4,ld(n,r.kc)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function fd(t,e){var n=Aa(t),r=n.Kh.get(e);if(r&&r.Fh)return ru().add(r.key);var i=ru(),o=n.qh.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Bh.get(a[s]);i=i.Gt(u.view.Ph)}return i}function dd(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r,i;return Object(Gn.d)(this,function(o){switch(o.label){case 0:return[4,kh((n=Aa(t)).Cu,e.query,!0)];case 1:return r=o.sent(),i=e.view.Nh(r),[2,(n.Jh&&ud(n,e.targetId,i.Dh),i)]}})})}function pd(t){return Object(Gn.b)(this,void 0,void 0,function(){var e;return Object(Gn.d)(this,function(n){return[2,Mh((e=Aa(t)).Cu).then(function(t){return ld(e,t)})]})})}function gd(t,e,n,r){return Object(Gn.b)(this,void 0,void 0,function(){var i,o;return Object(Gn.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Aa(t),r=Aa(n.rs);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Nr(t,e).next(function(e){return e?n.Oc._s(t,e):MA.resolve(null)})})}((i=Aa(t)).Cu,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,hf(i.Oh)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(od(i,e,r||null),id(i,e),function(t,e){Aa(Aa(t).rs).Br(e)}(i.Cu,e)):ua(),s.label=4;case 4:return[4,ld(i,o)];case 5:return s.sent(),[3,7];case 6:ia("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function yd(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Gn.d)(this,function(c){switch(c.label){case 0:return Bd(n=Aa(t)),Cd(n),!0!==e||!0===n.Hh?[3,3]:(r=n.kh.$a(),[4,vd(n,r.H())]);case 1:return i=c.sent(),n.Hh=!0,[4,mf(n.Oh,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)$h(n.Oh,s[o]);return[3,7];case 3:return!1!==e||!1===n.Hh?[3,7]:(a=[],u=Promise.resolve(),n.qh.forEach(function(t,e){n.kh.za(e)?a.push(e):u=u.then(function(){return sd(n,e),Ph(n.Cu,e,!0)}),Zh(n.Oh,e)}),[4,u]);case 4:return c.sent(),[4,vd(n,a)];case 5:return c.sent(),function(t){var e=Aa(t);e.Kh.forEach(function(t,n){Zh(e.Oh,n)}),e.Wh.wa(),e.Kh=new Map,e.Qh=new za(Ia.$)}(n),n.Hh=!1,[4,mf(n.Oh,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function vd(t,e,n){return Object(Gn.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,A,l,h,f,d;return Object(Gn.d)(this,function(p){switch(p.label){case 0:n=Aa(t),r=[],i=[],o=0,s=e,p.label=1;case 1:return o<s.length?(u=void 0,(c=n.qh.get(a=s[o]))&&0!==c.length?[4,Dh(n.Cu,pA(c[0]))]:[3,7]):[3,13];case 2:u=p.sent(),A=0,l=c,p.label=3;case 3:return A<l.length?(h=n.Bh.get(l[A]),[4,dd(n,h)]):[3,6];case 4:(f=p.sent()).snapshot&&i.push(f.snapshot),p.label=5;case 5:return A++,[3,3];case 6:return[3,11];case 7:return[4,Lh(n.Cu,a)];case 8:return d=p.sent(),[4,Dh(n.Cu,d)];case 9:return u=p.sent(),[4,Xf(n,md(d),a,!1)];case 10:p.sent(),p.label=11;case 11:r.push(u),p.label=12;case 12:return o++,[3,1];case 13:return[2,(n.Lh.au(i),r)]}})})}function md(t){return aA(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function bd(t){var e=Aa(t);return Aa(Aa(e.Cu).persistence).Ic()}function wd(t,e,n,r){return Object(Gn.b)(this,void 0,void 0,function(){var i,o,s;return Object(Gn.d)(this,function(a){switch(a.label){case 0:return(i=Aa(t)).Hh?(ia("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.qh.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Mh(i.Cu)];case 3:return o=a.sent(),s=cu.ae(e,"current"===n),[4,ld(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,Ph(i.Cu,e,!0)];case 6:return a.sent(),sd(i,e,r),[3,8];case 7:ua(),a.label=8;case 8:return[2]}})})}function _d(t,e,n){return Object(Gn.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,A,l;return Object(Gn.d)(this,function(h){switch(h.label){case 0:if(!(r=Bd(t)).Hh)return[3,10];i=0,o=e,h.label=1;case 1:return i<o.length?r.qh.has(s=o[i])?(ia("SyncEngine","Adding an already active target "+s),[3,5]):[4,Lh(r.Cu,s)]:[3,6];case 2:return a=h.sent(),[4,Dh(r.Cu,a)];case 3:return u=h.sent(),[4,Xf(r,md(a),u.targetId,!1)];case 4:h.sent(),$h(r.Oh,u),h.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Gn.d)(this,function(e){switch(e.label){case 0:return r.qh.has(t)?[4,Ph(r.Cu,t,!1).then(function(){Zh(r.Oh,t),sd(r,t)}).catch(Kh)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},A=0,l=n,h.label=7;case 7:return A<l.length?[5,c(l[A])]:[3,10];case 8:h.sent(),h.label=9;case 9:return A++,[3,7];case 10:return[2]}})})}function Bd(t){var e=Aa(t);return e.Oh.xu.Qu=$f.bind(null,e),e.Oh.xu.Xe=fd.bind(null,e),e.Oh.xu.Uu=td.bind(null,e),e.Lh.au=Qf.bind(null,e.Mh),e.Lh.Xh=Uf.bind(null,e.Mh),e}function Cd(t){var e=Aa(t);return e.Oh.xu.Ku=ed.bind(null,e),e.Oh.xu.Wu=nd.bind(null,e),e}var Ed=function(){function t(){}return t.prototype.Mc=function(t){this.Zh=t},t.prototype.ws=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.Tn.length||1===t.Tn.length&&t.Tn[0].field.tt())}(e)||n.isEqual(Ca.min())?this.tl(t,e):this.Zh._s(t,r).next(function(o){var s=i.el(e,o);return(cA(e)||AA(e))&&i.ph(e.limitType,s,r,n)?i.tl(t,e):(ra()<=Wn.a.DEBUG&&ia("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),mA(e)),i.Zh.ws(t,e,n).next(function(t){return s.forEach(function(e){t=t.Tt(e.key,e)}),t}))})},t.prototype.el=function(t,e){var n=new Wa(wA(t));return e.forEach(function(e,r){r instanceof rA&&bA(t,r)&&(n=n.add(r))}),n},t.prototype.ph=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.F(r)>0)},t.prototype.tl=function(t,e){return ra()<=Wn.a.DEBUG&&ia("IndexFreeQueryEngine","Using full collection scan to execute query:",mA(e)),this.Zh.ws(t,e,Ca.min())},t}(),Qd=function(){function t(t,e){this.os=t,this.Vr=e,this.rs=[],this.nl=1,this.sl=new Wa(Ff.ua)}return t.prototype.br=function(t){return MA.resolve(0===this.rs.length)},t.prototype.Sr=function(t,e,n,r){var i=this.nl;this.nl++;var o=new PA(i,e,n,r);this.rs.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.sl=this.sl.add(new Ff(u.key,i)),this.os.Dr(t,u.key.path.q())}return MA.resolve(o)},t.prototype.Cr=function(t,e){return MA.resolve(this.il(e))},t.prototype.Fr=function(t,e){var n=this.rl(e+1),r=n<0?0:n;return MA.resolve(this.rs.length>r?this.rs[r]:null)},t.prototype.Or=function(){return MA.resolve(0===this.rs.length?-1:this.nl-1)},t.prototype.Mr=function(t){return MA.resolve(this.rs.slice())},t.prototype.us=function(t,e){var n=this,r=new Ff(e,0),i=new Ff(e,Number.POSITIVE_INFINITY),o=[];return this.sl.Kt([r,i],function(t){var e=n.il(t.Ta);o.push(e)}),MA.resolve(o)},t.prototype.ds=function(t,e){var n=this,r=new Wa(ba);return e.forEach(function(t){var e=new Ff(t,0),i=new Ff(t,Number.POSITIVE_INFINITY);n.sl.Kt([e,i],function(t){r=r.add(t.Ta)})}),MA.resolve(this.ol(r))},t.prototype.Rs=function(t,e){var n=e.path,r=n.length+1,i=n;Ia.ot(i)||(i=i.child(""));var o=new Ff(new Ia(i),0),s=new Wa(ba);return this.sl.Wt(function(t){var e=t.key.path;return!!n.j(e)&&(e.length===r&&(s=s.add(t.Ta)),!0)},o),MA.resolve(this.ol(s))},t.prototype.ol=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.il(t);null!==r&&n.push(r)}),n},t.prototype.$r=function(t,e){var n=this;ca(0===this.cl(e.batchId,"removed")),this.rs.shift();var r=this.sl;return MA.forEach(e.mutations,function(i){var o=new Ff(i.key,e.batchId);return r=r.delete(o),n.Vr.qr(t,i.key)}).next(function(){n.sl=r})},t.prototype.Br=function(t){},t.prototype.Qr=function(t,e){var n=new Ff(e,0),r=this.sl.jt(n);return MA.resolve(e.isEqual(r&&r.key))},t.prototype.Ur=function(t){return MA.resolve()},t.prototype.cl=function(t,e){return this.rl(t)},t.prototype.rl=function(t){return 0===this.rs.length?0:t-this.rs[0].batchId},t.prototype.il=function(t){var e=this.rl(t);return e<0||e>=this.rs.length?null:this.rs[e]},t}(),Ud=function(){function t(t,e){this.os=t,this.ul=e,this.docs=new za(Ia.$),this.size=0}return t.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ul(e);return this.docs=this.docs.Tt(r,{zn:e,size:s,readTime:n}),this.size+=s-o,this.os.Dr(t,r.path.q())},t.prototype.Hn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.Jn=function(t,e){var n=this.docs.get(e);return MA.resolve(n?n.zn:null)},t.prototype.getEntries=function(t,e){var n=this,r=$a();return e.forEach(function(t){var e=n.docs.get(t);r=r.Tt(t,e?e.zn:null)}),MA.resolve(r)},t.prototype.ws=function(t,e,n){for(var r=tu(),i=new Ia(e.path.child("")),o=this.docs.Vt(i);o.Nt();){var s=o.Ct(),a=s.value,u=a.zn,c=a.readTime;if(!e.path.j(s.key.path))break;c.F(n)<=0||u instanceof rA&&bA(e,u)&&(r=r.Tt(u.key,u))}return MA.resolve(r)},t.prototype.al=function(t,e){return MA.forEach(this.docs,function(t){return e(t)})},t.prototype.Xr=function(t){return new Od(this)},t.prototype.eo=function(t){return MA.resolve(this.size)},t}(),Od=function(t){function e(e){var n=this;return(n=t.call(this)||this).no=e,n}return Object(Gn.c)(e,t),e.prototype.Zn=function(t){var e=this,n=[];return this.Qn.forEach(function(r,i){i&&i.zn?n.push(e.no.jn(t,i.zn,e.Wn(r))):e.no.Hn(r)}),MA.qn(n)},e.prototype.Yn=function(t,e){return this.no.Jn(t,e)},e.prototype.Xn=function(t,e){return this.no.getEntries(t,e)},e}(jA),Id=function(){function t(t){this.persistence=t,this.hl=new LA(function(t){return Ra(t)},xa),this.lastRemoteSnapshotVersion=Ca.min(),this.highestTargetId=0,this.ll=0,this._l=new Tf,this.targetCount=0,this.fl=yh.lo()}return t.prototype.Ue=function(t,e){return this.hl.forEach(function(t,n){return e(n)}),MA.resolve()},t.prototype.To=function(t){return MA.resolve(this.lastRemoteSnapshotVersion)},t.prototype.Io=function(t){return MA.resolve(this.ll)},t.prototype.fo=function(t){return this.highestTargetId=this.fl.next(),MA.resolve(this.highestTargetId)},t.prototype.mo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),MA.resolve()},t.prototype.Ro=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new yh(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},t.prototype.Ao=function(t,e){return this.Ro(e),this.targetCount+=1,MA.resolve()},t.prototype.yo=function(t,e){return this.Ro(e),MA.resolve()},t.prototype.Vo=function(t,e){return this.hl.delete(e.target),this._l.da(e.targetId),this.targetCount-=1,MA.resolve()},t.prototype.mr=function(t,e,n){var r=this,i=0,o=[];return this.hl.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.hl.delete(s),o.push(r.po(t,a.targetId)),i++)}),MA.qn(o).next(function(){return i})},t.prototype.vo=function(t){return MA.resolve(this.targetCount)},t.prototype.bo=function(t,e){var n=this.hl.get(e)||null;return MA.resolve(n)},t.prototype.So=function(t,e,n){return this._l.la(e,n),MA.resolve()},t.prototype.Co=function(t,e,n){this._l.fa(e,n);var r=this.persistence.Vr,i=[];return r&&e.forEach(function(e){i.push(r.qr(t,e))}),MA.qn(i)},t.prototype.po=function(t,e){return this._l.da(e),MA.resolve()},t.prototype.xo=function(t,e){var n=this._l.Ea(e);return MA.resolve(n)},t.prototype.Qr=function(t,e){return MA.resolve(this._l.Qr(e))},t}(),Td=function(){function t(t){this.serializer=t,this.dl=new Map,this.wl=new Map}return t.prototype.ro=function(t,e){return MA.resolve(this.dl.get(e))},t.prototype.oo=function(t,e){var n;return this.dl.set(e.id,{id:(n=e).id,version:n.version,createTime:Ju(n.createTime)}),MA.resolve()},t.prototype.co=function(t,e){return MA.resolve(this.wl.get(e))},t.prototype.uo=function(t,e){var n;return this.wl.set(e.name,{name:(n=e).name,query:Nl(n.bundledQuery),readTime:Ju(n.readTime)}),MA.resolve()},t}(),Fd=function(){function t(t,e){var n=this;this.El={},this.ko=new JA(0),this.$o=!1,this.$o=!0,this.Vr=t(this),this.jo=new Id(this),this.os=new zl,this.ss=function(t,e){return new Ud(t,function(t){return n.Vr.Tl(t)})}(this.os),this.serializer=new _l(e),this.Go=new Td(this.serializer)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.fc=function(){return this.$o=!1,Promise.resolve()},Object.defineProperty(t.prototype,"lr",{get:function(){return this.$o},enumerable:!1,configurable:!0}),t.prototype.tc=function(){},t.prototype.ec=function(){},t.prototype.Pc=function(){return this.os},t.prototype.mc=function(t){var e=this.El[t.h()];return e||(e=new Qd(this.os,this.Vr),this.El[t.h()]=e),e},t.prototype.Ac=function(){return this.jo},t.prototype.Rc=function(){return this.ss},t.prototype.gc=function(){return this.Go},t.prototype.runTransaction=function(t,e,n){var r=this;ia("MemoryPersistence","Starting transaction:",t);var i=new Nd(this.ko.next());return this.Vr.Il(),n(i).next(function(t){return r.Vr.ml(i).next(function(){return t})}).Ln().then(function(t){return i.ns(),t})},t.prototype.Al=function(t,e){return MA.Un(Object.values(this.El).map(function(n){return function(){return n.Qr(t,e)}}))},t}(),Nd=function(t){function e(e){var n=this;return(n=t.call(this)||this).Fo=e,n}return Object(Gn.c)(e,t),e}(qA),Sd=function(){function t(t){this.persistence=t,this.Rl=new Tf,this.Pl=null}return t.gl=function(e){return new t(e)},Object.defineProperty(t.prototype,"yl",{get:function(){if(this.Pl)return this.Pl;throw ua()},enumerable:!1,configurable:!0}),t.prototype.Do=function(t,e,n){return this.Rl.Do(n,e),this.yl.delete(n.toString()),MA.resolve()},t.prototype.No=function(t,e,n){return this.Rl.No(n,e),this.yl.add(n.toString()),MA.resolve()},t.prototype.qr=function(t,e){return this.yl.add(e.toString()),MA.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Rl.da(e.targetId).forEach(function(t){return n.yl.add(t.toString())});var r=this.persistence.Ac();return r.xo(t,e.targetId).next(function(t){t.forEach(function(t){return n.yl.add(t.toString())})}).next(function(){return r.Vo(t,e)})},t.prototype.Il=function(){this.Pl=new Set},t.prototype.ml=function(t){var e=this,n=this.persistence.Rc().Xr();return MA.forEach(this.yl,function(r){var i=Ia.st(r);return e.Vl(t,i).next(function(t){t||n.Hn(i)})}).next(function(){return e.Pl=null,n.apply(t)})},t.prototype.Sc=function(t,e){var n=this;return this.Vl(t,e).next(function(t){t?n.yl.delete(e.toString()):n.yl.add(e.toString())})},t.prototype.Tl=function(t){return 0},t.prototype.Vl=function(t,e){var n=this;return MA.Un([function(){return MA.resolve(n.Rl.Qr(e))},function(){return n.persistence.Ac().Qr(t,e)},function(){return n.persistence.Al(t,e)}])},t}(),Hd=function(){function t(t){this.pl=t.pl,this.vl=t.vl}return t.prototype.cu=function(t){this.bl=t},t.prototype.nu=function(t){this.Sl=t},t.prototype.onMessage=function(t){this.Dl=t},t.prototype.close=function(){this.vl()},t.prototype.send=function(t){this.pl(t)},t.prototype.Cl=function(){this.bl()},t.prototype.Nl=function(t){this.Sl(t)},t.prototype.xl=function(t){this.Dl(t)},t}(),Rd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},xd=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.i=e.i,n}return Object(Gn.c)(e,t),e.prototype.Ll=function(t,e,n,r){return new Promise(function(i,o){var s=new Ys;s.listenOnce(Ws.COMPLETE,function(){try{switch(s.getLastErrorCode()){case qs.NO_ERROR:var e=s.getResponseJson();ia("Connection","XHR received:",JSON.stringify(e)),i(e);break;case qs.TIMEOUT:ia("Connection",'RPC "'+t+'" timed out'),o(new ha(la.DEADLINE_EXCEEDED,"Request time out"));break;case qs.HTTP_ERROR:var n=s.getStatus();if(ia("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace("_","-");return Object.values(la).indexOf(e)>=0?e:la.UNKNOWN}(r.status);o(new ha(a,r.message))}else o(new ha(la.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new ha(la.UNAVAILABLE,"Connection failed."));break;default:ua()}}finally{ia("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.uu=function(t,e){var n=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new js,i=Vi(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(o.initMessageHeaders,e),Object(Xn.u)()||Object(Xn.x)()||Object(Xn.r)()||Object(Xn.t)()||Object(Xn.y)()||Object(Xn.q)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");ia("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,A=new Hd({pl:function(t){c?ia("Connection","Not sending because WebChannel is closed:",t):(u||(ia("Connection","Opening WebChannel transport."),a.open(),u=!0),ia("Connection","WebChannel sending:",t),a.send(t))},vl:function(){return a.close()}}),l=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return l(a,Js.EventType.OPEN,function(){c||ia("Connection","WebChannel transport opened.")}),l(a,Js.EventType.CLOSE,function(){c||(c=!0,ia("Connection","WebChannel transport closed"),A.Nl())}),l(a,Js.EventType.ERROR,function(t){c||(c=!0,sa("Connection","WebChannel transport errored:",t),A.Nl(new ha(la.UNAVAILABLE,"The operation could not be completed")))}),l(a,Js.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];ca(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){ia("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=ka[t];if(void 0!==e)return Va(e)}(i),s=r.message;void 0===o&&(o=la.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,A.Nl(new ha(o,s)),a.close()}else ia("Connection","WebChannel received:",n),A.xl(n)}}),l(i,Xs.STAT_EVENT,function(t){10===t.stat?ia("Connection","Detected buffering proxy"):11===t.stat&&ia("Connection","Detected no buffering proxy")}),setTimeout(function(){A.Cl()},0),A},e}(function(){function t(t){this.Fl=t,this.t=t.t,this.Ol=(t.ssl?"https":"http")+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}return t.prototype.Au=function(t,e,n,r){var i=this.kl(t,e);ia("RestConnection","Sending: ",i,n);var o={};return this.$l(o,r),this.Ll(t,i,o,n).then(function(t){return ia("RestConnection","Received: ",t),t},function(e){throw sa("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Ru=function(t,e,n,r){return this.Au(t,e,n,r)},t.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.1.1",t["Content-Type"]="text/plain",e)for(var n in e.T)e.T.hasOwnProperty(n)&&(t[n]=e.T[n])},t.prototype.kl=function(t,e){return this.Ol+"/v1/"+e+":"+Rd[t]},t}()),Dd=function(){function t(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}return t.prototype.Lu=function(t){this.Kl.push(t)},t.prototype.fc=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},t.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},t.prototype.ql=function(){ia("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},t.prototype.Ql=function(){ia("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},t.Gs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Pd=function(){function t(){}return t.prototype.Lu=function(t){},t.prototype.fc=function(){},t}(),kd=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Gn.b)(this,void 0,void 0,function(){return Object(Gn.d)(this,function(e){switch(e.label){case 0:return this.serializer=VA(t.Fl.t),this.kh=this.jl(t),this.persistence=this.Gl(t),[4,this.persistence.start()];case 1:return e.sent(),this.zl=this.Hl(t),this.Cu=this.Jl(t),[2]}})})},t.prototype.Hl=function(t){return null},t.prototype.Jl=function(t){return Fh(this.persistence,new Ed,t.Yl,this.serializer)},t.prototype.Gl=function(t){return new Fd(Sd.gl,this.serializer)},t.prototype.jl=function(t){return new Mf},t.prototype.terminate=function(){return Object(Gn.b)(this,void 0,void 0,function(){return Object(Gn.d)(this,function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.kh.fc()];case 1:return t.sent(),[4,this.persistence.fc()];case 2:return t.sent(),[2]}})})},t}(),Ld=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Xl=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Gn.c)(e,t),e.prototype.initialize=function(e){return Object(Gn.b)(this,void 0,void 0,function(){return Object(Gn.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,jh(this.Cu)];case 2:return n.sent(),[4,this.Xl.initialize(this,e)];case 3:return n.sent(),[4,Cd(this.Xl.ga)];case 4:return n.sent(),[4,hf(this.Xl.Oh)];case 5:return n.sent(),[2]}})})},e.prototype.Jl=function(t){return Fh(this.persistence,new Ed,t.Yl,this.serializer)},e.prototype.Hl=function(t){return new gl(this.persistence.Vr.cr,t.di)},e.prototype.Gl=function(t){var e=Ih(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?pl.er(this.cacheSizeBytes):pl.ir;return new Ch(this.synchronizeTabs,e,t.clientId,n,t.di,al(),ul(),this.serializer,this.kh,!!this.forceOwnership)},e.prototype.jl=function(t){return new Mf},e}(kd),Md=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Xl=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Gn.c)(e,t),e.prototype.initialize=function(e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r=this;return Object(Gn.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Xl.ga,this.kh instanceof Lf?(this.kh.ga={_h:gd.bind(null,n),fh:wd.bind(null,n),dh:_d.bind(null,n),Ic:bd.bind(null,n),lh:pd.bind(null,n)},[4,this.kh.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.Zo(function(t){return Object(Gn.b)(r,void 0,void 0,function(){return Object(Gn.d)(this,function(e){switch(e.label){case 0:return[4,yd(this.Xl.ga,t)];case 1:return e.sent(),this.zl&&(t&&!this.zl.lr?this.zl.start(this.Cu):t||this.zl.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jl=function(t){var e=al();if(!Lf.Gs(e))throw new ha(la.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ih(t.Fl.t,t.Fl.persistenceKey);return new Lf(e,t.di,n,t.clientId,t.Yl)},e}(Ld),jd=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n=this;return Object(Gn.d)(this,function(r){switch(r.label){case 0:return this.Cu?[3,2]:(this.Cu=t.Cu,this.kh=t.kh,this.Nu=this.Zl(e),this.Oh=this.t_(e),this.Mh=this.e_(e),this.ga=this.n_(e,!t.synchronizeTabs),this.kh.Pu=function(t){return Zf(n.ga,t,1)},this.Oh.xu.s_=hd.bind(null,this.ga),[4,mf(this.Oh,this.ga.Jh)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.e_=function(t){return new Bf},t.prototype.Zl=function(t){var e=VA(t.Fl.t),n=new xd(t.Fl);return function(t,e,n){return new qh(t,e,n)}(t.credentials,n,e)},t.prototype.t_=function(t){var e,n,r,i,o,s=this;return e=this.Cu,n=this.Nu,r=t.di,i=function(t){return Zf(s.ga,t,0)},o=Dd.Gs()?new Dd:new Pd,new Xh(e,n,r,i,o)},t.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){var a=new qf(t,e,n,r,i,o);return s&&(a.Hh=!0),a}(this.Cu,this.Oh,this.Mh,this.kh,t.Yl,t.$h,e)},t.prototype.terminate=function(){return function(t){return Object(Gn.b)(this,void 0,void 0,function(){var e;return Object(Gn.d)(this,function(n){switch(n.label){case 0:return e=Aa(t),ia("RemoteStore","RemoteStore shutting down."),e.Mu.add(5),[4,Yh(e)];case 1:return n.sent(),e.$u.fc(),e.Bu.set("Unknown"),[2]}})})}(this.Oh)},t}(),Kd=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.r_=function(){this.muted=!0},t.prototype.i_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Vd=function(t){this.o_=t};function zd(t,e,n){if(!n)throw new ha(la.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Gd(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new ha(la.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function qd(t,e,n,r){if(!0===e&&!0===r)throw new ha(la.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Wd(t){if(!Ia.ot(t))throw new ha(la.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Xd(t){if(Ia.ot(t))throw new ha(la.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Jd(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ua()}function Yd(t,e){if(t instanceof Vd&&(t=t.o_),!(t instanceof e)){if(e.name===t.constructor.name)throw new ha(la.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Jd(t);throw new ha(la.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function $d(t,e){if(e<=0)throw new ha(la.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Zd=function(t){this.c_=t},tp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gn.c)(e,t),e.prototype.u_=function(t){if(2!==t.a_)throw t.h_(1===t.a_?this.c_+"() can only appear at the top level of your update data":this.c_+"() cannot be used with set() unless you pass {merge:true}");return t.en.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Zd);function ep(t,e,n){return new ig({a_:3,l_:e.settings.l_,methodName:t.c_,__:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var np=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gn.c)(e,t),e.prototype.u_=function(t){return new Rc(t.path,new Qc)},e.prototype.isEqual=function(t){return t instanceof e},e}(Zd),rp=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(Gn.c)(e,t),e.prototype.u_=function(t){var e=ep(this,t,!0),n=this.f_.map(function(t){return Ag(t,e)}),r=new Uc(n);return new Rc(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Zd),ip=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).f_=n,r}return Object(Gn.c)(e,t),e.prototype.u_=function(t){var e=ep(this,t,!0),n=this.f_.map(function(t){return Ag(t,e)}),r=new Ic(n);return new Rc(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Zd),op=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).d_=n,r}return Object(Gn.c)(e,t),e.prototype.u_=function(t){var e=new Fc(t.serializer,Gu(t.serializer,this.d_));return new Rc(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Zd),sp=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new ha(la.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ha(la.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.w_=t,this.E_=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this.E_},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.w_===t.w_&&this.E_===t.E_},t.prototype.toJSON=function(){return{latitude:this.w_,longitude:this.E_}},t.prototype.C=function(t){return ba(this.w_,t.w_)||ba(this.E_,t.E_)},t}(),ap=function(){function t(t){this.T_=t}return t.fromBase64String=function(e){try{return new t(Pa.fromBase64String(e))}catch(e){throw new ha(la.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Pa.fromUint8Array(e))},t.prototype.toBase64=function(){return this.T_.toBase64()},t.prototype.toUint8Array=function(){return this.T_.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this.T_.isEqual(t.T_)},t}(),up=new Map,cp=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new ha(la.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ha(la.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,qd("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Ap=function(){function t(t,e){this.I_="(lite)",this.m_=new cp({}),this.A_=!1,t instanceof ta?(this.R_=t,this.P_=new da):(this.g_=t,this.R_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new ha(la.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ta(t.options.projectId)}(t),this.P_=new pa(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this.g_)throw new ha(la.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.g_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"y_",{get:function(){return this.A_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"V_",{get:function(){return void 0!==this.p_},enumerable:!1,configurable:!0}),t.prototype.v_=function(t){if(this.A_)throw new ha(la.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.m_=new cp(t),void 0!==t.credentials&&(this.P_=function(t){if(!t)return new da;switch(t.type){case"gapi":var e=t.client;return ca(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new ya(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new ha(la.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype.b_=function(){return this.m_},t.prototype.S_=function(){return this.A_=!0,this.m_},t.prototype._delete=function(){return this.p_||(this.p_=this.D_()),this.p_},t.prototype.D_=function(){return function(t){var e=up.get(t);e&&(ia("ComponentProvider","Removing Datastore"),up.delete(t),e.terminate())}(this),Promise.resolve()},t}();function lp(){if("undefined"==typeof Uint8Array)throw new ha(la.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function hp(){if("undefined"==typeof atob)throw new ha(la.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var fp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gn.c)(e,t),e.fromBase64String=function(t){return hp(),new e(ap.fromBase64String(t))},e.fromUint8Array=function(t){return lp(),new e(ap.fromUint8Array(t))},e.prototype.toBase64=function(){return hp(),this.o_.toBase64()},e.prototype.toUint8Array=function(){return lp(),this.o_.toUint8Array()},e.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Vd),dp=function(){function t(){}return t.prototype.C_=function(t,e){switch(void 0===e&&(e="none"),Eu(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Su(t.integerValue||t.doubleValue);case 3:return this.N_(t.timestampValue);case 4:return this.x_(t,e);case 5:return t.stringValue;case 6:return this.F_(Hu(t.bytesValue));case 7:return this.O_(t.referenceValue);case 8:return this.M_(t.geoPointValue);case 9:return this.k_(t.arrayValue,e);case 10:return this.L_(t.mapValue,e);default:throw ua()}},t.prototype.L_=function(t,e){var n=this,r={};return mu(t.fields||{},function(t,i){r[t]=n.C_(i,e)}),r},t.prototype.M_=function(t){return new sp(Su(t.latitude),Su(t.longitude))},t.prototype.k_=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.C_(t,e)})},t.prototype.x_=function(t,e){switch(e){case"previous":var n=_u(t);return null==n?null:this.C_(n,e);case"estimate":return this.N_(Bu(t));default:return null}},t.prototype.N_=function(t){var e=Nu(t);return new Ba(e.seconds,e.nanos)},t.prototype.B_=function(t,e){var n=Qa.Y(t);ca(wc(n));var r=new ta(n.get(1),n.get(3)),i=new Ia(n.B(5));return r.isEqual(e)||oa("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}(),pp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Gn.c)(e,t),e.prototype.F_=function(t){return new fp(new ap(t))},e.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return jg.q_(e,this.firestore,null)},e}(dp),gp=function(){function t(t,e,n,r,i){this.U_=t,this.Q_=e,this.K_=n,this.W_=r,this.j_=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this.K_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Sp(this.U_,this.j_,this.K_)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this.W_},t.prototype.data=function(){if(this.W_){if(this.j_){var t=new yp(this.U_,this.Q_,this.K_,this.W_,null);return this.j_.fromFirestore(t)}return this.Q_.C_(this.W_.En())}},t.prototype.get=function(t){if(this.W_){var e=this.W_.data().field(vp("DocumentSnapshot.get",t));if(null!==e)return this.Q_.C_(e)}},t}(),yp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gn.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(gp);function vp(t,e){return"string"==typeof e?gg(t,e):e instanceof Vd?e.o_.G_:e.G_}var mp=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new ha(la.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.G_=new Oa(t)}return t.prototype.isEqual=function(t){return this.G_.isEqual(t.G_)},t}(),bp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).z_=new Al,r.I_="name"in e?e.name:"[DEFAULT]",r}return Object(Gn.c)(e,t),e.prototype.D_=function(){return this.H_||kg(this),this.H_.terminate()},e}(Ap);function wp(t,e,n){var r=this,i=new KA;return t.di.enqueue(function(){return Object(Gn.b)(r,void 0,void 0,function(){var r;return Object(Gn.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,_g(t,n)];case 1:return o.sent(),[4,Bg(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===la.FAILED_PRECONDITION||t.code===la.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function _p(t){if(t.y_||t.V_)throw new ha(la.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Bp=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this).U_=e,a.J_=e,a.metadata=o,a}return Object(Gn.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this.W_){if(this.j_){var e=new Cp(this.U_,this.Q_,this.K_,this.W_,this.metadata,null);return this.j_.fromFirestore(e,t)}return this.Q_.C_(this.W_.En(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this.W_){var n=this.W_.data().field(vp("DocumentSnapshot.get",t));if(null!==n)return this.Q_.C_(n,e.serverTimestamps)}},e}(gp),Cp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gn.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Bp),Ep=function(){function t(t,e,n,r){this.U_=t,this.Q_=e,this.Y_=r,this.metadata=new Gg(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this.Y_.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this.Y_.docs.forEach(function(r){t.call(e,new Cp(n.U_,n.Q_,r.key,r,new Gg(n.Y_.ee.has(r.key),n.Y_.fromCache),n.query.j_))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this.Y_.se)throw new ha(la.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.X_&&this.Z_===e||(this.X_=function(t,e){if(t.Y_.te.W()){var n=0;return t.Y_.docChanges.map(function(e){return{type:"added",doc:new Cp(t.U_,t.Q_,e.doc.key,e.doc,new Gg(t.Y_.ee.has(e.doc.key),t.Y_.fromCache),t.query.j_),oldIndex:-1,newIndex:n++}})}var r=t.Y_.te;return t.Y_.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Cp(t.U_,t.Q_,e.doc.key,e.doc,new Gg(t.Y_.ee.has(e.doc.key),t.Y_.fromCache),t.query.j_),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Qp(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this.Z_=e),this.X_},t}();function Qp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ua()}}function Up(t,e){return t instanceof Bp&&e instanceof Bp?t.U_===e.U_&&t.K_.isEqual(e.K_)&&(null===t.W_?null===e.W_:t.W_.isEqual(e.W_))&&t.j_===e.j_:t instanceof Ep&&e instanceof Ep&&t.U_===e.U_&&$p(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.Y_.isEqual(e.Y_)}var Op=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Gn.c)(e,t),e.prototype.F_=function(t){return new ap(t)},e.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return new Sp(this.firestore,null,e)},e}(dp);function Ip(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=Yd(t.firestore,bp),s=Zp(o);return e instanceof Vd&&(e=e.o_),Fp(o,("string"==typeof e||e instanceof mp?ug(s,"updateDoc",t.K_,e,n,r):ag(s,"updateDoc",t.K_,e)).ef(t.K_,Dc.exists(!0)))}function Tp(t){for(var e,n,r,i=this,o=[],s=1;s<arguments.length;s++)o[s-1]=arguments[s];var a={includeMetadataChanges:!1},u=0;"object"!=typeof o[u]||zA(o[u])||(a=o[u],u++);var c,A,l,h={includeMetadataChanges:a.includeMetadataChanges};if(zA(o[u])){var f=o[u];o[u]=null===(e=f.next)||void 0===e?void 0:e.bind(f),o[u+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),o[u+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Sp)A=Yd(t.firestore,bp),l=uA(t.K_.path),c={next:function(e){o[u]&&o[u](Np(A,t,e))},error:o[u+1],complete:o[u+2]};else{A=Yd(t.firestore,bp),l=t.tf;var d=new Op(A);c={next:function(e){o[u]&&o[u](new Ep(A,d,t,e))},error:o[u+1],complete:o[u+2]},Gp(t.tf)}var p=Pg(A),g=new Kd(c),y=new If(l,g,h);return A.z_.Ri(function(){return Object(Gn.b)(i,void 0,void 0,function(){var t;return Object(Gn.d)(this,function(e){switch(e.label){case 0:return t=Cf,[4,Tg(p)];case 1:return[2,t.apply(void 0,[e.sent(),y])]}})})}),function(){g.r_(),A.z_.Ri(function(){return Object(Gn.b)(i,void 0,void 0,function(){var t;return Object(Gn.d)(this,function(e){switch(e.label){case 0:return t=Ef,[4,Tg(p)];case 1:return[2,t.apply(void 0,[e.sent(),y])]}})})})}}function Fp(t,e){return function(t,e){var n=this,r=new KA;return t.di.Ri(function(){return Object(Gn.b)(n,void 0,void 0,function(){var n;return Object(Gn.d)(this,function(i){switch(i.label){case 0:return n=Yf,[4,Ig(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(Pg(t),e)}function Np(t,e,n){var r=n.docs.get(e.K_),i=new Op(t);return new Bp(t,i,e.K_,r,new Gg(n.hasPendingWrites,n.fromCache),e.j_)}var Sp=function(){function t(t,e,n){this.j_=e,this.K_=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"nf",{get:function(){return this.K_.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this.K_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this.K_.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new qp(this.firestore,this.j_,this.K_.path.q())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this.K_)},t}(),Hp=function(){function t(t,e,n){this.j_=e,this.tf=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this.tf)},t}(),Rp=function(){};function xp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o.sf(t)}return t}var Dp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).rf=e,i.cf=n,i.uf=r,i.type="where",i}return Object(Gn.c)(e,t),e.prototype.sf=function(t){var e=Zp(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.tt()){if("array-contains"===o||"array-contains-any"===o)throw new ha(la.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Vp(s,o);for(var u=[],c=0,A=s;c<A.length;c++)u.push(Kp(r,t,A[c]));a={arrayValue:{values:u}}}else a=Kp(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Vp(s,o),a=cg(n,"where",s,"in"===o||"not-in"===o);var l=_A.create(i,o,a);return function(t,e){if(e.An()){var n=hA(t);if(null!==n&&!n.isEqual(e.field))throw new ha(la.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=lA(t);null!==r&&zp(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new ha(la.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,l),l}(t.tf,0,e,t.firestore.R_,this.rf,this.cf,this.uf);return new Hp(t.firestore,t.j_,function(t,e){var n=t.filters.concat([e]);return new sA(t.path,t.collectionGroup,t.Tn.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t.tf,n))},e}(Rp),Pp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).rf=e,r.af=n,r.type="orderBy",r}return Object(Gn.c)(e,t),e.prototype.sf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new ha(la.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new ha(la.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new RA(e,n);return function(t,e){if(null===lA(t)){var n=hA(t);null!==n&&zp(0,n,e.field)}}(t,r),r}(t.tf,this.rf,this.af);return new Hp(t.firestore,t.j_,function(t,e){var n=t.Tn.concat([e]);return new sA(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t.tf,e))},e}(Rp),kp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.hf=n,i.lf=r,i}return Object(Gn.c)(e,t),e.prototype.sf=function(t){return new Hp(t.firestore,t.j_,gA(t.tf,this.hf,this.lf))},e}(Rp),Lp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i._f=n,i.ff=r,i}return Object(Gn.c)(e,t),e.prototype.sf=function(t){var e=jp(t,this.type,this._f,this.ff);return new Hp(t.firestore,t.j_,function(t,e){return new sA(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t.tf,e))},e}(Rp),Mp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i._f=n,i.ff=r,i}return Object(Gn.c)(e,t),e.prototype.sf=function(t){var e=jp(t,this.type,this._f,this.ff);return new Hp(t.firestore,t.j_,function(t,e){return new sA(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t.tf,e))},e}(Rp);function jp(t,e,n,r){if(n[0]instanceof Vd&&(n[0]=n[0].o_),n[0]instanceof gp)return function(t,e,n,r,i){if(!r)throw new ha(la.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=dA(t);s<a.length;s++){var u=a[s];if(u.field.tt())o.push(Ru(e,r.key));else{var c=r.field(u.field);if(wu(c))throw new ha(la.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var A=u.field.J();throw new ha(la.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+A+"' (used as the orderBy) does not exist.")}o.push(c)}}return new FA(o,i)}(t.tf,t.firestore.R_,e,n[0].W_,r);var i=Zp(t.firestore);return function(t,e,n,r,i,o){var s=t.Tn;if(i.length>s.length)throw new ha(la.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.tt()){if("string"!=typeof c)throw new ha(la.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!fA(t)&&-1!==c.indexOf("/"))throw new ha(la.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var A=t.path.child(Qa.Y(c));if(!Ia.ot(A))throw new ha(la.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+A+"' is not because it contains an odd number of segments.");var l=new Ia(A);a.push(Ru(e,l))}else{var h=cg(n,r,c);a.push(h)}}return new FA(a,o)}(t.tf,t.firestore.R_,i,e,n,r)}function Kp(t,e,n){if(n instanceof Vd&&(n=n.o_),"string"==typeof n){if(""===n)throw new ha(la.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!fA(e)&&-1!==n.indexOf("/"))throw new ha(la.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Qa.Y(n));if(!Ia.ot(r))throw new ha(la.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Ru(t,new Ia(r))}if(n instanceof Sp)return Ru(t,n.K_);throw new ha(la.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Jd(n)+".")}function Vp(t,e){if(!Array.isArray(t)||0===t.length)throw new ha(la.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new ha(la.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function zp(t,e,n){if(!n.isEqual(e))throw new ha(la.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function Gp(t){if(AA(t)&&0===t.Tn.length)throw new ha(la.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var qp=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,uA(r))||this).firestore=e,i.nf=r,i.type="collection",i}return Object(Gn.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.tf.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.tf.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.nf.q();return t.W()?null:new Sp(this.firestore,null,new Ia(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this.nf)},e}(Hp);function Wp(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(zd("collection","path",e),t instanceof Ap){var i=Qa.Y.apply(Qa,Object(Gn.g)([e],n));return Xd(i),new qp(t,null,i)}if(!(t instanceof Sp||t instanceof qp))throw new ha(la.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=Qa.Y.apply(Qa,Object(Gn.g)([t.path],n)).child(Qa.Y(e));return Xd(o),new qp(t.firestore,null,o)}function Xp(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(1===arguments.length&&(e=ma.D()),zd("doc","path",e),t instanceof Ap){var i=Qa.Y.apply(Qa,Object(Gn.g)([e],n));return Wd(i),new Sp(t,null,new Ia(i))}if(!(t instanceof Sp||t instanceof qp))throw new ha(la.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=t.nf.child(Qa.Y.apply(Qa,Object(Gn.g)([e],n)));return Wd(o),new Sp(t.firestore,t instanceof qp?t.j_:null,new Ia(o))}var Jp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Gn.c)(e,t),e.prototype.F_=function(t){return new ap(t)},e.prototype.O_=function(t){var e=this.B_(t,this.firestore.R_);return new Sp(this.firestore,null,e)},e}(dp);function Yp(t,e){return(t instanceof Sp||t instanceof qp)&&(e instanceof Sp||e instanceof qp)&&t.firestore===e.firestore&&t.path===e.path&&t.j_===e.j_}function $p(t,e){return t instanceof Hp&&e instanceof Hp&&t.firestore===e.firestore&&yA(t.tf,e.tf)&&t.j_===e.j_}function Zp(t){var e=t.S_(),n=VA(t.R_);return new og(t.R_,!!e.ignoreUndefinedProperties,n)}var tg=/^__.*__$/,eg=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.ef=function(t,e){var n=[];return n.push(null!==this.en?new Gc(t,this.data,this.en,e):new zc(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Wc(t,this.fieldTransforms)),n},t}(),ng=function(){function t(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}return t.prototype.ef=function(t,e){var n=[new Gc(t,this.data,this.en,e)];return this.fieldTransforms.length>0&&n.push(new Wc(t,this.fieldTransforms)),n},t}();function rg(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ua()}}var ig=function(){function t(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.df(),this.fieldTransforms=i||[],this.en=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"a_",{get:function(){return this.settings.a_},enumerable:!1,configurable:!0}),t.prototype.wf=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.en)},t.prototype.Ef=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.wf({path:n,__:!1});return r.Tf(t),r},t.prototype.If=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.wf({path:n,__:!1});return r.df(),r},t.prototype.mf=function(t){return this.wf({path:void 0,__:!0})},t.prototype.h_=function(t){return yg(t,this.settings.methodName,this.settings.Af||!1,this.path,this.settings.l_)},t.prototype.contains=function(t){return void 0!==this.en.find(function(e){return t.j(e)})||void 0!==this.fieldTransforms.find(function(e){return t.j(e.field)})},t.prototype.df=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Tf(this.path.get(t))},t.prototype.Tf=function(t){if(0===t.length)throw this.h_("Document fields must not be empty");if(rg(this.a_)&&tg.test(t))throw this.h_('Document fields cannot begin and end with "__"')},t}(),og=function(){function t(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||VA(t)}return t.prototype.Rf=function(t,e,n,r){return void 0===r&&(r=!1),new ig({a_:t,methodName:e,l_:n,path:Oa.X(),__:!1,Af:r},this.t,this.serializer,this.ignoreUndefinedProperties)},t}();function sg(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Rf(o.merge||o.mergeFields?2:0,e,n,i);fg("Data must be an object, but it was:",s,r);var a,u,c=lg(r,s);if(o.merge)a=new Hc(s.en),u=s.fieldTransforms;else if(o.mergeFields){for(var A=[],l=0,h=o.mergeFields;l<h.length;l++){var f=dg(e,h[l],n);if(!s.contains(f))throw new ha(la.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");vg(A,f)||A.push(f)}a=new Hc(A),u=s.fieldTransforms.filter(function(t){return a.un(t.field)})}else a=null,u=s.fieldTransforms;return new eg(new Zc(c),a,u)}function ag(t,e,n,r){var i=t.Rf(1,e,n);fg("Data must be an object, but it was:",i,r);var o=[],s=new tA;mu(r,function(t,r){var a=gg(e,t,n);r instanceof Vd&&(r=r.o_);var u=i.If(a);if(r instanceof tp)o.push(a);else{var c=Ag(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new Hc(o);return new ng(s.hn(),a,i.fieldTransforms)}function ug(t,e,n,r,i,o){var s=t.Rf(1,e,n),a=[dg(e,r,n)],u=[i];if(o.length%2!=0)throw new ha(la.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(dg(e,o[c])),u.push(o[c+1]);for(var A=[],l=new tA,h=a.length-1;h>=0;--h)if(!vg(A,a[h])){var f=a[h],d=u[h];d instanceof Vd&&(d=d.o_);var p=s.If(f);if(d instanceof tp)A.push(f);else{var g=Ag(d,p);null!=g&&(A.push(f),l.set(f,g))}}var y=new Hc(A);return new ng(l.hn(),y,s.fieldTransforms)}function cg(t,e,n,r){return void 0===r&&(r=!1),Ag(n,t.Rf(r?4:3,e))}function Ag(t,e){if(t instanceof Vd&&(t=t.o_),hg(t))return fg("Unsupported field value:",e,t),lg(t,e);if(t instanceof Zd)return function(t,e){if(!rg(e.a_))throw e.h_(t.c_+"() can only be used with update() and set()");if(!e.path)throw e.h_(t.c_+"() is not currently supported inside arrays");var n=t.u_(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(e.path&&e.en.push(e.path),t instanceof Array){if(e.settings.__&&4!==e.a_)throw e.h_("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Ag(o[i],e.mf(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Vd&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Gu(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Ba.fromDate(t);return{timestampValue:qu(e.serializer,n)}}if(t instanceof Ba){var r=new Ba(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:qu(e.serializer,r)}}if(t instanceof sp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ap)return{bytesValue:Wu(e.serializer,t.T_)};if(t instanceof Sp){var i=e.t,o=t.firestore.R_;if(!o.isEqual(i))throw e.h_("Document reference is for database "+o.projectId+"/"+o.database+" but should be for database "+i.projectId+"/"+i.database);return{referenceValue:Yu(t.firestore.R_||e.t,t.K_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.h_("Unsupported field value: "+Jd(t))}(t,e)}function lg(t,e){var n={};return bu(t)?e.path&&e.path.length>0&&e.en.push(e.path):mu(t,function(t,r){var i=Ag(r,e.Ef(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function hg(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Ba||t instanceof sp||t instanceof ap||t instanceof Sp||t instanceof Zd)}function fg(t,e,n){if(!hg(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Jd(n);throw e.h_("an object"===r?t+" a custom object":t+" "+r)}}function dg(t,e,n){if(e instanceof Vd&&(e=e.o_),e instanceof mp)return e.G_;if("string"==typeof e)return gg(t,e);throw yg("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var pg=new RegExp("[~\\*/\\[\\]]");function gg(t,e,n){if(e.search(pg)>=0)throw yg("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(mp.bind.apply(mp,Object(Gn.g)([void 0],e.split("."))))).G_}catch(r){throw yg("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function yg(t,e,n,r,i){var o=r&&!r.W(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new ha(la.INVALID_ARGUMENT,(a+=". ")+t+u)}function vg(t,e){return t.some(function(t){return t.isEqual(e)})}var mg=function(){function t(t){this.Nu=t,this.Pf=new Map,this.mutations=[],this.gf=!1,this.yf=null,this.Vf=new Set}return t.prototype.pf=function(t){return Object(Gn.b)(this,void 0,void 0,function(){var e,n=this;return Object(Gn.d)(this,function(r){switch(r.label){case 0:if(this.vf(),this.mutations.length>0)throw new ha(la.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Gn.d)(this,function(u){switch(u.label){case 0:return n=Aa(t),r=rc(n.serializer)+"/documents",i={documents:e.map(function(t){return Zu(n.serializer,t)})},[4,n.Ru("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){ca(!!e.found);var n=tc(t,e.found.name),r=Ju(e.found.updateTime),i=new Zc({mapValue:{fields:e.found.fields}});return new rA(n,r,i,{})}(t,e):"missing"in e?function(t,e){ca(!!e.missing),ca(!!e.readTime);var n=tc(t,e.missing),r=Ju(e.readTime);return new iA(n,r)}(t,e):ua()}(n.serializer,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());ca(!!e),a.push(e)}),a)]}})})}(this.Nu,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof iA||t instanceof rA?n.bf(t):ua()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.ef(t,this.rn(t))),this.Vf.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.ef(t,this.Sf(t)))}catch(t){this.yf=t}this.Vf.add(t.toString())},t.prototype.delete=function(t){this.write([new Yc(t,this.rn(t))]),this.Vf.add(t.toString())},t.prototype.commit=function(){return Object(Gn.b)(this,void 0,void 0,function(){var t,e=this;return Object(Gn.d)(this,function(n){switch(n.label){case 0:if(this.vf(),this.yf)throw this.yf;return t=this.Pf,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Ia.st(n);e.mutations.push(new $c(r,e.rn(r)))}),[4,function(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r,i;return Object(Gn.d)(this,function(o){switch(o.label){case 0:return n=Aa(t),r=rc(n.serializer)+"/documents",i={writes:e.map(function(t){return sc(n.serializer,t)})},[4,n.Au("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.Nu,this.mutations)];case 1:return n.sent(),this.gf=!0,[2]}})})},t.prototype.bf=function(t){var e;if(t instanceof rA)e=t.version;else{if(!(t instanceof iA))throw ua();e=Ca.min()}var n=this.Pf.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ha(la.ABORTED,"Document version changed between two reads.")}else this.Pf.set(t.key.toString(),e)},t.prototype.rn=function(t){var e=this.Pf.get(t.toString());return!this.Vf.has(t.toString())&&e?Dc.updateTime(e):Dc.on()},t.prototype.Sf=function(t){var e=this.Pf.get(t.toString());if(!this.Vf.has(t.toString())&&e){if(e.isEqual(Ca.min()))throw new ha(la.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Dc.updateTime(e)}return Dc.exists(!0)},t.prototype.write=function(t){this.vf(),this.mutations=this.mutations.concat(t)},t.prototype.vf=function(){},t}(),bg=function(){function t(t,e,n,r){this.di=t,this.Nu=e,this.updateFunction=n,this.Ti=r,this.Df=5,this.Si=new YA(this.di,"transaction_retry")}return t.prototype.run=function(){this.Cf()},t.prototype.Cf=function(){var t=this;this.Si.Bs(function(){return Object(Gn.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Gn.d)(this,function(r){return t=new mg(this.Nu),(e=this.Nf(t))&&e.then(function(e){n.di.Ri(function(){return t.commit().then(function(){n.Ti.resolve(e)}).catch(function(t){n.xf(t)})})}).catch(function(t){n.xf(t)}),[2]})})})},t.prototype.Nf=function(t){try{var e=this.updateFunction(t);return!Ta(e)&&e.catch&&e.then?e:(this.Ti.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ti.reject(t),null}},t.prototype.xf=function(t){var e=this;this.Df>0&&this.Ff(t)?(this.Df-=1,this.di.Ri(function(){return e.Cf(),Promise.resolve()})):this.Ti.reject(t)},t.prototype.Ff=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Ka(e)}return!1},t}(),wg=function(){function t(t,e,n){var r=this;this.credentials=t,this.di=e,this.Fl=n,this.user=ea.UNAUTHENTICATED,this.clientId=ma.D(),this.Of=function(){},this.g=new KA,this.credentials.A(function(t){ia("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.Of(t)),r.g.resolve()})}return t.prototype.getConfiguration=function(){return Object(Gn.b)(this,void 0,void 0,function(){return Object(Gn.d)(this,function(t){switch(t.label){case 0:return[4,this.g.promise];case 1:return[2,(t.sent(),{di:this.di,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,$h:100})]}})})},t.prototype.Mf=function(t){var e=this;this.Of=t,this.g.promise.then(function(){return e.Of(e.user)})},t.prototype.kf=function(){if(this.di.Ci)throw new ha(la.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.di.Oi();var e=new KA;return this.di.Ni(function(){return Object(Gn.b)(t,void 0,void 0,function(){var t,n;return Object(Gn.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.$f?[4,this.$f.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.Lf?[4,this.Lf.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.R(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ll(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function _g(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r=this;return Object(Gn.d)(this,function(i){switch(i.label){case 0:return t.di.Li(),ia("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=i.sent(),[4,e.initialize(n)];case 2:return i.sent(),t.Mf(function(n){return t.di.Mi(function(){return Object(Gn.b)(r,void 0,void 0,function(){return Object(Gn.d)(this,function(t){switch(t.label){case 0:return[4,Nh(e.Cu,n)];case 1:return t.sent(),[2]}})})})}),e.persistence.tc(function(){return t.terminate()}),t.Lf=e,[2]}})})}function Bg(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r;return Object(Gn.d)(this,function(i){switch(i.label){case 0:return t.di.Li(),[4,Cg(t)];case 1:return n=i.sent(),ia("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.Mf(function(n){return t.di.Mi(function(){return function(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r;return Object(Gn.d)(this,function(i){switch(i.label){case 0:return(n=Aa(t)).di.Li(),ia("RemoteStore","RemoteStore received new credentials"),r=of(n),n.Mu.add(3),[4,Yh(n)];case 1:return i.sent(),r&&n.Bu.set("Unknown"),[4,n.xu.s_(e)];case 2:return i.sent(),n.Mu.delete(3),[4,Jh(n)];case 3:return i.sent(),[2]}})})}(e.Oh,n)})}),t.$f=e,[2]}})})}function Cg(t){return Object(Gn.b)(this,void 0,void 0,function(){return Object(Gn.d)(this,function(e){switch(e.label){case 0:return t.Lf?[3,2]:(ia("FirestoreClient","Using default OfflineComponentProvider"),[4,_g(t,new kd)]);case 1:e.sent(),e.label=2;case 2:return[2,t.Lf]}})})}function Eg(t){return Object(Gn.b)(this,void 0,void 0,function(){return Object(Gn.d)(this,function(e){switch(e.label){case 0:return t.$f?[3,2]:(ia("FirestoreClient","Using default OnlineComponentProvider"),[4,Bg(t,new jd)]);case 1:e.sent(),e.label=2;case 2:return[2,t.$f]}})})}function Qg(t){return Cg(t).then(function(t){return t.persistence})}function Ug(t){return Cg(t).then(function(t){return t.Cu})}function Og(t){return Eg(t).then(function(t){return t.Oh})}function Ig(t){return Eg(t).then(function(t){return t.ga})}function Tg(t){return Object(Gn.b)(this,void 0,void 0,function(){var e,n;return Object(Gn.d)(this,function(r){switch(r.label){case 0:return[4,Eg(t)];case 1:return e=r.sent(),[2,((n=e.Mh).Ju=Wf.bind(null,e.ga),n.Zu=Jf.bind(null,e.ga),n)]}})})}function Fg(t,e,n,r,i){var o=new Kd({next:function(o){e.Ri(function(){return Ef(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new ha(la.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new ha(la.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new If(uA(n.path),o,{includeMetadataChanges:!0,oa:!0});return Cf(t,s)}function Ng(t,e,n,r,i){var o=new Kd({next:function(n){e.Ri(function(){return Ef(t,s)}),n.fromCache&&"server"===r.source?i.reject(new ha(la.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new If(n,o,{includeMetadataChanges:!0,oa:!0});return Cf(t,s)}var Sg=function(){function t(t,e){this.U_=t,this.Bf=e,this.qf=[],this.Uf=!1,this.Qf=Zp(t)}return t.prototype.set=function(t,e,n){this.Kf();var r=Hg(t,this.U_),i=ty(r.j_,e,n),o=sg(this.Qf,"WriteBatch.set",r.K_,i,null!==r.j_,n);return this.qf=this.qf.concat(o.ef(r.K_,Dc.on())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Kf();var o,s=Hg(t,this.U_);return e instanceof Vd&&(e=e.o_),o="string"==typeof e||e instanceof mp?ug(this.Qf,"WriteBatch.update",s.K_,e,n,r):ag(this.Qf,"WriteBatch.update",s.K_,e),this.qf=this.qf.concat(o.ef(s.K_,Dc.exists(!0))),this},t.prototype.delete=function(t){this.Kf();var e=Hg(t,this.U_);return this.qf=this.qf.concat(new Yc(e.K_,Dc.on())),this},t.prototype.commit=function(){return this.Kf(),this.Uf=!0,this.qf.length>0?this.Bf(this.qf):Promise.resolve()},t.prototype.Kf=function(){if(this.Uf)throw new ha(la.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Hg(t,e){if(t instanceof Vd&&(t=t.o_),t.firestore!==e)throw new ha(la.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var Rg=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).U_=e,r}return Object(Gn.c)(e,t),e.prototype.get=function(e){var n=this,r=Hg(e,this.U_),i=new Op(this.U_);return t.prototype.get.call(this,e).then(function(t){return new Bp(n.U_,i,r.K_,t.W_,new Gg(!1,!1),r.j_)})},e}(function(){function t(t,e){this.U_=t,this.Wf=e,this.Qf=Zp(t)}return t.prototype.get=function(t){var e=this,n=Hg(t,this.U_),r=new Jp(this.U_);return this.Wf.pf([n.K_]).then(function(t){if(!t||1!==t.length)return ua();var i=t[0];if(i instanceof iA)return new gp(e.U_,r,n.K_,null,n.j_);if(i instanceof rA)return new gp(e.U_,r,i.key,i,n.j_);throw ua()})},t.prototype.set=function(t,e,n){var r=Hg(t,this.U_),i=ty(r.j_,e,n),o=sg(this.Qf,"Transaction.set",r.K_,i,null!==r.j_,n);return this.Wf.set(r.K_,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=Hg(t,this.U_);return e instanceof Vd&&(e=e.o_),o="string"==typeof e||e instanceof mp?ug(this.Qf,"Transaction.update",s.K_,e,n,r):ag(this.Qf,"Transaction.update",s.K_,e),this.Wf.update(s.K_,o),this},t.prototype.delete=function(t){var e=Hg(t,this.U_);return this.Wf.delete(e.K_),this},t}()),xg=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){_p(t);var n=Pg(t),r=t.S_(),i=new jd;return wp(n,i,new Ld(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){_p(t);var e=Pg(t),n=t.S_(),r=new jd;return wp(e,r,new Md(r,n.cacheSizeBytes))}(t.o_)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t.y_&&!t.V_)throw new ha(la.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new KA;return t.z_.Ni(function(){return Object(Gn.b)(e,void 0,void 0,function(){var e;return Object(Gn.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Gn.b)(this,void 0,void 0,function(){return Object(Gn.d)(this,function(e){switch(e.label){case 0:return $A.Gs()?[4,$A.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Ih(t.R_,t.I_))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t.o_)},t}(),Dg=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).jf=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof ta||(i.Gf=e),i}return Object(Gn.c)(e,t),Object.defineProperty(e.prototype,"R_",{get:function(){return this.o_.R_},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.b_()),t)).merge,this.o_.v_(t)},e.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.b_().host&&sa("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.di.enqueue(function(){return Object(Gn.b)(e,void 0,void 0,function(){var e,n;return Object(Gn.d)(this,function(r){switch(r.label){case 0:return[4,Qg(t)];case 1:return e=r.sent(),[4,Og(t)];case 2:return n=r.sent(),[2,(e.ec(!0),function(t){var e=Aa(t);return e.Mu.delete(0),Jh(e)}(n))]}})})})}(Pg(this.o_))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.di.enqueue(function(){return Object(Gn.b)(e,void 0,void 0,function(){var e,n;return Object(Gn.d)(this,function(r){switch(r.label){case 0:return[4,Qg(t)];case 1:return e=r.sent(),[4,Og(t)];case 2:return n=r.sent(),[2,(e.ec(!1),function(t){return Object(Gn.b)(this,void 0,void 0,function(){var e;return Object(Gn.d)(this,function(n){switch(n.label){case 0:return(e=Aa(t)).Mu.add(0),[4,Yh(e)];case 1:return n.sent(),e.Bu.set("Offline"),[2]}})})}(n))]}})})})}(Pg(this.o_))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&qd("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.jf.enableMultiTabIndexedDbPersistence(this):this.jf.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.jf.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new KA;return t.di.Ri(function(){return Object(Gn.b)(e,void 0,void 0,function(){var e;return Object(Gn.d)(this,function(r){switch(r.label){case 0:return e=rd,[4,Ig(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(Pg(this.o_))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){var n=this,r=Pg(t),i=zA(e)?e:{next:e},o=new Kd(i);return t.z_.Ri(function(){return Object(Gn.b)(n,void 0,void 0,function(){var t;return Object(Gn.d)(this,function(e){switch(e.label){case 0:return t=function(t,e){Aa(t).Hu.add(e),e.next()},[4,Tg(r)];case 1:return t.apply(void 0,[e.sent(),o]),[2]}})})}),function(){o.r_(),t.z_.Ri(function(){return Object(Gn.b)(n,void 0,void 0,function(){var t;return Object(Gn.d)(this,function(e){switch(e.label){case 0:return t=function(t,e){Aa(t).Hu.delete(e)},[4,Tg(r)];case 1:return t.apply(void 0,[e.sent(),o]),[2]}})})})}}(this.o_,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.Gf)throw new ha(la.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Gf},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new $g(this,Wp(this.o_,t))}catch(t){throw Kg(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new jg(this,Xp(this.o_,t))}catch(t){throw Kg(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Xg(this,function(t,e){if(zd("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new ha(la.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Hp(t,null,function(t){return new sA(Qa.X(),t)}(e))}(this.o_,t))}catch(t){throw Kg(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new KA;return t.di.Ri(function(){return Object(Gn.b)(n,void 0,void 0,function(){var n;return Object(Gn.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Eg(t).then(function(t){return t.Nu})}(t)];case 1:return n=i.sent(),new bg(t.di,n,e,r).run(),[2]}})})}),r.promise}(Pg(t),function(n){return e(new Rg(t,n))})}(this.o_,function(n){return t(new Lg(e,n))})},e.prototype.batch=function(){var t=this;return Pg(this.o_),new Mg(new Sg(this.o_,function(e){return Fp(t.o_,e)}))},e}(Vd);function Pg(t){return t.H_||kg(t),t.H_.kf(),t.H_}function kg(t){var e=t.S_(),n=function(t,e,n){return new Zs(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t.R_,t.I_,e);t.H_=new wg(t.P_,t.z_,n)}var Lg=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(Gn.c)(e,t),e.prototype.get=function(t){var e=this,n=Zg(t);return this.o_.get(n).then(function(t){return new qg(e.U_,t)})},e.prototype.set=function(t,e,n){var r=Zg(t);return n?(Gd("Transaction.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Zg(t);return 2===arguments.length?this.o_.update(s,e):(r=this.o_).update.apply(r,Object(Gn.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Zg(t);return this.o_.delete(e),this},e}(Vd),Mg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gn.c)(e,t),e.prototype.set=function(t,e,n){var r=Zg(t);return n?(Gd("WriteBatch.set",n),this.o_.set(r,e,n)):this.o_.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Zg(t);return 2===arguments.length?this.o_.update(s,e):(r=this.o_).update.apply(r,Object(Gn.g)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Zg(t);return this.o_.delete(e),this},e.prototype.commit=function(){return this.o_.commit()},e}(Vd),jg=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r.Q_=new pp(e),r}return Object(Gn.c)(e,t),e.zf=function(t,n,r){if(t.length%2!=0)throw new ha(la.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.J()+" has "+t.length);return new e(n,new Sp(n.o_,r,new Ia(t)))},e.q_=function(t,n,r){return new e(n,new Sp(n.o_,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new $g(this.firestore,this.o_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new $g(this.firestore,Wp(this.o_,t))}catch(t){throw Kg(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Vd&&(t=t.o_),t instanceof Sp&&Yp(this.o_,t)},e.prototype.set=function(t,e){e=Gd("DocumentReference.set",e);try{return function(t,e,n){var r=Yd(t.firestore,bp),i=ty(t.j_,e,n);return Fp(r,sg(Zp(r),"setDoc",t.K_,i,null!==t.j_,n).ef(t.K_,Dc.on()))}(this.o_,t,e)}catch(t){throw Kg(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Ip(this.o_,t):Ip.apply(void 0,Object(Gn.g)([this.o_,t,e],n))}catch(t){throw Kg(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return Fp(Yd((t=this.o_).firestore,bp),[new Yc(t.K_,Dc.on())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Vg(e),i=zg(e,function(e){return new qg(t.firestore,new Bp(t.firestore.o_,t.Q_,e.K_,e.W_,e.metadata,t.o_.j_))});return Tp(this.o_,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){var e=this,n=Yd(t.firestore,bp),r=Pg(n),i=new Op(n),o=new KA;return n.z_.Ri(function(){return Object(Gn.b)(e,void 0,void 0,function(){return Object(Gn.d)(this,function(e){switch(e.label){case 0:return[4,Ug(r)];case 1:return[4,function(t,e,n){return Object(Gn.b)(this,void 0,void 0,function(){var r,i,o;return Object(Gn.d)(this,function(s){switch(s.label){case 0:return s.trys.push([0,2,,3]),[4,function(t,e){var n=Aa(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Oc.cs(t,e)})}(t,e)];case 1:return(r=s.sent())instanceof rA?n.resolve(r):r instanceof iA?n.resolve(null):n.reject(new ha(la.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return i=s.sent(),o=ll(i,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}})})}(e.sent(),t.K_,o)];case 2:return e.sent(),[2]}})})}),o.promise.then(function(e){return new Bp(n,i,t.K_,e,new Gg(e instanceof rA&&e.an,!0),t.j_)})}(this.o_):"server"===(null==t?void 0:t.source)?function(t){var e=this,n=Yd(t.firestore,bp),r=Pg(n),i=new KA;return n.z_.Ri(function(){return Object(Gn.b)(e,void 0,void 0,function(){return Object(Gn.d)(this,function(e){switch(e.label){case 0:return[4,Tg(r)];case 1:return[4,Fg(e.sent(),n.z_,t.K_,{source:"server"},i)];case 2:return e.sent(),[2]}})})}),i.promise.then(function(e){return Np(n,t,e)})}(this.o_):function(t){var e=this,n=Yd(t.firestore,bp),r=Pg(n),i=new KA;return n.z_.Ri(function(){return Object(Gn.b)(e,void 0,void 0,function(){return Object(Gn.d)(this,function(e){switch(e.label){case 0:return[4,Tg(r)];case 1:return[4,Fg(e.sent(),n.z_,t.K_,{source:"default"},i)];case 2:return e.sent(),[2]}})})}),i.promise.then(function(e){return Np(n,t,e)})}(this.o_)).then(function(t){return new qg(e.firestore,new Bp(e.firestore.o_,e.Q_,t.K_,t.W_,t.metadata,e.o_.j_))})},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(Vd);function Kg(t,e,n){return t.message=t.message.replace(e,n),t}function Vg(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!zA(r))return r}return{}}function zg(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=zA(t[0])?t[0]:zA(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Gg=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),qg=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(Gn.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new jg(this.U_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this.o_.data(t)},e.prototype.get=function(t,e){return this.o_.get(t,e)},e.prototype.isEqual=function(t){return Up(this.o_,t.o_)},e}(Vd),Wg=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gn.c)(e,t),e.prototype.data=function(t){return this.o_.data(t)},e}(qg),Xg=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r}return Object(Gn.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,xp(this.o_,function(t,e,n){var r=e,i=vp("where",t);return new Dp(i,r,n)}(t,n,r)))}catch(t){throw Kg(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,xp(this.o_,function(t,e){void 0===e&&(e="asc");var n=e,r=vp("orderBy",t);return new Pp(r,n)}(t,n)))}catch(t){throw Kg(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,xp(this.o_,function(t){return $d("limit",t),new kp("limit",t,"F")}(t)))}catch(t){throw Kg(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,xp(this.o_,function(t){return $d("limitToLast",t),new kp("limitToLast",t,"L")}(t)))}catch(t){throw Kg(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,xp(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Lp("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw Kg(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,xp(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Lp("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw Kg(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,xp(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Mp("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw Kg(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,xp(this.o_,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Mp("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw Kg(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return $p(this.o_,t.o_)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){var e=this,n=Yd(t.firestore,bp),r=Pg(n),i=new Op(n),o=new KA;return n.z_.Ri(function(){return Object(Gn.b)(e,void 0,void 0,function(){return Object(Gn.d)(this,function(e){switch(e.label){case 0:return[4,Ug(r)];case 1:return[4,function(t,e,n){return Object(Gn.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Gn.d)(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,kh(t,e,!0)];case 1:return r=c.sent(),i=new Vf(e,r.Bc),o=i.gh(r.documents),s=i.Zn(o,!1),n.resolve(s.snapshot),[3,3];case 2:return a=c.sent(),u=ll(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}})})}(e.sent(),t.tf,o)];case 2:return e.sent(),[2]}})})}),o.promise.then(function(e){return new Ep(n,i,t,e)})}(this.o_):"server"===(null==t?void 0:t.source)?function(t){var e=this,n=Yd(t.firestore,bp),r=Pg(n),i=new Op(n),o=new KA;return n.z_.Ri(function(){return Object(Gn.b)(e,void 0,void 0,function(){return Object(Gn.d)(this,function(e){switch(e.label){case 0:return[4,Tg(r)];case 1:return[4,Ng(e.sent(),n.z_,t.tf,{source:"server"},o)];case 2:return e.sent(),[2]}})})}),o.promise.then(function(e){return new Ep(n,i,t,e)})}(this.o_):function(t){var e=this,n=Yd(t.firestore,bp),r=Pg(n),i=new Op(n);Gp(t.tf);var o=new KA;return n.z_.Ri(function(){return Object(Gn.b)(e,void 0,void 0,function(){return Object(Gn.d)(this,function(e){switch(e.label){case 0:return[4,Tg(r)];case 1:return[4,Ng(e.sent(),n.z_,t.tf,{source:"default"},o)];case 2:return e.sent(),[2]}})})}),o.promise.then(function(e){return new Ep(n,i,t,e)})}(this.o_)).then(function(t){return new Yg(e.firestore,t)})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Vg(e),i=zg(e,function(e){return new Yg(t.firestore,e)});return Tp(this.o_,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(Vd),Jg=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(Gn.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Wg(this.U_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this.o_.newIndex},enumerable:!1,configurable:!0}),e}(Vd),Yg=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).U_=e,r}return Object(Gn.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Xg(this.U_,this.o_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this.o_.docs.map(function(e){return new Wg(t.U_,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map(function(t){return new Jg(e.U_,t)})},e.prototype.forEach=function(t,e){var n=this;this.o_.forEach(function(r){t.call(e,new Wg(n.U_,r))})},e.prototype.isEqual=function(t){return Up(this.o_,t.o_)},e}(Vd),$g=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r.o_=n,r}return Object(Gn.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this.o_.parent;return t?new jg(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new jg(this.firestore,void 0===t?Xp(this.o_):Xp(this.o_,t))}catch(t){throw Kg(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Yd(t.firestore,bp),r=Xp(t),i=ty(t.j_,e);return Fp(n,sg(Zp(t.firestore),"addDoc",r.K_,i,null!==t.j_,{}).ef(r.K_,Dc.exists(!1))).then(function(){return r})}(this.o_,t).then(function(t){return new jg(e.firestore,t)})},e.prototype.isEqual=function(t){return Yp(this.o_,t.o_)},e.prototype.withConverter=function(t){return new e(this.firestore,this.o_.withConverter(t))},e}(Xg);function Zg(t){return t instanceof Vd&&(t=t.o_),Yd(t,Sp)}function ty(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var ey,ny=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(mp.bind.apply(mp,Object(Gn.g)([void 0],e))))||this}return Object(Gn.c)(e,t),e.documentId=function(){return new e(Oa.et().J())},e.prototype.isEqual=function(t){return t instanceof Vd&&(t=t.o_),t instanceof mp&&this.o_.G_.isEqual(t.G_)},e}(Vd),ry=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Gn.c)(e,t),e.serverTimestamp=function(){var t=new np("serverTimestamp");return t.c_="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new tp("deleteField");return t.c_="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rp("arrayUnion",t)}).apply(void 0,t);return r.c_="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new ip("arrayRemove",t)}).apply(void 0,t);return r.c_="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new op("increment",t)}(t);return n.c_="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},e}(Vd),iy={Firestore:Dg,GeoPoint:sp,Timestamp:Ba,Blob:fp,Transaction:Lg,WriteBatch:Mg,DocumentReference:jg,DocumentSnapshot:qg,Query:Xg,QueryDocumentSnapshot:Wg,QuerySnapshot:Yg,CollectionReference:$g,FieldPath:ny,FieldValue:ry,setLogLevel:function(t){na.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new $s.a("firestore",function(t){return function(t,e){return new Dg(t,new bp(t,e),new xg)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},iy)))})(ey=qn.a),ey.registerVersion("@firebase/firestore","2.0.4");var oy=n("VRyK"),sy=n("zx2A");function ay(t,e){return"function"==typeof e?n=>n.pipe(ay((n,r)=>Object(Mt.a)(t(n,r)).pipe(Object(ot.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new uy(t))}class uy{constructor(t){this.project=t}call(t,e){return e.subscribe(new cy(t,this.project))}}class cy extends sy.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new sy.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(sy.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}var Ay=n("qgXg"),ly=n("9ppp"),hy=n("Ylt2");class fy extends Y.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new dy(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new ly.a;if(this.isStopped||this.hasError?o=Bn.a.EMPTY:(this.observers.push(t),o=new hy.a(this,t)),r&&t.add(t=new Kn.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Ay.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class dy{constructor(t,e){this.time=t,this.value=e}}function py(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let A;s++,!i||a?(a=!1,i=new fy(t,e,r),A=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}})):A=i.subscribe(this),this.add(()=>{s--,A.unsubscribe(),o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}const gy=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})(),yy=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();var vy=n("EY2u");function my(t){return e=>0===t?Object(vy.a)():e.lift(new by(t))}class by{constructor(t){if(this.total=t,this.total<0)throw new yy}call(t,e){return e.subscribe(new wy(t,this.total))}}class wy extends et.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function _y(t=null){return e=>e.lift(new By(t))}class By{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Cy(t,this.defaultValue))}}class Cy extends et.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function Ey(t=Oy){return e=>e.lift(new Qy(t))}class Qy{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Uy(t,this.errorFactory))}}class Uy extends et.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function Oy(){return new gy}var Iy=n("SpAZ");function Ty(t,e){return e?ay(()=>t,e):ay(()=>t)}var Fy=n("tf+s");const Ny=new r.l("angularfire2.auth.use-emulator"),Sy=new r.l("angularfire2.auth.settings"),Hy=new r.l("angularfire2.auth.tenant-id"),Ry=new r.l("angularfire2.auth.langugage-code"),xy=new r.l("angularfire2.auth.use-device-language"),Dy=new r.l("angularfire.auth.persistence");let Py=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,A){const l=new Vn.d(i),h=Object(Vn.h)(l),f=new Y.a,d=Object($.a)(void 0).pipe(Object(Kn.b)(l.outsideAngular),ay(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(ot.a)(()=>Object(Vn.g)(t,i,e)),Object(ot.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(Vn.f)(t.name+".auth","AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator("http://"+e.join(":")),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),A&&r.setPersistence(A),r},[e,a,u,c,n,A])})),py({bufferSize:1,refCount:!1}));if(w(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object($.a)(null);else{d.pipe(function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?nt((e,n)=>t(e,n,r)):Iy.a,my(1),n?_y(e):Ey(()=>new gy))}()).subscribe();const t=d.pipe(ay(t=>t.getRedirectResult().then(t=>t,()=>null)),h,py({bufferSize:1,refCount:!1})),e=t=>new Z.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=d.pipe(ay(t=>e(t.onAuthStateChanged.bind(t)))),r=d.pipe(ay(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Ty(n),Object(Fy.a)(l.outsideAngular),Object(Kn.b)(l.insideAngular)),this.user=t.pipe(Ty(r),Object(Fy.a)(l.outsideAngular),Object(Kn.b)(l.insideAngular)),this.idToken=this.user.pipe(ay(t=>t?Object(Mt.a)(t.getIdToken()):Object($.a)(null))),this.idTokenResult=this.user.pipe(ay(t=>t?Object(Mt.a)(t.getIdTokenResult()):Object($.a)(null))),this.credential=Object(oy.a)(t,f,this.authState.pipe(nt(t=>!t))).pipe(Object(ot.a)(t=>(null==t?void 0:t.user)?t:null),Object(Fy.a)(l.outsideAngular),Object(Kn.b)(l.insideAngular))}return Object(Vn.i)(this,d,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Db(Vn.c),r.Db(Vn.b,8),r.Db(r.u),r.Db(r.s),r.Db(Ny,8),r.Db(Sy,8),r.Db(Hy,8),r.Db(Ry,8),r.Db(xy,8),r.Db(Dy,8))},t.\u0275prov=Object(r.tb)({factory:function(){return new t(Object(r.Db)(Vn.c),Object(r.Db)(Vn.b,8),Object(r.Db)(r.u),Object(r.Db)(r.s),Object(r.Db)(Ny,8),Object(r.Db)(Sy,8),Object(r.Db)(Hy,8),Object(r.Db)(Ry,8),Object(r.Db)(xy,8),Object(r.Db)(Dy,8))},token:t,providedIn:"any"}),t})();function ky(t,e){return function(t,e=In.a){return new Z.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function Ly(t,e){return ky(t,e).pipe(Object(ot.a)(t=>({payload:t,type:"query"})))}function My(t,e){return Ly(t,e).pipe(Sn(void 0),Hn(),Object(ot.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function jy(t,e,n){return My(t,n).pipe(Dn((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ky(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return Ky(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ky(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),Ln(),Object(ot.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function Ky(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function Vy(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}Object(Vn.e)(Py,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);class zy{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){return t&&0!==t.length?My(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ot.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),nt(t=>t.length>0),this.afs.keepUnstableUntilFirst):My(this.query,this.afs.schedulers.outsideAngular).pipe(nt(t=>t.length>0),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Dn((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Vy(t);return jy(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Ly(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ot.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Mt.a)(this.query.get(t)).pipe(Object(Kn.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Gy(this.ref.doc(t),this.afs)}}class Gy{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=$y(n,e);return new zy(r,i,this.afs)}snapshotChanges(){return ky(this.ref,this.afs.schedulers.outsideAngular).pipe(Sn(void 0),Hn(),Object(ot.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(ot.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(Mt.a)(this.ref.get(t)).pipe(Object(Kn.b)(this.afs.schedulers.insideAngular))}}class qy{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?My(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ot.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),nt(t=>t.length>0),this.afs.keepUnstableUntilFirst):My(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(Dn((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=Vy(t);return jy(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return Ly(this.query,this.afs.schedulers.outsideAngular).pipe(Object(ot.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Mt.a)(this.query.get(t)).pipe(Object(Kn.b)(this.afs.schedulers.insideAngular))}}const Wy=new r.l("angularfire2.enableFirestorePersistence"),Xy=new r.l("angularfire2.firestore.persistenceSettings"),Jy=new r.l("angularfire2.firestore.settings"),Yy=new r.l("angularfire2.firestore.use-emulator");function $y(t,e=(t=>t)){return{query:e(t),ref:t}}let Zy=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Vn.d(o),this.keepUnstableUntilFirst=Object(Vn.h)(this.schedulers);const c=Object(Vn.g)(t,o,e);!zn.a.auth&&u&&Object(Vn.j)();const A=a;[this.firestore,this.persistenceEnabled$]=Object(Vn.f)(c.name+".firestore","AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),A&&t.useEmulator(...A),n&&!w(i)){const e=()=>{try{return Object(Mt.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(e){return"undefined"!=typeof console&&console.warn(e),Object($.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object($.a)(!1)]},[r,A,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=$y(n,e),o=this.schedulers.ngZone.run(()=>r);return new zy(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new qy(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Gy(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Db(Vn.c),r.Db(Vn.b,8),r.Db(Wy,8),r.Db(Jy,8),r.Db(r.u),r.Db(r.s),r.Db(Xy,8),r.Db(Yy,8),r.Db(Ny,8))},t.\u0275prov=Object(r.tb)({factory:function(){return new t(Object(r.Db)(Vn.c),Object(r.Db)(Vn.b,8),Object(r.Db)(Wy,8),Object(r.Db)(Jy,8),Object(r.Db)(r.u),Object(r.Db)(r.s),Object(r.Db)(Xy,8),Object(r.Db)(Yy,8),Object(r.Db)(Ny,8))},token:t,providedIn:"any"}),t})(),tv=(()=>{class t{constructor(t,e){this.http=t,this.firestore=e,this.players=[],this.firebaseURL="https://score-machine-a7750.firebaseio.com/",this.playersChanged=new Y.a,this.chipChanged=new Y.a}getAllPlayers(){return this.firestore.collection("players").snapshotChanges()}onAddNewPlayer(t){return console.log("newplayer: ",t),this.firestore.collection("players").add(t)}onCreatePlayer(t){return this.http.post(this.firebaseURL+"players.json",t).pipe(Object(On.a)(()=>this.playersChanged.next()))}onFetchPlayers(){return this.http.get(this.firebaseURL+"players.json").pipe(Object(ot.a)(t=>{const e=[];for(const n in t)t.hasOwnProperty(n)&&e.push(Object.assign(Object.assign({},t[n]),{id:n}));return e}))}onUpdatePlayer(t){return this.http.put(this.firebaseURL+"players/"+t.id+".json",t).pipe(Object(On.a)(()=>this.playersChanged.next()))}onDeleteAllPlayers(){return this.http.delete(this.firebaseURL+"players.json").pipe(Object(On.a)(()=>this.playersChanged.next()))}onDeleteSinglePlayer(t){return console.log("id",t),this.http.delete(this.firebaseURL+"players/"+t+".json").pipe(Object(On.a)(()=>this.playersChanged.next()))}onFetchChip(){return this.http.get(this.firebaseURL+"chip.json").pipe(Object(ot.a)(t=>(this.chip=t["-MMnR9l6PnlP5I7Z41Oe"],t["-MMnR9l6PnlP5I7Z41Oe"])))}onUpdateChip(t){return this.http.put(this.firebaseURL+"chip/-MMnR9l6PnlP5I7Z41Oe.json",t).pipe(Object(On.a)(()=>this.chipChanged.next()))}getChipInfo(){return this.chip}}return t.\u0275fac=function(e){return new(e||t)(r.Db(_t),r.Db(Zy))},t.\u0275prov=r.tb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ev="firebasestorage.googleapis.com",nv=function(t){function e(n,r){var i=t.call(this,sv(n),"Firebase Storage: "+r+" ("+sv(n)+")")||this;return i.customData={serverResponse:null},Object.setPrototypeOf(i,e.prototype),i}return Object(Gn.c)(e,t),e.prototype.codeEquals=function(t){return sv(t)===this.code},Object.defineProperty(e.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),e}(Xn.c),rv="canceled",iv="invalid-argument",ov="unsupported-environment";function sv(t){return"storage/"+t}function av(){return new nv("unknown","An unknown error occurred, please check the error payload for server response.")}function uv(){return new nv(rv,"User canceled the upload/download.")}function cv(){return new nv("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Av(t){return new nv(iv,t)}function lv(){return new nv("app-deleted","The Firebase app was deleted.")}function hv(t){return new nv("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function fv(t,e){return new nv("invalid-format","String does not match format '"+t+"': "+e)}function dv(t){throw new nv("internal-error","Internal error: "+t)}var pv={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},gv=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function yv(t,e){switch(t){case pv.RAW:return new gv(vv(e));case pv.BASE64:case pv.BASE64URL:return new gv(mv(t,e));case pv.DATA_URL:return new gv((n=new bv(e)).base64?mv(pv.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(n){throw fv(pv.DATA_URL,"Malformed data URL.")}return vv(e)}(n.rest),new bv(e).contentType)}var n;throw av()}function vv(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function mv(t,e){switch(t){case pv.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw fv(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case pv.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw fv(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(c){throw fv(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var bv=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw fv(pv.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),wv="running",_v="pausing",Bv="paused",Cv="success",Ev="canceling",Qv="canceled",Uv="error",Ov={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Iv(t){switch(t){case wv:case _v:case Ev:return Ov.RUNNING;case Bv:return Ov.PAUSED;case Cv:return Ov.SUCCESS;case Qv:return Ov.CANCELED;case Uv:default:return Ov.ERROR}}var Tv=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Fv=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Tv.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=Tv.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=Tv.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw dv("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw dv("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw dv("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw dv("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),Nv=function(){function t(){}return t.prototype.createXhrIo=function(){return new Fv},t}();function Sv(t){return"string"==typeof t||t instanceof String}function Hv(t){return Rv()&&t instanceof Blob}function Rv(){return"undefined"!=typeof Blob}function xv(t,e,n,r){if(r<e)throw new nv(iv,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw new nv(iv,"Invalid value for '"+t+"'. Expected "+n+" or less.")}function Dv(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Pv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Dv();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Rv())return new Blob(t);throw new nv(ov,"This browser doesn't seem to support creating Blobs")}var kv=function(){function t(t,e){var n=0,r="";Hv(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Hv(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(Rv()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(Pv.apply(null,r))}var i=e.map(function(t){return Sv(t)?yv(pv.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}(),Lv=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e){var n;try{n=t.makeFromUrl(e)}catch(r){return new t(e,"")}if(""===n.path)return n;throw new nv("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e){var n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var s=ev.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+r+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<a.length;u++){var c=a[u],A=c.regex.exec(e);if(A){var l=A[c.indices.path];l||(l=""),n=new t(A[c.indices.bucket],l),c.postModify(n);break}}if(null==n)throw function(t){return new nv("invalid-url","Invalid URL '"+t+"'.")}(e);return n},t}();function Mv(t){var e,n;try{e=JSON.parse(t)}catch(r){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function jv(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function Kv(t){return"https://"+ev+"/v0"+t}function Vv(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}function zv(t,e){return e}var Gv=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||zv}}(),qv=null;function Wv(){if(qv)return qv;var t=[];t.push(new Gv("bucket")),t.push(new Gv("generation")),t.push(new Gv("metageneration")),t.push(new Gv("name","fullPath",!0));var e=new Gv("name");e.xform=function(t,e){return function(t){return!Sv(t)||t.length<2?t:jv(t)}(e)},t.push(e);var n=new Gv("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Gv("timeCreated")),t.push(new Gv("updated")),t.push(new Gv("md5Hash",null,!0)),t.push(new Gv("cacheControl",null,!0)),t.push(new Gv("contentDisposition",null,!0)),t.push(new Gv("contentEncoding",null,!0)),t.push(new Gv("contentLanguage",null,!0)),t.push(new Gv("contentType",null,!0)),t.push(new Gv("metadata","customMetadata",!0)),qv=t}function Xv(t,e,n){var r=Mv(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Lv(t.bucket,t.fullPath);return e.makeStorageReference(n)}})}(r,t),r}(t,r,n)}function Jv(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var Yv=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function $v(t){if(!t)throw av()}function Zv(t,e){return function(n,r){var i=Xv(t,r,e);return $v(null!==i),i}}function tm(t){return function(e,n){var r;return(r=401===e.getStatus()?new nv("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new nv("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new nv("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function em(t){var e=tm(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new nv("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function nm(t,e,n){var r=Kv(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new Yv(r,"GET",Zv(t,n),i);return o.errorHandler=em(e),o}function rm(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var im=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function om(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(r){$v(!1)}return $v(!!n&&-1!==(e||["active"]).indexOf(n)),n}var sm=262144,am=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}(),um=function(){return function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o}}();function cm(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var Am=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=Wv(),this._resumable=this._shouldDoResumable(this._blob),this._state=wv,this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t.codeEquals(rv)?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition(Uv))},this._metadataErrorHandler=function(t){r._request=void 0,t.codeEquals(rv)?r.completeTransitions_():(r._error=t,r._transition(Uv))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){this._state===wv&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;this._ref.storage.getAuthToken().then(function(n){switch(e._state){case wv:t(n);break;case Ev:e._transition(Qv);break;case _v:e._transition(Bv)}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=rm(e,r,i),a={name:s.fullPath},u=Kv(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},A=Jv(s,n),l=new Yv(u,"POST",function(t){var e;om(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(n){$v(!1)}return $v(Sv(e)),e},t.maxUploadRetryTime);return l.urlParams=a,l.headers=c,l.body=A,l.errorHandler=tm(e),l}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n){var r=function(t,e,n,r){var i=new Yv(n,"POST",function(t){var e=om(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(o){$v(!1)}n||$v(!1);var i=Number(n);return $v(!isNaN(i)),new im(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=tm(e),i}(t._ref.storage,t._ref._location,e,t._blob),i=t._ref.storage.makeRequest(r,n);t._request=i,i.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=sm*this._chunkMultiplier,n=new im(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i){var o;try{o=function(t,e,n,r,i,o,s,a){var u=new im(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new nv("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,A=c;i>0&&(A=Math.min(A,i));var l=u.current,h={"X-Goog-Upload-Command":A===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},f=r.slice(l,l+A);if(null===f)throw cv();var d=new Yv(n,"POST",function(t,n){var i,s=om(t,["active","final"]),a=u.current+A,c=r.size();return i="final"===s?Zv(e,o)(t,n):null,new im(a,c,"final"===s,i)},e.maxUploadRetryTime);return d.headers=h,d.body=f.uploadData(),d.progressCallback=a||null,d.errorHandler=tm(t),d}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(a){return t._error=a,void t._transition(Uv)}var s=t._ref.storage.makeRequest(o,i);t._request=s,s.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition(Cv)):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){sm*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e){var n=nm(t._ref.storage,t._ref._location,t._mappings),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition(Cv)},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e){var n=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=rm(e,r,i),c=Jv(u,n),A=kv.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===A)throw cv();var l={name:u.fullPath},h=Kv(o),f=t.maxUploadRetryTime,d=new Yv(h,"POST",Zv(t,n),f);return d.urlParams=l,d.headers=s,d.body=A.uploadData(),d.errorHandler=tm(e),d}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),r=t._ref.storage.makeRequest(n,e);t._request=r,r.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition(Cv)},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case Ev:case _v:this._state=t,void 0!==this._request&&this._request.cancel();break;case wv:var e=this._state===Bv;this._state=t,e&&(this._notifyObservers(),this._start());break;case Bv:this._state=t,this._notifyObservers();break;case Qv:this._error=uv(),this._state=t,this._notifyObservers();break;case Uv:case Cv:this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case _v:this._transition(Bv);break;case Ev:this._transition(Qv);break;case wv:this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Iv(this._state);return new um(this._transferred,this._blob.size(),t,this._metadata,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new am(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Iv(this._state)){case Ov.SUCCESS:cm(this._resolve.bind(null,this.snapshot))();break;case Ov.CANCELED:case Ov.ERROR:cm(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Iv(this._state)){case Ov.RUNNING:case Ov.PAUSED:t.next&&cm(t.next.bind(t,this.snapshot))();break;case Ov.SUCCESS:t.complete&&cm(t.complete.bind(t))();break;case Ov.CANCELED:case Ov.ERROR:t.error&&cm(t.error.bind(t,this._error))();break;default:t.error&&cm(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t=this._state===Bv||this._state===_v;return t&&this._transition(wv),t},t.prototype.pause=function(){var t=this._state===wv;return t&&this._transition(_v),t},t.prototype.cancel=function(){var t=this._state===wv||this._state===_v;return t&&this._transition(Ev),t},t}(),lm=function(){function t(t,e){this._service=t,this._location=e instanceof Lv?e:Lv.makeFromUrl(e)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype.newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Lv(this._location.bucket,"");return this.newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return jv(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Lv(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw hv(t)},t}();function hm(t){var e={prefixes:[],items:[]};return fm(t,e).then(function(){return e})}function fm(t,e,n){return Object(Gn.b)(this,void 0,void 0,function(){var r,i,o;return Object(Gn.d)(this,function(s){switch(s.label){case 0:return[4,dm(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,fm(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function dm(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r,i;return Object(Gn.d)(this,function(o){switch(o.label){case 0:return null!=e&&"number"==typeof e.maxResults&&xv("options.maxResults",1,1e3,e.maxResults),[4,t.storage.getAuthToken()];case 1:return n=o.sent(),i=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=Kv(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime,u=new Yv(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=Mv(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new Lv(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t.makeStorageReference(new Lv(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return $v(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=tm(e),u}(t.storage,t._location,"/",(r=e||{}).pageToken,r.maxResults),[2,t.storage.makeRequest(i,n).getPromise()]}})})}function pm(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Lv(t._location.bucket,n);return new lm(t.storage,r)}var gm=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),ym=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate),this._snapshot=new gm(this._delegate.snapshot,this,this._ref)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshot},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new gm(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new gm(t,i,i._ref))}:{next:e.next?function(t){return e.next(new gm(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),vm=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new mm(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new mm(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),mm=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(pm(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new ym(function(t,e,n){return void 0===n&&(n=null),t._throwIfRoot("uploadBytesResumable"),new Am(t,new kv(e),n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){return void 0===e&&(e=pv.RAW),this._throwIfRoot("putString"),new ym(function(t,e,n,r){void 0===n&&(n=pv.RAW),t._throwIfRoot("putString");var i=yv(n,e),o=Object(Gn.a)({},r);return null==o.contentType&&null!=i.contentType&&(o.contentType=i.contentType),new Am(t,new kv(i.data,!0),o)}(this._delegate,t,e,n),this)},t.prototype.listAll=function(){var t=this;return hm(this._delegate).then(function(e){return new vm(e,t.storage)})},t.prototype.list=function(t){var e=this;return dm(this._delegate,t).then(function(t){return new vm(t,e.storage)})},t.prototype.getMetadata=function(){return function(t){return Object(Gn.b)(this,void 0,void 0,function(){var e,n;return Object(Gn.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getMetadata"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=nm(t.storage,t._location,Wv()),[2,t.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Object(Gn.b)(this,void 0,void 0,function(){var n,r;return Object(Gn.d)(this,function(i){switch(i.label){case 0:return t._throwIfRoot("updateMetadata"),[4,t.storage.getAuthToken()];case 1:return n=i.sent(),r=function(t,e,n,r){var i=Kv(e.fullServerUrl()),o=Jv(n,r),s=t.maxOperationRetryTime,a=new Yv(i,"PATCH",Zv(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=em(e),a}(t.storage,t._location,e,Wv()),[2,t.storage.makeRequest(r,n).getPromise()]}})})}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return Object(Gn.b)(this,void 0,void 0,function(){var e,n;return Object(Gn.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("getDownloadURL"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e,n){var r=Kv(e.fullServerUrl()),i=t.maxOperationRetryTime,o=new Yv(r,"GET",function(t,e){return function(n,r){var i=Xv(t,r,e);return $v(null!==i),function(t,e){var n=Mv(e);if(null===n)return null;if(!Sv(n.downloadTokens))return null;var r=n.downloadTokens;if(0===r.length)return null;var i=encodeURIComponent;return r.split(",").map(function(e){var n=t.fullPath;return Kv("/b/"+i(t.bucket)+"/o/"+i(n))+Vv({alt:"media",token:e})})[0]}(i,r)}}(t,n),i);return o.errorHandler=em(e),o}(t.storage,t._location,Wv()),[2,t.storage.makeRequest(n,e).getPromise().then(function(t){if(null===t)throw new nv("no-download-url","The given file does not have any download URLs.");return t})]}})})}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return Object(Gn.b)(this,void 0,void 0,function(){var e,n;return Object(Gn.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("deleteObject"),[4,t.storage.getAuthToken()];case 1:return e=r.sent(),n=function(t,e){var n=Kv(e.fullServerUrl()),r=new Yv(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=em(e),r}(t.storage,t._location),[2,t.storage.makeRequest(n,e).getPromise()]}})})}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw hv(t)},t}(),bm=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}(),wm=function(){function t(t,e,n,r,i,o,s,a,u,c,A){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=A,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(u){o(u)}else null!==s?((r=av()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?lv():uv():new nv("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new _m(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function A(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function l(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new _m(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===Tv.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new _m(s,n))}else{var a=n.getErrorCode()===Tv.ABORT;e(!1,new _m(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(h,u())},e)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)A.call.apply(A,Object(Gn.g)([null,t],e));else{var r;u()||s?A.call.apply(A,Object(Gn.g)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),l(r))}}var f=!1;function d(t){f||(f=!0,c||(null!==o?(t||(a=2),clearTimeout(o),l(0)):t||(a=1)))}return l(0),setTimeout(function(){s=!0,d(!0)},r),d}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),_m=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function Bm(t){return/^[A-Za-z]+:\/\//.test(t)}function Cm(t,e){if(t instanceof Om){var n=t;if(null==n._bucket)throw new nv("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new lm(n,n._bucket);return null!=e?Cm(r,e):r}if(void 0!==e){if(e.includes(".."))throw Av('`path` param cannot contain ".."');return pm(t,e)}return t}function Em(t,e){if(e&&Bm(e)){if(t instanceof Om)return new lm(t,e);throw Av("To use ref(service, url), the first argument must be a Storage instance.")}return Cm(t,e)}var Qm,Um,Om=function(){function t(t,e,n,r){var i,o;this.app=t,this._authProvider=e,this._pool=n,this._url=r,this._bucket=null,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Lv.makeFromBucketSpec(r):null==(o=null==(i=this.app.options)?void 0:i.storageBucket)?null:Lv.makeFromBucketSpec(o)}return Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){xv("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){xv("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype.getAuthToken=function(){return Object(Gn.b)(this,void 0,void 0,function(){var t,e;return Object(Gn.d)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype.makeStorageReference=function(t){return new lm(this,t)},t.prototype.makeRequest=function(t,e){var n=this;if(this._deleted)return new bm(lv());var r=function(t,e,n,r){var i=Vv(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(s,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(s,n),function(t){t["X-Firebase-Storage-Version"]="webjs/"+(void 0!==qn.a?qn.a.SDK_VERSION:"AppManager")}(s),new wm(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}(t,this._appId,e,this._pool);return this._requests.add(r),r.getPromise().then(function(){return n._requests.delete(r)},function(){return n._requests.delete(r)}),r},t}(),Im=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Bm(t))throw Av("ref() expected a child path but got a URL, use refFromURL instead.");return new mm(Em(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Bm(t))throw Av("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Lv.makeFromUrl(t)}catch(e){throw Av("refFromUrl() expected a valid full URL but got an invalid one.")}return new mm(Em(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t}();function Tm(t){const e=function(t){return new Z.a(e=>{const n=t=>e.next(t);t.on("state_changed",n,r=>{n(t.snapshot),(t=>{e.error(t)})(r)},()=>{n(t.snapshot),e.complete()})}).pipe(py({bufferSize:1,refCount:!1}))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(ot.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function Fm(t,e,n){return{getDownloadURL:()=>Object($.a)(void 0).pipe(Object(Kn.b)(e.outsideAngular),ay(()=>t.getDownloadURL()),n),getMetadata:()=>Object($.a)(void 0).pipe(Object(Kn.b)(e.outsideAngular),ay(()=>t.getMetadata()),n),delete:()=>Object(Mt.a)(t.delete()),child:r=>Fm(t.child(r),e,n),updateMetadata:e=>Object(Mt.a)(t.updateMetadata(e)),put:(e,n)=>Tm(t.put(e,n)),putString:(e,n,r)=>Tm(t.putString(e,n,r)),listAll:()=>Object(Mt.a)(t.listAll())}}Um={TaskState:Ov,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:pv,Storage:Om,Reference:mm},(Qm=qn.a).INTERNAL.registerComponent(new $s.a("storage",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new Im(n,new Om(n,r,new Nv,e))},"PUBLIC").setServiceProps(Um).setMultipleInstances(!0)),Qm.registerVersion("@firebase/storage","0.4.2");const Nm=new r.l("angularfire2.storageBucket"),Sm=new r.l("angularfire2.storage.maxUploadRetryTime"),Hm=new r.l("angularfire2.storage.maxOperationRetryTime");let Rm=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Vn.d(i),this.keepUnstableUntilFirst=Object(Vn.h)(this.schedulers);const a=Object(Vn.g)(t,i,e);this.storage=Object(Vn.f)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return Fm(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return Fm(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return Fm(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Db(Vn.c),r.Db(Vn.b,8),r.Db(Nm,8),r.Db(r.u),r.Db(r.s),r.Db(Sm,8),r.Db(Hm,8))},t.\u0275prov=Object(r.tb)({factory:function(){return new t(Object(r.Db)(Vn.c),Object(r.Db)(Vn.b,8),Object(r.Db)(Nm,8),Object(r.Db)(r.u),Object(r.Db)(r.s),Object(r.Db)(Sm,8),Object(r.Db)(Hm,8))},token:t,providedIn:"any"}),t})(),xm=(()=>{class t{}return t.\u0275mod=r.vb({type:t}),t.\u0275inj=r.ub({factory:function(e){return new(e||t)}}),t})(),Dm=(()=>{class t{}return t.\u0275mod=r.vb({type:t}),t.\u0275inj=r.ub({factory:function(e){return new(e||t)},providers:[Rm],imports:[xm]}),t})();function Pm(t,e){if(1&t){const t=r.Bb();r.Ab(0,"button",37),r.Gb("click",function(){return r.Lb(t),r.Hb().onDecreaseBuyin()}),r.Pb(1,"-"),r.zb()}}function km(t,e){if(1&t&&(r.Ab(0,"div",38),r.Pb(1),r.zb()),2&t){const t=r.Hb();r.ob(1),r.Qb(t.player.buyin)}}function Lm(t,e){if(1&t&&(r.Ab(0,"div",39),r.Pb(1),r.zb()),2&t){const t=r.Hb();r.ob(1),r.Qb(t.player.buyin)}}function Mm(t,e){if(1&t){const t=r.Bb();r.Ab(0,"button",37),r.Gb("click",function(){return r.Lb(t),r.Hb().onIncreaseBuyin()}),r.Pb(1,"+"),r.zb()}}function jm(t,e){if(1&t){const t=r.Bb();r.Ab(0,"input",40),r.Gb("ngModelChange",function(e){return r.Lb(t),r.Hb().remaining=e})("keyup",function(){return r.Lb(t),r.Hb().onUpdateFinal()}),r.zb()}if(2&t){const t=r.Hb();r.Ib("ngModel",t.remaining)}}function Km(t,e){if(1&t&&(r.Ab(0,"div",39),r.Pb(1),r.zb()),2&t){const t=r.Hb();r.ob(1),r.Qb(t.remaining)}}function Vm(t,e){if(1&t){const t=r.Bb();r.Ab(0,"button",41),r.Gb("click",function(){return r.Lb(t),r.Hb().onBill()}),r.Pb(1,"Bill"),r.zb()}}function zm(t,e){if(1&t&&(r.Ab(0,"button",42),r.Pb(1,"Check Record"),r.zb()),2&t){const t=r.Hb();r.pb("data-target","#"+t.player.id)}}function Gm(t,e){if(1&t&&(r.Ab(0,"button",43),r.Pb(1,"Check Record"),r.zb()),2&t){const t=r.Hb();r.pb("data-target","#"+t.player.id)}}function qm(t,e){if(1&t){const t=r.Bb();r.Ab(0,"button",44),r.Gb("click",function(){return r.Lb(t),r.Hb().onDeletePlayer()}),r.Pb(1,"Delete Player"),r.zb()}if(2&t){const t=r.Hb();r.Ib("disabled",!t.isAuthenticated)}}function Wm(t,e){if(1&t&&(r.Ab(0,"div",10),r.Ab(1,"div",33),r.Pb(2),r.zb(),r.Ab(3,"div",33),r.Pb(4),r.zb(),r.zb()),2&t){const t=e.$implicit;r.ob(2),r.Qb(t.split("@")[0]),r.ob(2),r.Qb(t.split("@")[1])}}const Xm=function(t,e){return{won:t,lose:e}};let Jm=(()=>{class t{constructor(t,e){this.texasService=t,this.authService=e,this.finalChipValue="",this.finalValue="",this.hasWon=0,this.chip={totalChipValue:0,totalChips:0,singleChipValue:"Invalid"},this.isAuthenticated=!1}ngOnInit(){this.isAuthenticated=this.authService.getStatus(),this.authSubscription=this.authService.authenticationChanged.subscribe(()=>{this.isAuthenticated=this.authService.getStatus()}),this.chip=this.texasService.getChipInfo(),this.chipChangedSubscription=this.texasService.chipChanged.subscribe(()=>{this.chip=this.texasService.getChipInfo()}),this.remaining=this.player.remaining,this.onUpdateFinal()}ngOnDestroy(){this.authSubscription.unsubscribe()}onUpdatePlayer(){this.texasService.onUpdatePlayer(this.player).subscribe(t=>console.log("after update single player",t))}onDeletePlayer(){this.texasService.onDeleteSinglePlayer(this.player.id).subscribe(t=>console.log("after delete single player",t))}onIncreaseBuyin(){this.player.buyin=this.player.buyin+1,this.player.record.push("Buy In at@"+(new Date).toLocaleString()),this.onUpdatePlayer(),this.onUpdateFinal()}onDecreaseBuyin(){this.player.buyin>0&&(this.player.buyin=this.player.buyin-1,this.player.record.push("Remove Buy In at@"+(new Date).toLocaleString()),this.onUpdatePlayer(),this.onUpdateFinal())}onUpdateFinal(){console.log("onUpdateFinal is called: ",this.chip),"Invalid"!=this.chip.singleChipValue&&(this.finalChipValue=this.player.remaining-this.chip.totalChips*(1+this.player.buyin),this.finalValue=(this.finalChipValue*this.chip.singleChipValue).toFixed(2),this.hasWon=this.finalChipValue>0?1:this.finalChipValue<0?-1:0)}onBill(){this.player.remaining=this.remaining,this.onUpdateFinal(),this.player.final=this.finalValue,this.onUpdatePlayer()}getChipInfo(){this.texasService.onFetchChip().subscribe(t=>this.chip=t)}}return t.\u0275fac=function(e){return new(e||t)(r.xb(tv),r.xb(Pt))},t.\u0275cmp=r.rb({type:t,selectors:[["app-player"]],inputs:{player:"player"},decls:64,vars:24,consts:[[1,"col-md","playerCardContainer","mb-4"],[1,"card","playerCard",2,"width","17.5rem"],["width","auto","height","200px","alt","Card image cap",1,"card-img-top",3,"src"],[1,"card-body","p-2"],[1,"card-title","text-center"],[1,"container","text-left"],[1,"row","mb-3"],[1,"col-5"],[1,"col-7","form-control","text-center"],[1,"col-7"],[1,"row"],["type","button","class","col btn btn-outline-dark","style","border-radius: 10%; font-weight: bolder;",3,"click",4,"ngIf"],["class","col-5 form-control text-center ml-1 mr-1",4,"ngIf"],["class","col form-control text-center",4,"ngIf"],["type","button","class"," col btn btn-outline-dark","style","border-radius: 10%; font-weight: bolder;",3,"click",4,"ngIf"],["type","number","class","col form-control text-center mr-1",3,"ngModel","ngModelChange","keyup",4,"ngIf"],["class","col btn btn-outline-dark",3,"click",4,"ngIf"],[1,"col","form-control","text-center","mr-1"],[1,"col","form-control","text-center",3,"ngClass"],["class","col btn btn-outline-dark mr-1","data-toggle","modal",4,"ngIf"],["class","col btn btn-outline-dark","data-toggle","modal",4,"ngIf"],["class","col btn btn-outline-danger",3,"disabled","click",4,"ngIf"],["tabindex","-1","role","dialog","aria-labelledby","playerRecordLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","playerRecordLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"disabled"],["closeModal",""],["aria-hidden","true"],[1,"modal-body"],[1,"container"],[1,"row","mb-2"],[1,"col"],["class","row",4,"ngFor","ngForOf"],[1,"modal-footer","mt-4"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["type","button",1,"col","btn","btn-outline-dark",2,"border-radius","10%","font-weight","bolder",3,"click"],[1,"col-5","form-control","text-center","ml-1","mr-1"],[1,"col","form-control","text-center"],["type","number",1,"col","form-control","text-center","mr-1",3,"ngModel","ngModelChange","keyup"],[1,"col","btn","btn-outline-dark",3,"click"],["data-toggle","modal",1,"col","btn","btn-outline-dark","mr-1"],["data-toggle","modal",1,"col","btn","btn-outline-dark"],[1,"col","btn","btn-outline-danger",3,"disabled","click"]],template:function(t,e){1&t&&(r.Ab(0,"div",0),r.Ab(1,"div",1),r.yb(2,"img",2),r.Ab(3,"div",3),r.Ab(4,"h5",4),r.Pb(5),r.zb(),r.yb(6,"hr"),r.Ab(7,"div",5),r.Ab(8,"div",6),r.Ab(9,"div",7),r.Pb(10,"Start"),r.zb(),r.Ab(11,"div",8),r.Pb(12),r.zb(),r.zb(),r.Ab(13,"div",6),r.Ab(14,"div",7),r.Pb(15,"Buyin"),r.zb(),r.Ab(16,"div",9),r.Ab(17,"div",10),r.Ob(18,Pm,2,0,"button",11),r.Ob(19,km,2,1,"div",12),r.Ob(20,Lm,2,1,"div",13),r.Ob(21,Mm,2,0,"button",14),r.zb(),r.zb(),r.zb(),r.Ab(22,"div",6),r.Ab(23,"div",7),r.Pb(24,"Remaining"),r.zb(),r.Ab(25,"div",9),r.Ab(26,"div",10),r.Ob(27,jm,1,1,"input",15),r.Ob(28,Km,2,1,"div",13),r.Ob(29,Vm,2,0,"button",16),r.zb(),r.zb(),r.zb(),r.Ab(30,"div",6),r.Ab(31,"div",7),r.Pb(32,"Final"),r.zb(),r.Ab(33,"div",9),r.Ab(34,"div",10),r.Ab(35,"div",17),r.Pb(36),r.zb(),r.Ab(37,"div",18),r.Pb(38),r.zb(),r.zb(),r.zb(),r.zb(),r.Ab(39,"div",10),r.Ob(40,zm,2,1,"button",19),r.Ob(41,Gm,2,1,"button",20),r.Ob(42,qm,2,1,"button",21),r.zb(),r.zb(),r.zb(),r.zb(),r.zb(),r.Ab(43,"div",22),r.Ab(44,"div",23),r.Ab(45,"div",24),r.Ab(46,"div",25),r.Ab(47,"h5",26),r.Pb(48),r.zb(),r.Ab(49,"button",27,28),r.Ab(51,"span",29),r.Pb(52,"\xd7"),r.zb(),r.zb(),r.zb(),r.Ab(53,"div",30),r.Ab(54,"div",31),r.Ab(55,"div",32),r.Ab(56,"div",33),r.Pb(57,"Total Buyin Times"),r.zb(),r.Ab(58,"div",33),r.Pb(59),r.zb(),r.zb(),r.Ob(60,Wm,5,2,"div",34),r.zb(),r.Ab(61,"div",35),r.Ab(62,"button",36),r.Pb(63,"Ok"),r.zb(),r.zb(),r.zb(),r.zb(),r.zb(),r.zb()),2&t&&(r.ob(2),r.Ib("src",e.player.imageUrl,r.Mb),r.ob(3),r.Qb(e.player.name),r.ob(7),r.Qb(e.chip.totalChips),r.ob(6),r.Ib("ngIf",e.isAuthenticated),r.ob(1),r.Ib("ngIf",e.isAuthenticated),r.ob(1),r.Ib("ngIf",!e.isAuthenticated),r.ob(1),r.Ib("ngIf",e.isAuthenticated),r.ob(6),r.Ib("ngIf",e.isAuthenticated),r.ob(1),r.Ib("ngIf",!e.isAuthenticated),r.ob(1),r.Ib("ngIf",e.isAuthenticated),r.ob(7),r.Qb(e.finalChipValue),r.ob(1),r.Ib("ngClass",r.Jb(21,Xm,e.hasWon>0,e.hasWon<0)),r.ob(1),r.Qb(e.finalValue),r.ob(2),r.Ib("ngIf",e.isAuthenticated),r.ob(1),r.Ib("ngIf",!e.isAuthenticated),r.ob(1),r.Ib("ngIf",e.isAuthenticated),r.ob(1),r.pb("id",e.player.id),r.ob(5),r.Rb("",e.player.name,"'s Buyin Record"),r.ob(1),r.Ib("disabled",!e.isAuthenticated),r.ob(10),r.Qb(e.player.buyin),r.ob(1),r.Ib("ngForOf",e.player.record))},directives:[y,f,p,Ne,Wt,ge,sn],styles:["input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.playerCard[_ngcontent-%COMP%]:hover{box-shadow:0 7px 20px rgb(0 0 0/45%)}.won[_ngcontent-%COMP%]{background-color:#1bda84;color:#fff}.lose[_ngcontent-%COMP%]{background-color:#fe5f55;color:#fff}"]}),t})();function Ym(t,e){1&t&&(r.Ab(0,"div",2),r.Ab(1,"div",28),r.Ab(2,"h4",29),r.Pb(3,"Please log in to start a game"),r.zb(),r.zb(),r.zb())}function $m(t,e){if(1&t){const t=r.Bb();r.Ab(0,"button",30),r.Gb("click",function(){return r.Lb(t),r.Hb().onUpdateChipInfo()}),r.Pb(1,"Save Chip Info"),r.zb()}if(2&t){const t=r.Hb();r.Ib("disabled","Invalid"===t.chip.singleChipValue)}}function Zm(t,e){if(1&t&&(r.Ab(0,"button",31),r.Pb(1),r.zb()),2&t){const t=r.Hb();r.ob(1),r.Rb(" ",0===t.players.length?"Start A Game":"Add Player"," ")}}function tb(t,e){if(1&t){const t=r.Bb();r.Ab(0,"button",32),r.Gb("click",function(){return r.Lb(t),r.Hb().onClearAllPlayers()}),r.Pb(1,"Clear All Players"),r.zb()}}function eb(t,e){if(1&t){const t=r.Bb();r.Ab(0,"button",33),r.Gb("click",function(){return r.Lb(t),r.Hb().downloadPDF()}),r.Pb(1,"Print"),r.zb()}}function nb(t,e){1&t&&r.yb(0,"hr")}function rb(t,e){if(1&t){const t=r.Bb();r.Ab(0,"input",43),r.Gb("ngModelChange",function(e){return r.Lb(t),r.Hb(2).chip.totalChipValue=e})("keyup",function(){return r.Lb(t),r.Hb(2).updateSingleChipValue()}),r.zb()}if(2&t){const t=r.Hb(2);r.Ib("ngModel",t.chip.totalChipValue)}}function ib(t,e){if(1&t&&(r.Ab(0,"div",44),r.Pb(1),r.zb()),2&t){const t=r.Hb(2);r.ob(1),r.Qb(t.chip.totalChipValue)}}function ob(t,e){if(1&t){const t=r.Bb();r.Ab(0,"input",45),r.Gb("ngModelChange",function(e){return r.Lb(t),r.Hb(2).chip.totalChips=e})("keyup",function(){return r.Lb(t),r.Hb(2).updateSingleChipValue()}),r.zb()}if(2&t){const t=r.Hb(2);r.Ib("ngModel",t.chip.totalChips)}}function sb(t,e){if(1&t&&(r.Ab(0,"div",46),r.Pb(1),r.zb()),2&t){const t=r.Hb(2);r.ob(1),r.Qb(t.chip.totalChips)}}function ab(t,e){if(1&t&&(r.Ab(0,"div",2),r.Ab(1,"div",34),r.Ab(2,"div",35),r.Ab(3,"div",36),r.Ab(4,"span",37),r.Pb(5,"Total Chip Value"),r.zb(),r.zb(),r.Ob(6,rb,1,1,"input",38),r.Ob(7,ib,2,1,"div",39),r.zb(),r.zb(),r.Ab(8,"div",34),r.Ab(9,"div",35),r.Ab(10,"div",36),r.Ab(11,"span",37),r.Pb(12,"Total Chips"),r.zb(),r.zb(),r.Ob(13,ob,1,1,"input",40),r.Ob(14,sb,2,1,"div",41),r.zb(),r.zb(),r.Ab(15,"div",34),r.Ab(16,"div",35),r.Ab(17,"div",36),r.Ab(18,"span",37),r.Pb(19,"Single Chip Value"),r.zb(),r.zb(),r.Ab(20,"div",42),r.Pb(21),r.zb(),r.zb(),r.zb(),r.zb()),2&t){const t=r.Hb();r.ob(6),r.Ib("ngIf",t.isAuthenticated),r.ob(1),r.Ib("ngIf",!t.isAuthenticated),r.ob(6),r.Ib("ngIf",t.isAuthenticated),r.ob(1),r.Ib("ngIf",!t.isAuthenticated),r.ob(7),r.Qb(t.chip.singleChipValue)}}function ub(t,e){1&t&&r.yb(0,"app-player",47),2&t&&r.Ib("player",e.$implicit)}function cb(t,e){1&t&&r.yb(0,"hr")}const Ab=function(t,e){return{correct:t,wrong:e}};function lb(t,e){if(1&t){const t=r.Bb();r.Ab(0,"div",2),r.Ab(1,"div",28),r.Ab(2,"button",48),r.Gb("click",function(){return r.Lb(t),r.Hb().calculateFinalBalance()}),r.Pb(3),r.zb(),r.zb(),r.zb()}if(2&t){const t=r.Hb();r.ob(2),r.Ib("ngClass",r.Jb(3,Ab,0===t.finalBalance,t.finalBalance>0||t.finalBalance<0)),r.ob(1),r.Sb("Calculate Balance ",null!=t.finalBalance?":":""," ",t.finalBalance," ")}}function hb(t,e){if(1&t){const t=r.Bb();r.Ab(0,"img",49),r.Gb("click",function(){return r.Lb(t),r.Hb(),r.Kb(32).click()}),r.zb()}if(2&t){const t=r.Hb();r.Ib("src",t.imageSrc,r.Mb)}}let fb=(()=>{class t{constructor(t,e,n){this.texasService=t,this.authService=e,this.firebaseStorage=n,this.players=[],this.chip={totalChipValue:0,totalChips:0,singleChipValue:"Invalid"},this.finalBalance=null,this.isAuthenticated=!1,this.defaultPlayerImage="./assets/img/player.jpg",this.imageSrc=this.defaultPlayerImage,this.selectedImage=null,this.isSubmitted=!1,this.newPlayerForm=new Ie({id:new Oe(""),name:new Oe("",te.required),buyin:new Oe(0),remaining:new Oe(0),final:new Oe(0),record:new Oe([]),imageUrl:new Oe("",te.required)})}downloadPDF(){var t=document.getElementById("allPlayersContainer");Un()(t).then(t=>{var e=108*t.height/t.width;const n=t.toDataURL("image/png");let r=new jsPDF("p","mm","a4");r.addImage(n,"PNG",0,0,108,e),r.save("newPDF.pdf")})}showPreview(t){if(t.target.files&&t.target.files[0]){const e=new FileReader;e.onload=t=>this.imageSrc=t.target.result,e.readAsDataURL(t.target.files[0]),this.selectedImage=t.target.files[0]}else this.imageSrc="./assets/img/player.jpg",this.selectedImage=null}onReactiveSubmit(t){if(this.isSubmitted=!0,this.newPlayerForm.valid){console.log(t);const n=`players/${t.name}_${(new Date).getTime()}`,r=this.firebaseStorage.ref(n);this.firebaseStorage.upload(n,this.selectedImage).snapshotChanges().pipe((e=()=>{r.getDownloadURL().subscribe(e=>{this.texasService.onCreatePlayer({id:Date(),name:t.name,buyin:0,remaining:0,final:0,record:["Join at@"+(new Date).toLocaleString()],imageUrl:e}).subscribe(t=>console.log(t))})},t=>t.lift(new Cn(e)))).subscribe(),this.resetForm()}var e}get formControls(){return this.newPlayerForm.controls}resetForm(){this.newPlayerForm.reset(),this.newPlayerForm.setValue({id:"",name:"",buyin:0,remaining:0,final:0,record:[],imageUrl:""}),this.imageSrc=this.defaultPlayerImage,this.selectedImage=null,this.isSubmitted=!1}ngOnInit(){this.resetForm(),this.isAuthenticated=this.authService.getStatus(),this.authSubscription=this.authService.authenticationChanged.subscribe(()=>{this.isAuthenticated=this.authService.getStatus()}),this.texasService.onFetchChip().subscribe(t=>this.chip=t),console.log(this.chip),this.chip.totalChipValue>0&&this.chip.totalChips>0&&null!=this.chip.totalChipValue&&null!=this.chip.totalChips||(this.chip.singleChipValue="Invalid"),this.getAllPlayers(),this.playersChangedSubscription=this.texasService.playersChanged.subscribe(()=>{this.getAllPlayers()})}ngOnDestroy(){this.playersChangedSubscription.unsubscribe(),this.authSubscription.unsubscribe()}getAllPlayers(){this.texasService.onFetchPlayers().subscribe(t=>this.players=t)}onClearAllPlayers(){this.texasService.onDeleteAllPlayers().subscribe(t=>console.log(t)),this.getAllPlayers(),this.chip.totalChipValue=0,this.chip.totalChips=0,this.chip.singleChipValue="Invalid"}onSubmit(t){this.texasService.onCreatePlayer({id:Date(),name:t.value.name,buyin:0,remaining:0,final:0,record:["Join at@"+(new Date).toLocaleString()],imageUrl:"./assets/img/player.jpg"}).subscribe(t=>console.log(t)),console.log(this.totalChipValue)}updateSingleChipValue(){this.chip.singleChipValue=this.chip.totalChipValue>0&&this.chip.totalChips>0&&null!=this.chip.totalChipValue&&null!=this.chip.totalChips?(this.chip.totalChipValue/this.chip.totalChips).toFixed(2):"Invalid"}onUpdateChipInfo(){this.texasService.onUpdateChip({totalChipValue:this.chip.totalChipValue,totalChips:this.chip.totalChips,singleChipValue:this.chip.singleChipValue}).subscribe(t=>console.log(t))}calculateFinalBalance(){this.finalBalance=0,this.players.forEach(t=>{t.final&&(this.finalBalance=this.finalBalance+parseFloat(t.final))})}}return t.\u0275fac=function(e){return new(e||t)(r.xb(tv),r.xb(Pt),r.xb(Rm))},t.\u0275cmp=r.rb({type:t,selectors:[["app-texas-poker"]],decls:40,vars:13,consts:[[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"col-lg","mb-1"],["type","button","class","btn btn-success btn-block",3,"disabled","click",4,"ngIf"],["type","button","class","btn btn-success addPlayer btn-block","data-toggle","modal","data-target","#addPlayer","data-whatever","@mdo",4,"ngIf"],["class","btn btn-danger btn-block",3,"click",4,"ngIf"],["class","btn btn-primary btn-block",3,"click",4,"ngIf"],[4,"ngIf"],["id","allPlayersContainer",1,"row",2,"justify-content","space-around"],[3,"player",4,"ngFor","ngForOf"],["id","addPlayer","tabindex","-1","role","dialog","aria-labelledby","addPlayerLabel","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header","text-center"],["id","addPlayerLabel",1,"modal-title","m-auto"],[1,"modal-body"],[3,"formGroup","submit"],[1,"form-group"],["type","text","id","player-name","formControlName","name","placeholder","Enter Your Name",1,"form-control","text-center"],["for","player-image",1,"col-form-label","btn","btn-outline-dark","btn-block"],["type","file","accept","image/*","id","player-image","formControlName","imageUrl",1,"form-control",3,"change","click"],["imageInput",""],[1,"preview-image-container","mb-3"],["class","preview-image",3,"src","click",4,"ngIf"],[1,"modal-footer","form-group"],["type","submit",1,"btn","btn-success",3,"disabled"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],[1,"col"],[1,"text-center"],["type","button",1,"btn","btn-success","btn-block",3,"disabled","click"],["type","button","data-toggle","modal","data-target","#addPlayer","data-whatever","@mdo",1,"btn","btn-success","addPlayer","btn-block"],[1,"btn","btn-danger","btn-block",3,"click"],[1,"btn","btn-primary","btn-block",3,"click"],[1,"col-lg"],[1,"input-group","input-group-lg","mb-3"],[1,"input-group-prepend"],["id","inputGroup-sizing-lg",1,"input-group-text",2,"min-width","12rem"],["type","number","class","form-control text-center","aria-label","Total Chip Value","aria-describedby","inputGroup-sizing-lg",3,"ngModel","ngModelChange","keyup",4,"ngIf"],["class","form-control text-center","aria-label","Total Chip Value","aria-describedby","inputGroup-sizing-lg",4,"ngIf"],["type","number","class","form-control text-center","aria-label","Total Chips","aria-describedby","inputGroup-sizing-lg",3,"ngModel","ngModelChange","keyup",4,"ngIf"],["class","form-control text-center","aria-label","Total Chips","aria-describedby","inputGroup-sizing-lg",4,"ngIf"],["aria-label","Single Chip Value","aria-describedby","inputGroup-sizing-lg",1,"form-control","text-center"],["type","number","aria-label","Total Chip Value","aria-describedby","inputGroup-sizing-lg",1,"form-control","text-center",3,"ngModel","ngModelChange","keyup"],["aria-label","Total Chip Value","aria-describedby","inputGroup-sizing-lg",1,"form-control","text-center"],["type","number","aria-label","Total Chips","aria-describedby","inputGroup-sizing-lg",1,"form-control","text-center",3,"ngModel","ngModelChange","keyup"],["aria-label","Total Chips","aria-describedby","inputGroup-sizing-lg",1,"form-control","text-center"],[3,"player"],[1,"btn","btn-primary","btn-dark","btn-block",3,"ngClass","click"],[1,"preview-image",3,"src","click"]],template:function(t,e){if(1&t){const t=r.Bb();r.Ab(0,"div",0),r.Ob(1,Ym,4,0,"div",1),r.Ab(2,"div",2),r.Ab(3,"div",3),r.Ob(4,$m,2,1,"button",4),r.zb(),r.Ab(5,"div",3),r.Ob(6,Zm,2,1,"button",5),r.zb(),r.Ab(7,"div",3),r.Ob(8,tb,2,0,"button",6),r.zb(),r.Ab(9,"div",3),r.Ob(10,eb,2,0,"button",7),r.zb(),r.zb(),r.Ob(11,nb,1,0,"hr",8),r.Ob(12,ab,22,5,"div",1),r.yb(13,"hr"),r.Ab(14,"div",9),r.Ob(15,ub,1,1,"app-player",10),r.zb(),r.Ob(16,cb,1,0,"hr",8),r.Ob(17,lb,4,6,"div",1),r.Ab(18,"div",11),r.Ab(19,"div",12),r.Ab(20,"div",13),r.Ab(21,"div",14),r.Ab(22,"h5",15),r.Pb(23,"New Player Information "),r.zb(),r.zb(),r.Ab(24,"div",16),r.Ab(25,"form",17),r.Gb("submit",function(){return e.onReactiveSubmit(e.newPlayerForm.value)}),r.Ab(26,"div",18),r.yb(27,"input",19),r.zb(),r.Ab(28,"div",18),r.Ab(29,"label",20),r.Pb(30," Select Profile Image "),r.Ab(31,"input",21,22),r.Gb("change",function(t){return e.showPreview(t)})("click",function(){return r.Lb(t),r.Kb(32).value=null}),r.zb(),r.zb(),r.zb(),r.Ab(33,"div",23),r.Ob(34,hb,1,1,"img",24),r.zb(),r.Ab(35,"div",25),r.Ab(36,"button",26),r.Pb(37,"Add"),r.zb(),r.Ab(38,"button",27),r.Gb("click",function(){return e.resetForm()}),r.Pb(39,"Cancel"),r.zb(),r.zb(),r.zb(),r.zb(),r.zb(),r.zb(),r.zb(),r.zb()}2&t&&(r.ob(1),r.Ib("ngIf",!e.isAuthenticated&&!e.players.length),r.ob(3),r.Ib("ngIf",0!=e.players.length&&e.isAuthenticated),r.ob(2),r.Ib("ngIf",e.isAuthenticated),r.ob(2),r.Ib("ngIf",0!=e.players.length&&e.isAuthenticated),r.ob(2),r.Ib("ngIf",e.isAuthenticated),r.ob(1),r.Ib("ngIf",0!=e.players.length&&e.isAuthenticated),r.ob(1),r.Ib("ngIf",0!=e.players.length),r.ob(3),r.Ib("ngForOf",e.players),r.ob(1),r.Ib("ngIf",0!=e.players.length),r.ob(1),r.Ib("ngIf",0!=e.players.length&&e.isAuthenticated),r.ob(8),r.Ib("formGroup",e.newPlayerForm),r.ob(9),r.Ib("ngIf",e.selectedImage),r.ob(2),r.Ib("disabled",(null==e.formControls.name.errors?null:e.formControls.name.errors.required)||(null==e.formControls.imageUrl.errors?null:e.formControls.imageUrl.errors.required)))},directives:[y,p,an,ye,An,Wt,ge,hn,Ne,sn,Jm,f],styles:["input[_ngcontent-%COMP%]::-webkit-inner-spin-button, input[_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.addPlayer[_ngcontent-%COMP%]{background-color:#343a40;border:#343a40;color:#fff}.correct[_ngcontent-%COMP%]{background-color:#1bda84;border:#1bda84;color:#fff}.wrong[_ngcontent-%COMP%]{background-color:#fe5f55;border:#fe5f55;color:#fff}input[type=file][_ngcontent-%COMP%]{display:none}.preview-image-container[_ngcontent-%COMP%]{text-align:center}.preview-image[_ngcontent-%COMP%]{width:100%;height:100%}"]}),t})(),db=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.rb({type:t,selectors:[["app-footer"]],decls:5,vars:0,consts:[[1,"page-footer","font-small","myFooter"],[1,"footer-copyright","text-center","py-3"],["href","https://www.instagram.com/aug.gag/"]],template:function(t,e){1&t&&(r.Ab(0,"footer",0),r.Ab(1,"div",1),r.Pb(2,"\xa9 2020 Copyright: "),r.Ab(3,"a",2),r.Pb(4," August Club"),r.zb(),r.zb(),r.zb())},styles:[".myFooter[_ngcontent-%COMP%]{padding:10px 10px 0;width:100%}"]}),t})(),pb=(()=>{class t{constructor(t){this.authService=t,this.title="ScoreMachine"}}return t.\u0275fac=function(e){return new(e||t)(r.xb(Pt))},t.\u0275cmp=r.rb({type:t,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container",2,"height","100vh","margin-top","100px"]],template:function(t,e){1&t&&(r.yb(0,"app-navigation"),r.Ab(1,"div",0),r.yb(2,"app-texas-poker"),r.yb(3,"app-footer"),r.zb())},directives:[_n,fb,db],styles:[""]}),t})(),gb=(()=>{class t{}return t.\u0275mod=r.vb({type:t}),t.\u0275inj=r.ub({factory:function(e){return new(e||t)},imports:[[b,yn]]}),t})();var yb=n("w1tV");class vb extends et.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class mb extends et.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var bb=n("SeVD");function wb(t,e,n,r,i=new mb(t,n,r)){if(!i.closed)return e instanceof Z.a?e.subscribe(i):Object(bb.a)(e)(i)}class _b{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Bb(t,this.observables,this.project))}}class Bb extends vb{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(wb(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Cb{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Eb(t,this.predicate))}}class Eb extends et.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function Qb(t){return null==t}function Ub(t){return"function"==typeof t.set}function Ob(t,e){return Ub(e)?e:t.ref(e)}function Ib(t,e){if("string"==typeof t)return e.stringCase();if(Ub(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function Tb(t,e,n="on",r=In.a){return new Z.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(ot.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(yb.a)())}function Fb(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function Nb(t,e){const{payload:n,prevKey:r,key:i}=e,o=Fb(t,i),s=function(t,e){if(Qb(e))return 0;{const n=Fb(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function Sb(t){return(Qb(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Hb(t,e,n){return function(t,e,n){return Tb(t,"value","once",n).pipe(ay(r=>{const i=[Object($.a)(r)];return e.forEach(e=>i.push(Tb(t,e,"on",n))),Object(oy.a)(...i).pipe(Dn(Nb,[]))}),Ln())}(t,e=Sb(e),n)}function Rb(t,e,n){const r=(e=Sb(e)).map(e=>Tb(t,e,"on",n));return Object(oy.a)(...r)}function xb(t,e){return function(n,r){return Ib(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function Db(t,e){return function(){return Tb(t,"value","on",e)}}n("6Uf2");const Pb=new r.l("angularfire2.realtimeDatabaseURL"),kb=new r.l("angularfire2.database.use-emulator");let Lb=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Vn.d(i),this.keepUnstableUntilFirst=Object(Vn.h)(this.schedulers);const a=o,u=Object(Vn.g)(t,i,e);!zn.a.auth&&s&&Object(Vn.j)(),this.database=Object(Vn.f)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Ob(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:xb(r,"update"),set:xb(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?Ib(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>Hb(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>Rb(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return Tb(t,"value","on",e).pipe(Object(ot.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new _b(t,n))}}(e),Object(ot.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Cb(r))),Object(ot.a)(t=>t.actions));var r}(t,Rb(t,e).pipe(Dn((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>Hb(t,r,n).pipe(Object(ot.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>Ob(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>Db(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Db(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(ot.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Db(Vn.c),r.Db(Vn.b,8),r.Db(Pb,8),r.Db(r.u),r.Db(r.s),r.Db(kb,8),r.Db(Ny,8))},t.\u0275prov=Object(r.tb)({factory:function(){return new t(Object(r.Db)(Vn.c),Object(r.Db)(Vn.b,8),Object(r.Db)(Pb,8),Object(r.Db)(r.u),Object(r.Db)(r.s),Object(r.Db)(kb,8),Object(r.Db)(Ny,8))},token:t,providedIn:"any"}),t})(),Mb=(()=>{class t{}return t.\u0275mod=r.vb({type:t}),t.\u0275inj=r.ub({factory:function(e){return new(e||t)},providers:[Lb]}),t})(),jb=(()=>{class t{}return t.\u0275mod=r.vb({type:t}),t.\u0275inj=r.ub({factory:function(e){return new(e||t)},imports:[[b,Dt,yn,vn,Vn.a.initializeApp(i),Dm,Mb],Dt]}),t})(),Kb=(()=>{class t{}return t.\u0275mod=r.vb({type:t,bootstrap:[pb]}),t.\u0275inj=r.ub({factory:function(e){return new(e||t)},providers:[],imports:[[gb,jb,J,Dt]]}),t})();Object(r.I)(),W().bootstrapModule(Kb).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(!e.closed)return t instanceof i.a?t.subscribe(e):Object(o.a)(t)(e)}}},[[0,0]]]);